if (self.CavalryLogger) { CavalryLogger.start_js(["V+o3n"]); }

__d("AdsGenericFilterOperatorConfigUtil",["AdsGenericFilterOperatorConfig","ex"],(function(a,b,c,d,e,f){function a(a){for(var c in b("AdsGenericFilterOperatorConfig")){var d=b("AdsGenericFilterOperatorConfig")[c];if(a===d.operator)return d}throw new Error(b("ex")('Invalid operator "%s"',a))}c={getConfigByOperator:a};e.exports=c}),null);
__d("AdsGenericFilterValueConfigUtil",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){if(b)for(var c in a){var d=a[c];if(d.value===b)return d}return null}b={getConfigByValue:a};e.exports=b}),null);
__d("AdsGenericFilterValueTextUtil",["fbt","invariant","AdsGenericFilterFieldType","AdsGenericFilterOperator","AdsGenericFilterValueConfigUtil","SearchableEntry","gkx","intlList"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function(a){return a};function a(a,b,c){var d=a.value,e="",f=b.valueRenderer||i;typeof d==="string"||typeof d==="number"?e=j(c,d,f):b.valueSetRenderer?e=b.valueSetRenderer(b.valueRenderer,b.values,d):Array.isArray(d)?e=k(c,d,f,a,!!b.applyOnly):h(0,1975,d);return e}function j(a,c,d){a=b("AdsGenericFilterValueConfigUtil").getConfigByValue(a,c);return d(a?a.value:String(c))}function k(a,c,d,e,f){__p&&__p();var h="";if(f)h=b("gkx")("681749")?g._("{count} selected",[g._param("count",c.length)]):String(c.length);else{c.length===2&&e.field.type===b("AdsGenericFilterFieldType").DATE_RANGE&&(c=[c[0],""+(Number(c[1])-1)]);c=c.map(function(c){var e=c;c instanceof b("SearchableEntry")&&(e=c.getTitle());return j(a,e,d)});switch(e.operator){case b("AdsGenericFilterOperator").IN_RANGE:case b("AdsGenericFilterOperator").NOT_IN_RANGE:h=c.join(" - ");break;case b("AdsGenericFilterOperator").ALL:h=b("intlList")(c,b("intlList").CONJUNCTIONS.AND);break;case b("AdsGenericFilterOperator").NONE:h=b("intlList")(c,b("intlList").CONJUNCTIONS.NONE);break;default:h=b("intlList")(c,b("intlList").CONJUNCTIONS.OR)}}return h}c={getValueText:a};e.exports=c}),null);
__d("AdsCFCheckbox.react",["cx","Event","FDSSimplePopover.react","Keys","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$4=function(a){var c=b("Event").getKeyCode(a);(c===b("Keys").RETURN||c===b("Keys").SPACE)&&this.$2(a)}.bind(this),this.$5=function(){this.state.pressed||this.setState({pressed:!0})}.bind(this),this.$6=function(){this.state.pressed&&this.setState({pressed:!1})}.bind(this),this.$2=function(a){a.preventDefault(),this.props.onChange&&this.props.onChange(!this.props.checked,this.props.name||"",this.props.value)}.bind(this),this.$3=function(){this.setState({focused:!0})}.bind(this),this.$1=function(){this.setState({focused:!1,pressed:!1})}.bind(this),this.state={focused:!1,pressed:!1}}a.prototype.render=function(){var a=this.props.checked,c=!!this.props.disabled,d=!c&&this.state.focused,e;this.props.helpText!=null&&this.props.helpText!==""&&(e=b("React").createElement(b("FDSSimplePopover.react"),{content:this.props.helpText,contentWidthUseSparingly:368}));var f=!c&&this.state.pressed;d=b("joinClasses")("_5y_b"+(this.props.inline?" _5y_c":"")+(a?" checked":"")+(c?" disabled":"")+(d?" focused":"")+(f?" pressed":""),this.props.className);f=c?-1:0;return b("React").createElement("div",{"aria-checked":a,"aria-disabled":c,"aria-labelledby":this.props.label,className:d,"data-testid":this.props["data-testid"],role:"checkbox",tabIndex:f,onBlur:c?null:this.$1,onClick:c?null:this.$2,onFocus:c?null:this.$3,onKeyUp:c?null:this.$4,onMouseDown:c?null:this.$5,onMouseUp:c?null:this.$6},b("React").createElement("i",{className:"_5y_d"}),b("React").createElement("span",{className:"_5y_a"},this.props.label,e))};e.exports=a}),null);
__d("PageCommerceStripeRedirectConfirmationDialog.react",["cx","fbt","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react","XUIText.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=500;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={dialogShown:!1},this.show=function(){this.setState({dialogShown:!0})}.bind(this),this.hide=function(){this.setState({dialogShown:!1})}.bind(this),b}a.prototype.render=function(){return!this.state.dialogShown?null:b("React").createElement(b("XUIDialog.react"),{width:j,onToggle:function(a){return this.setState({dialogShown:a})}.bind(this),shown:this.state.dialogShown},b("React").createElement(b("XUIDialogHeader.react"),null,b("React").createElement(b("XUIDialogHeaderTitle.react"),null,h._("B\u1ea1n c\u00f3 \u0111\u01a1n \u0111\u1eb7t h\u00e0ng \u0111ang ch\u1edd"))),b("React").createElement(b("XUIDialogBody.react"),{className:"_2ph_"},b("React").createElement(b("XUIText.react"),null,h._("C\u1eeda h\u00e0ng c\u1ee7a b\u1ea1n c\u00f3 \u0111\u01a1n \u0111\u1eb7t h\u00e0ng ch\u01b0a v\u1eadn chuy\u1ec3n. N\u1ebfu b\u1ea1n k\u1ebft n\u1ed1i v\u1edbi t\u00e0i kho\u1ea3n Stripe kh\u00e1c, b\u1ea1n s\u1ebd kh\u00f4ng th\u1ec3 nh\u1eadn kho\u1ea3n thanh to\u00e1n cho nh\u1eefng \u0111\u01a1n \u0111\u1eb7t h\u00e0ng \u0111\u00f3 n\u1eefa. H\u00e3y xem x\u00e9t ho\u00e0n t\u1ea5t v\u00e0 v\u1eadn chuy\u1ec3n c\u00e1c \u0111\u01a1n \u0111\u1eb7t h\u00e0ng \u0111ang ch\u1edd tr\u01b0\u1edbc khi thay \u0111\u1ed5i t\u00e0i kho\u1ea3n Stripe cho c\u1eeda h\u00e0ng."))),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogButton.react"),{label:h._("Thay \u0111\u1ed5i t\u00e0i kho\u1ea3n Stripe"),use:"default",onClick:this.props.onContinue}),b("React").createElement(b("XUIDialogButton.react"),{label:h._("H\u1ee7y"),use:"confirm",onClick:this.hide})))};a.propTypes={onContinue:c.func.isRequired};e.exports=a}),null);
__d("XCommerceSelfServeHasPendingOrdersQueryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/commerce/self-serve/has-pending-orders/",{page_id:{type:"Int",required:!0}})}),null);
__d("CommerceStripeConnectLink.react",["cx","AsyncRequest","DOM","DTSG","Link.react","PageCommerceStripeRedirectConfirmationDialog.react","PaymentsTypeEnum","React","ReactDOM","XCommerceSelfServeHasPendingOrdersQueryController","XStripeOnboardingController","XUIText.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){var c=b("XCommerceSelfServeHasPendingOrdersQueryController").getURIBuilder().setInt("page_id",this.props.pageID).getURI();new(b("AsyncRequest"))().setURI(c).setHandler(function(c){c=c.payload.has_pending_orders;if(c){c=b("ReactDOM").render(b("React").createElement(b("PageCommerceStripeRedirectConfirmationDialog.react"),{onContinue:function(){return a()}}),b("DOM").create("div"));c.show()}else a()}).send()}.bind(this),c}a.prototype.render=function(){"use strict";var a=b("XStripeOnboardingController").getURIBuilder().setInt("page_id",this.props.pageID).setEnum("payment_type",b("PaymentsTypeEnum").BOF).getURI();return b("React").createElement("span",null,b("React").createElement("form",{className:"hidden_elem",action:a,method:"post",ref:"connectStripeForm",target:"_blank"},b("React").createElement("input",{type:"hidden",name:"fb_dtsg",value:b("DTSG").getToken()})),b("React").createElement(b("Link.react"),{onClick:this.$1.bind(this,function(){return this.refs.connectStripeForm.submit()}.bind(this))},b("React").createElement(b("XUIText.react"),{size:"meta1"},this.props.content)))};a.propTypes={confirmationURI:c.string,content:c.node.isRequired,pageID:c.string.isRequired};e.exports=a}),null);
__d("CommerceExceptionHandlerMixin.react",["fbt","AsyncRequest","CommerceErrorCode","CommerceErrorNotice.react","CommerceStripeConnectLink.react","React","XCommerceResponse"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getInitialState:function(){return{xResponse:null}},sendAsync:function(a,c,d,e){new(b("AsyncRequest"))(a).setData(c||{}).setHandler(function(a){var c=new(b("XCommerceResponse"))(a.payload);this.setState({xResponse:c});!c.hasErrors()?d&&d(a):e&&e(a)}.bind(this)).setErrorHandler(function(a){this.setGeneralError(b("CommerceErrorCode").COMMERCE__GENERIC_EXCEPTION),e&&e(a)}.bind(this)).send()},setGeneralError:function(a){var c=this.state.xResponse?this.state.xResponse:new(b("XCommerceResponse"))({});c.setGeneralError(a);this.setState({xResponse:c})},addFieldError:function(a,c){var d=this.state.xResponse?this.state.xResponse:new(b("XCommerceResponse"))({});d.addFieldError(a,c);this.setState({xResponse:d})},_getFullErrorMessage:function(a){if(!a)return null;if(a.code.toString()===b("CommerceErrorCode").COMMERCE__STRIPE_DEFERRED_ACCOUNT_EMAIL_USED.code.toString()){var c=g._("k\u1ebft n\u1ed1i c\u1eeda h\u00e0ng c\u1ee7a b\u1ea1n v\u1edbi t\u00e0i kho\u1ea3n hi\u1ec7n t\u1ea1i");return g._("T\u00e0i kho\u1ea3n Stripe c\u00f3 \u0111\u1ecba ch\u1ec9 email n\u00e0y \u0111\u00e3 t\u1ed3n t\u1ea1i. Vui l\u00f2ng s\u1eed d\u1ee5ng m\u1ed9t \u0111\u1ecba ch\u1ec9 email kh\u00e1c ho\u1eb7c {connect to a different Stripe account link}.",[g._param("connect to a different Stripe account link",b("React").createElement(b("CommerceStripeConnectLink.react"),{pageID:this.props.pageID,content:c}))])}return a.title+": "+a.message},hasErrors:function(){return!!this.state.xResponse&&this.state.xResponse.hasErrors()},hasGeneralError:function(){return!!this.state.xResponse&&this.state.xResponse.hasGeneralError()},hasFieldErrors:function(){return!!this.state.xResponse&&this.state.xResponse.hasFieldErrors()},renderAllErrors:function(){__p&&__p();var a=this.state.xResponse,b=[];if(this.hasFieldErrors()){var c=a.getFieldErrors();c.forEach(function(a){return b.push(a)})}this.hasGeneralError()&&b.push(a.getGeneralError());c=b.map(function(a){return this._getFullErrorMessage(a)}.bind(this));return this.renderErrorMessages(c)},renderGeneralError:function(){if(this.hasGeneralError())return this.renderErrorMessages([this.getGeneralErrorMessage()]);else return null},renderErrorMessages:function(a){if(a.length===0)return null;else{a=b("React").createElement("ul",null,a.map(function(a,c){return b("React").createElement("li",{key:c},a)}));return b("React").createElement(b("CommerceErrorNotice.react"),{error:a})}},getGeneralErrorMessage:function(){if(this.hasGeneralError()){var a=this.state.xResponse.getGeneralError();return this._getFullErrorMessage(a)}else return null},getFieldErrorMessage:function(a){return!this.hasFieldErrors()?null:this._getFullErrorMessage(this.state.xResponse.getFieldErrors()[a])}};e.exports=a}),null);
__d("BUIPresetFilterModes_DEPRECATED",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c={DRAWER:"drawer",POPOVER:"popover",propTypes:a.oneOf(["drawer","popover"])};e.exports=c}),null);
__d("BUIPresetFiltersHeader_DEPRECATED.react",["cx","BUIPresetFilterModes_DEPRECATED","InlineBlock.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$2=function(a){a.preventDefault();if(!this.props.isCollapsible)return;this.props.onTextClick(!this.props.collapsed)}.bind(this),this.$3=function(a){a.preventDefault(),this.props.onCheckmarkClick()}.bind(this),b}a.prototype.render=function(){var a="_3l9f"+(this.props.collapsed?"":" _3l9g"),c="_3l9h"+(this.props.collapsed&&this.props.isAnyChecked&&this.$1()?" _3l9i":"")+(this.props.isAnyChecked&&this.$1()?" _3l9j":"");return b("React").createElement("div",{className:a,onClick:this.$2,role:"presentation"},b("React").createElement(b("InlineBlock.react"),{className:c,onClick:this.$1()?this.$3:null}),b("React").createElement(b("InlineBlock.react"),{className:"_3l9k"},b("React").createElement("h3",{className:"_3l9m"},this.props.children)),b("React").createElement(b("InlineBlock.react"),{className:"_3la8"+(this.props.isCollapsible?"":" hidden_elem")}))};a.prototype.$1=function(){return this.props.mode===b("BUIPresetFilterModes_DEPRECATED").DRAWER};a.propTypes={collapsed:c.bool,isAnyChecked:c.bool,isCollapsible:c.bool,mode:b("BUIPresetFilterModes_DEPRECATED").propTypes.isRequired,onCheckmarkClick:c.func.isRequired,onTextClick:c.func.isRequired};a.defaultProps={mode:b("BUIPresetFilterModes_DEPRECATED").DRAWER};e.exports=a}),null);
__d("BUIPopoverSection_DEPRECATED.react",["cx","BUIPresetFilterModes_DEPRECATED","BUIPresetFiltersHeader_DEPRECATED.react","React","ReactCSSTransitionGroup","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.$1=function(a){a.preventDefault()};a.prototype.render=function(){var a=this.props.isHidden?null:this.props.renderItems();this.props.shouldAnimate&&(a=b("React").createElement(b("ReactCSSTransitionGroup"),{transitionName:{enter:"_1d6a",enterActive:"_1d6b",leave:"_1d6c",leaveActive:"_1d6e",appear:"_1d6a",appearActive:"_1d6b"},transitionEnterTimeout:500,transitionLeaveTimeout:300,transitionAppear:!0,transitionAppearTimeout:500},a));return b("React").createElement("div",{key:this.props.id,className:b("joinClasses")(this.props.className,"_3top"+(this.props.isCollapsible?" _3tox":"")),onMouseDown:this.$1},b("React").createElement(b("BUIPresetFiltersHeader_DEPRECATED.react"),{collapsed:this.props.isHidden,isAnyChecked:this.props.isAnyChecked,isCollapsible:this.props.isCollapsible,mode:this.props.mode,onCheckmarkClick:this.props.onCheckmarkClick,onTextClick:this.props.onTextClick},this.props.title,this.props.subtitle),a,this.props.children)};function a(){h.apply(this,arguments)}a.propTypes={className:c.string,id:c.string.isRequired,isAnyChecked:c.bool.isRequired,isCollapsible:c.bool.isRequired,isHidden:c.bool.isRequired,mode:b("BUIPresetFilterModes_DEPRECATED").propTypes.isRequired,onCheckmarkClick:c.func.isRequired,onTextClick:c.func.isRequired,renderItems:c.func.isRequired,shouldAnimate:c.bool,title:c.node.isRequired};e.exports=a}),null);
__d("BUIPresetFiltersGroup_DEPRECATED",["ClientIDs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(){return 0};function a(a,c,d,e,f,h,i,j){this.$7=a,this.$2=c,this.$6=d,this.$5=e||0,this.$1=f||g,this.$3=h||b("ClientIDs").getNewClientID(),this.$4=i===void 0?!0:i,this.$8=[],this.$9=j===void 0?!1:j}a.prototype.getTitle=function(){return this.$7};a.prototype.getFilters=function(){return this.$2};a.prototype.getID=function(){return this.$3};a.prototype.getMaxItemCount=function(){return this.$5};a.prototype.doCompare=function(a,b){return this.$1(a,b)};a.prototype.doOnChange=function(a,b,c){this.$6(a,b,c)};a.prototype.isCollapsible=function(){return this.$4};a.prototype.hasSeparator=function(){return this.$9};a.prototype.addSubgroup=function(a){this.$8.push(a)};a.prototype.getSubgroups=function(){return this.$8};a.prototype.hasSubgroups=function(){return this.$8.length>0};e.exports=a}),null);
__d("BUIPresetFiltersItem_DEPRECATED",["invariant","ClientIDs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,c,d,e,f,g){this.$1=a,this.$2=!!c,this.$3=!!d,this.$4=e,this.$5=f,this.$6=g||b("ClientIDs").getNewClientID()}a.prototype.getText=function(){return this.$1};a.prototype.isChecked=function(){return this.$2};a.prototype.isDisabled=function(){return this.$3};a.prototype.getFilterReference=function(){return this.$4};a.prototype.getID=function(){return this.$6};a.prototype.canBeDeleted=function(){return!!this.$5};a.prototype.doOnDelete=function(){this.$5||g(0,5355),this.$5(this)};e.exports=a}),null);
__d("BUIPresetFiltersSelectableItem_DEPRECATED.react",["cx","BUIAdoptionCloseButton.react","BUIPresetFilterModes_DEPRECATED","InlineBlock.react","React","XUIContextualDialog.react","XUIContextualDialogBody.react","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i=200;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$2=function(a){this.$1=a}.bind(this),this.$3=function(){return this.$1}.bind(this),this.$5=function(a){a.preventDefault(),this.props.onClick(!this.props.checked)}.bind(this),this.$4=function(a){a.preventDefault(),b("nullthrows")(this.props.onDelete)(),a.stopPropagation()}.bind(this),c}a.prototype.render=function(){var a=!!this.props.disabled,c=(a?"":"_24qd")+(a?" _25li":""),d="_4yk7"+(this.props.checked?" _3l9i":""),e="_25lj"+(this.props.onDelete?" _4ykb":"")+(this.props.checked?" _4ykc":""),f=this.props.onDelete?b("React").createElement(b("BUIAdoptionCloseButton.react"),{className_DEPRECATED:"_4ykd",shade:this.isDrawer()?"dark":"light",onClick:this.$4}):null,g=this.props.position==="left"?10:-4,h=this.props.tooltipWidth?this.props.tooltipWidth:i;g=this.props.showTooltip?b("React").createElement(b("XUIContextualDialog.react"),{contextRef:this.$3,hoverContextRef:this.$3,hoverHideDelay:0,onToggle:this.props.onToggle,offsetX:g,position:this.props.position,width:h},b("React").createElement(b("XUIContextualDialogBody.react"),null,this.props.tooltip)):null;return b("React").createElement("li",{"data-testid":this.props["data-testid"]||"",onClick:a?null:this.$5},b("React").createElement("div",{className:c,ref:this.$2},b("React").createElement(b("InlineBlock.react"),{className:d}),b("React").createElement(b("InlineBlock.react"),{className:e},this.props.children),f),g)};a.prototype.isDrawer=function(){return this.props.mode===b("BUIPresetFilterModes_DEPRECATED").DRAWER};a.propTypes={"data-testid":c.string,children:c.any,mode:b("BUIPresetFilterModes_DEPRECATED").propTypes.isRequired,position:c.string};a.defaultProps={mode:b("BUIPresetFilterModes_DEPRECATED").DRAWER,position:"left"};e.exports=a}),null);
__d("BUIPresetFiltersUniqueItem_DEPRECATED.react",["cx","InlineBlock.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(a){if(this.props.disabled)return;a.preventDefault();this.props.onClick()}.bind(this),b}a.prototype.render=function(){var a="_25l9"+(this.props.disabled?"":" _24qd")+(this.props.disabled?" _25li":"");return b("React").createElement("div",{className:a,onClick:this.$1,role:"presentation"},b("React").createElement(b("InlineBlock.react"),{className:"_25lj"},this.props.label))};a.propTypes={label:c.node.isRequired,disabled:c.bool.isRequired,onClick:c.func.isRequired};e.exports=a}),null);
__d("BUIPresetFilters_DEPRECATED.react",["cssVar","cx","ix","BUIPopoverSection_DEPRECATED.react","BUIPresetFilterModes_DEPRECATED","BUIPresetFiltersGroup_DEPRECATED","BUIPresetFiltersSelectableItem_DEPRECATED.react","BUIPresetFiltersUniqueItem_DEPRECATED.react","Image.react","React","ReactDOM","ResponsiveBlock.react","ShimButton.react","curry","immutable","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l;a=b("React").PropTypes;var m=parseInt("32",10);c={mode:b("BUIPresetFilterModes_DEPRECATED").DRAWER};d=babelHelpers.inherits(n,b("React").PureComponent);j=d&&d.prototype;function n(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={heightList:b("immutable").List(),prevSelected:-1,selected:this.props.isSubgroup?void 0:0},c}n.prototype.render=function(){var a=this.props.maxWidth;return b("React").createElement("div",{className:(this.$1()?"_-s3":"")+(this.$2()?" _3c-_":""),style:{maxWidth:a}},this.$3())};n.prototype.$3=function(){var a=this.$4(),b=this.$5();if(!a)return b;return this.props.shouldRenderUniqueFiltersFirst?a.concat(b):b.concat(a)};n.prototype.$6=function(){return b("React").createElement("div",{className:"_nbs",style:{backgroundColor:"#dddfe2",marginBottom:5,marginLeft:5,marginRight:5,marginTop:5}})};n.prototype.$5=function(){__p&&__p();return this.props.filterGroups.map(function(a,c){var d=b("React").createElement(o,{shouldAnimate:this.props.shouldAnimate,className:a.isCollapsible()?"_3tox":"",filterBlacklist:this.props.filterBlacklist,group:a,key:a.getID(),mode:this.props.mode,isPrev:this.state.prevSelected===c,isHidden:this.$1()?!1:this.state.selected!==c,onHeaderClick:this.$7.bind(this,c),ref:c});if(this.props.shouldAnimate){var e,f=this.state.heightList.get(c,0);f!==void 0&&(e={height:f,marginTop:-1*f});f=b("React").createElement("div",{className:"_-s4",key:"placeHolder",style:e});return b("React").createElement(b("ResponsiveBlock.react"),{key:a.getID(),onResize:function(){return this.$8(c)}.bind(this)},d,f)}else return b("React").createElement("div",{key:a.getID()},d,a.hasSeparator()?this.$6():null)}.bind(this))};n.prototype.$4=function(){return!this.props.uniqueFilters?null:this.props.uniqueFilters.map(function(a,c){return b("React").createElement(b("BUIPresetFiltersUniqueItem_DEPRECATED.react"),{disabled:!!a.disabled,label:a.label,onClick:a.onClick,key:c})})};n.prototype.$1=function(){return this.props.mode===b("BUIPresetFilterModes_DEPRECATED").DRAWER};n.prototype.$2=function(){return this.props.mode===b("BUIPresetFilterModes_DEPRECATED").POPOVER};n.prototype.$8=function(a){__p&&__p();if(this.state.prevSelected!==a&&(this.state.heightList.get(a)===0||this.state.heightList.get(a)===void 0)){var c=b("nullthrows")(b("ReactDOM").findDOMNode(this.refs[a]));c=c.offsetHeight;if(c>m){var d=this.state.prevSelected;d===-1&&a!==0&&(d=0);a=this.state.heightList.set(a,c);d!==-1&&(a=a.set(d,0));this.setState({heightList:a,prevSelected:d})}}};n.prototype.$7=function(a){if(!this.$2())return;this.setState({prevSelected:this.state.selected!=null?this.state.selected:-1});if(this.state.selected===a){var b=this.state.heightList.set(a,0);this.setState({heightList:b})}b=this.state.selected===a&&this.state.selected!==void 0?{selected:void 0}:{selected:a};this.setState(b)};n.propTypes={className:a.string,filterBlacklist:a.array,filterGroups:a.arrayOf(a.instanceOf(b("BUIPresetFiltersGroup_DEPRECATED"))).isRequired,shouldAnimate:a.bool,uniqueFilters:a.array,mode:b("BUIPresetFilterModes_DEPRECATED").propTypes.isRequired,isSubgroup:a.bool,shouldRenderUniqueFiltersFirst:a.bool,maxWidth:a.string};n.defaultProps=c;f=babelHelpers.inherits(o,b("React").PureComponent);k=f&&f.prototype;function o(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.state=this.$1(this.props,null),this.$2=function(){this.setState({isHidden:!this.state.isHidden}),this.props.onHeaderClick&&this.props.onHeaderClick()}.bind(this),this.$3=function(a,b){return this.props.group.getFilters().filter(function(c){return c.getID()===a.getID()?b:c.isChecked()})}.bind(this),this.$4=function(a){var b=!a.isChecked();this.props.group.doOnChange(this.$3(a,b),[a],b)}.bind(this),this.$5=function(){var a=!1,b=[];this.props.group.getFilters().forEach(function(c){c.isChecked()&&(b.push(c),a=!0)});a&&this.props.group.doOnChange([],b,!1)}.bind(this),this.$6=function(a){return b("React").createElement("ul",{className:"_3c_0"},a.map(function(a){var c=a.getText(),d=!1;this.props.filterBlacklist!=null&&this.props.filterBlacklist.includes(c)&&(d=!0);return b("React").createElement(b("BUIPresetFiltersSelectableItem_DEPRECATED.react"),{checked:a.isChecked(),disabled:d||a.isDisabled(),key:a.getID(),mode:this.props.mode,onClick:b("curry")(this.$4,a),onDelete:a.canBeDeleted()?a.doOnDelete.bind(a):null,"data-testid":"filter-item"+a.getText().toString()},a.getText())}.bind(this)))}.bind(this),this.$8=function(a){var b=this.state.howManyToShow;b+=a.getMaxItemCount();this.setState({howManyToShow:b})}.bind(this),c}o.prototype.UNSAFE_componentWillReceiveProps=function(a){this.setState(this.$1(a,this.state))};o.prototype.$1=function(a,b){__p&&__p();var c=a.group;a=a.isHidden!=null?a.isHidden:b?b.isHidden:!1;var d={};if(c.getMaxItemCount()){var e=c.getFilters().slice(0);e.sort(c.doCompare.bind(c));e.forEach(function(a,b){d[a.getID()]=b+1})}return{filterIDToRankMap:d,howManyToShow:b?b.howManyToShow:c.getMaxItemCount(),isHidden:a}};o.prototype.$7=function(a){return b("React").createElement(p,{group:a,onClick:this.$8})};o.prototype.render=function(){var a=this.props.group,c=null;a.hasSubgroups()&&(c=b("React").createElement("li",{className:"_-s5"},b("React").createElement(n,{filterGroups:a.getSubgroups(),isSubgroup:!0,mode:b("BUIPresetFilterModes_DEPRECATED").POPOVER})));var d=a.getFilters(),e=this.state.howManyToShow,f=null,g=e&&d.length>e;g&&!this.state.isHidden&&(d=d.filter(function(a){return this.state.filterIDToRankMap[a.getID()]<=e}.bind(this)),f=this.$7(a));return b("React").createElement(b("BUIPopoverSection_DEPRECATED.react"),{className:this.props.className,filterBlacklist:this.props.filterBlacklist,id:a.getID(),isHidden:this.state.isHidden,isAnyChecked:a.getFilters().some(function(a){return a.isChecked()}),isCollapsible:a.isCollapsible(),onCheckmarkClick:this.$5,onTextClick:this.$2,mode:this.props.mode,shouldAnimate:this.props.shouldAnimate,title:a.getTitle(),renderItems:b("curry")(this.$6,d)},this.state.isHidden?null:c,f)};o.propTypes={filterBlacklist:a.array,group:a.instanceOf(b("BUIPresetFiltersGroup_DEPRECATED")).isRequired,isHidden:a.bool,isPrev:a.bool,mode:b("BUIPresetFilterModes_DEPRECATED").propTypes.isRequired,onHeaderClick:a.func,shouldAnimate:a.bool};g=babelHelpers.inherits(p,b("React").PureComponent);l=g&&g.prototype;function p(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=l.constructor).call.apply(a,[this].concat(d)),this.$1=function(a){a.preventDefault(),this.props.onClick(this.props.group)}.bind(this),b}p.prototype.render=function(){return b("React").createElement(b("ShimButton.react"),{className:"_-s6",onClick:this.$1},b("React").createElement(b("Image.react"),{className:"_-t0",src:i("29095")}))};p.propTypes={group:a.instanceOf(b("BUIPresetFiltersGroup_DEPRECATED")).isRequired};e.exports=n}),null);
__d("BUIFilterTokenInputHelper",["invariant","AdsGenericFilter","AdsGenericFilterFieldConfigUtil","AdsGenericFilterFieldType","AdsGenericFilterOperator","AdsGenericFilterOperatorConfigUtil"],(function(a,b,c,d,e,f,g){__p&&__p();var h=function(a){return a},i={},j=[[b("AdsGenericFilterOperator").GREATER_THAN,b("AdsGenericFilterOperator").LESS_THAN,b("AdsGenericFilterOperator").EQUAL,b("AdsGenericFilterOperator").NOT_EQUAL],[b("AdsGenericFilterOperator").CONTAIN,b("AdsGenericFilterOperator").NOT_CONTAIN],[b("AdsGenericFilterOperator").IN_RANGE,b("AdsGenericFilterOperator").NOT_IN_RANGE],[b("AdsGenericFilterOperator").IN,b("AdsGenericFilterOperator").NOT_IN],[b("AdsGenericFilterOperator").BEFORE,b("AdsGenericFilterOperator").AFTER],[b("AdsGenericFilterOperator").ANY,b("AdsGenericFilterOperator").ALL,b("AdsGenericFilterOperator").NONE]];function k(a,c){return a.name===c.name?!0:a.type!==b("AdsGenericFilterFieldType").NUMBER_SET&&a.type!==b("AdsGenericFilterFieldType").STRING_SET&&a.type===c.type}function l(a,b){__p&&__p();if(a===b)return!0;var c;a<b?c=a+","+b:c=b+","+a;if(c in i)return i[c];var d,e=!1,f=j.length;for(d=0;d<f;d++){var g=j[d];if(g.indexOf(a)>-1&&g.indexOf(b)>-1){e=!0;break}}i[c]=e;return e}function a(a,c){__p&&__p();var d=c.fieldConfig,e=d?d.field.name:null,f={},i=[],j;if(!d&&a.defaultFilter){var k=a.defaultFilter.field;d=b("AdsGenericFilterFieldConfigUtil").getConfigByField(a.fieldsConfig,k);e=d.field.name}a.filterBlacklist&&a.filterBlacklist.forEach(function(a){a instanceof b("AdsGenericFilter")||g(0,4772),f[a.field.name]=!0});a.validFieldConfigs.forEach(function(a){var b=a.field.name;f[b]||(b===e&&(j=!0),i.push(a))});j||(d=i[0],c.operatorConfig=void 0);d||g(0,4773);c.fieldConfig=d;c.fieldConfigOptions=i;c.fieldValueRenderer=d.valueRenderer||h;c.fieldValueParser=d.valueParser||h}function c(a,c){var d=c.fieldConfig;d||g(0,4774);var e=c.operatorConfig,f=e&&e.operator,h=[],i;!e&&a.defaultFilter&&(f=a.defaultFilter.operator,e=b("AdsGenericFilterOperatorConfigUtil").getConfigByOperator(f));d&&d.operators.forEach(function(a){a.operator===f&&(i=!0),h.push(a)});i||(e=h[0]);c.operatorConfig=e;c.operatorConfigOptions=h}function d(a,c){__p&&__p();var d=c.fieldConfig,e=c.value,f=c.valueField,g=c.valueOperator,h=m(d);if(e===void 0&&a.defaultFilter)e=d.defaultValue||a.defaultFilter.value,f=a.defaultFilter.field,g=a.defaultFilter.operator;else if(d&&!d.isFieldOnly){a=c.operatorConfig.operator;var i=d.field;if(!g||!a||!l(g,a)||!k(f,i)){g=a;f=i;switch(a){case b("AdsGenericFilterOperator").EQUAL:case b("AdsGenericFilterOperator").NOT_EQUAL:i=d.values;Array.isArray(i)&&i.length?e=i[0].value:e=h;break;case b("AdsGenericFilterOperator").IN_RANGE:case b("AdsGenericFilterOperator").NOT_IN_RANGE:e=[h,h];break;case b("AdsGenericFilterOperator").IN:case b("AdsGenericFilterOperator").NOT_IN:e=[];break;case b("AdsGenericFilterOperator").ANY:case b("AdsGenericFilterOperator").ALL:case b("AdsGenericFilterOperator").NONE:e=[];break;default:e=h}}}else e=h;c.value=e;c.valueField=f;c.valueOperator=g}function f(a,b){__p&&__p();var c=b.fieldConfig,d=c.supportedPrefixes;c=b.prefixes;!c&&a.defaultFilter&&(c=a.defaultFilter.prefixes.map(function(a){return a}));!d?c=[]:!c||c.length!==d.length?c=d.map(function(a){return null}):c=c.map(function(a,b){return d[b].prefixes.find(function(b){return a&&b.prefix===a})?a:null});b.prefixes=c;b.prefixHoverShown=b.prefixHoverShown||!1}function m(a){return a.isFieldOnly?a.defaultValue||0:a.field.type===b("AdsGenericFilterFieldType").DATE_RANGE?null:""}a={calibrateFieldState:a,calibrateOperatorState:c,calibrateValueState:d,calibratePrefixState:f};e.exports=a}),null);
__d("BUIFilterTokenSearchableInputUtils",["invariant","SearchableEntry"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getSUIFieldSearchSource:function(a,c){__p&&__p();if(!c)return a.map(function(a){return this.getSearchableEntry(a)}.bind(this));var d=new Map();a.forEach(function(a){var b=a.field.toString();d.has(b)&&g(0,167,b);d.set(b,a)});var e=[];c.forEach(function(a){switch(a.type){case"separator":break;case"item":var c=d.get(a.item);e.push(this.getSearchableEntry(c));break;case"group":a.children.forEach(function(c){c=d.get(c);c&&e.push(new(b("SearchableEntry"))({auxiliaryData:c,title:c.text,type:a.label,uniqueID:c.field.toString()}))});break}}.bind(this));return e},getSearchableEntry:function(a){return new(b("SearchableEntry"))({auxiliaryData:a,title:a.text,uniqueID:a.field.toString()})}};e.exports=a}),null);
__d("BUIFilterTokenTextInput.react",["cx","fbt","BUIComponent","ClockFormatConverter","ContextualDialog.react","Keys","React","ReactDOM","focusNode"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=/^-?\d+\.?\d*$/;d=babelHelpers.inherits(a,b("BUIComponent"));i=d&&d.prototype;function a(a){__p&&__p();i.constructor.call(this,a),this.$BUIFilterTokenTextInput4=function(a){a.keyCode===b("Keys").RETURN&&this.props.onEnter?this.props.onEnter(a):a.keyCode===b("Keys").ESC&&this.props.onEscape&&this.props.onEscape(a)}.bind(this),this.$BUIFilterTokenTextInput7=function(a){__p&&__p();var c=a.target.value,d=this.$BUIFilterTokenTextInput3(c);if(c!==d){a.preventDefault();if(this.state.tooltip===null){var e;switch(this.props.format){case"number":case"percentage":e=h._("Vui l\u00f2ng ch\u1ec9 nh\u1eadp s\u1ed1");break;case"duration":e=h._("Vui l\u00f2ng s\u1eed d\u1ee5ng \u0111\u1ecbnh d\u1ea1ng \u0111\u1ed3ng h\u1ed3 (pp {Time Separator} gg)",[h._param("Time Separator",b("ClockFormatConverter").TIME_SEPARATOR)]);break;default:return}this.setState({tooltip:e})}return}this.state.tooltip&&this.setState({tooltip:null});this.$BUIFilterTokenTextInput8()&&this.setState({tempValue:d});this.props.onChange(d)}.bind(this),this.$BUIFilterTokenTextInput5=function(){this.setState({focused:!0})}.bind(this),this.$BUIFilterTokenTextInput6=function(){this.setState(function(b,a){return{focused:!1,tooltip:null,tempValue:this.$BUIFilterTokenTextInput8()?null:b.tempValue}}.bind(this))}.bind(this),this.$BUIFilterTokenTextInput8=function(){return this.props.format==="currency"||this.props.format==="percentage"}.bind(this),this.$BUIFilterTokenTextInput1=null,this.state={focused:!1,tempValue:null,tooltip:null}}a.prototype.componentDidMount=function(){this.props.shouldFocus&&this.$BUIFilterTokenTextInput2()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.shouldFocus&&!this.state.focused&&this.$BUIFilterTokenTextInput2()};a.prototype.componentWillUnmount=function(){clearTimeout(this.$BUIFilterTokenTextInput1)};a.prototype.$BUIFilterTokenTextInput2=function(){var a=b("ReactDOM").findDOMNode(this.refs.input);a instanceof HTMLElement&&(this.$BUIFilterTokenTextInput1=setTimeout(function(){b("focusNode")(a),this.$BUIFilterTokenTextInput1=null}.bind(this),400))};a.prototype.renderLayers=function(){if(this.state.tooltip)return b("React").createElement(b("ContextualDialog.react"),{contextRef:function(){return this.refs.main}.bind(this),shown:!0,position:"above",key:"layer"},b("React").createElement("div",{className:"_48f_"},this.state.tooltip));else return null};a.prototype.render=function(){var a=this.$BUIFilterTokenTextInput3(this.props.value),c=this.props.placeholder||"",d="_48g0"+(this.state.focused?" _48g1":""),e="_48g2"+(a?" _48g3":"");return b("React").createElement("span",{className:"_4m56"},b("React").createElement("div",{className:d,ref:"main"},b("React").createElement("div",{"aria-hidden":"true",className:"_48g4"},(a||"-").replace(/\s/g,"-")),b("React").createElement("div",{"aria-hidden":"true",className:"_48g5"},c.replace(/\s/g,"-")),b("React").createElement("div",{className:"_48g6"},b("React").createElement("input",{"data-testid":"filter-token-text-input",title:c,placeholder:c,onKeyDown:this.$BUIFilterTokenTextInput4,onFocus:this.$BUIFilterTokenTextInput5,onBlur:this.$BUIFilterTokenTextInput6,onChange:this.$BUIFilterTokenTextInput7,className:e,type:"text",value:this.state.tempValue!==null?this.state.tempValue:a,ref:"input"}))),this.renderLayers())};a.prototype.$BUIFilterTokenTextInput3=function(a){if(a)switch(this.props.format){case"number":a=j.test(a)?a:"";break;case"duration":a=b("ClockFormatConverter").validate(a,!0)?a:"";break;case"percentage":var c=parseFloat(a);isNaN(c)&&(a="")}return a};a.propTypes={format:c.oneOf(["string","number","currency","duration","percentage"]),label:c.string,shouldFocus:c.bool,value:c.string.isRequired,onChange:c.func.isRequired,onEnter:c.func,onEscape:c.func};e.exports=a}),null);
__d("BUIFilterTokenTextSetSelector.react",["cx","fbt","invariant","AdsCFCheckbox.react","BUIComponent","ContextualLayer.react","LayerHideOnBlur","React","ScrollableArea.react","XUIButton.react","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;c=b("React").PropTypes;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_25sq","aria-selected":this.props.checked},b("React").createElement(b("AdsCFCheckbox.react"),{name:this.props.optionName,onChange:this.props.onOptionChange,checked:this.props.checked,value:this.props.value,label:this.props.text}))};function a(){j.apply(this,arguments)}a.propTypes={checked:c.bool.isRequired,text:c.string.isRequired,value:c.oneOfType([c.string,c.number,c.object])};d=babelHelpers.inherits(l,b("BUIComponent"));k=d&&d.prototype;function l(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.state={showMenu:!1},this.$BUIFilterTokenTextSetSelector1=function(){this.setState(function(a){return{showMenu:!a.showMenu}})}.bind(this),this.$BUIFilterTokenTextSetSelector2=function(a,c,d){var e=[];b("React").Children.forEach(this.props.children,function(b,d){d="option_"+d;d===c?a&&e.push(b.props.value):b.props.checked&&e.push(b.props.value)});this.props.onChange(e)}.bind(this),c}l.prototype.render=function(){var a=[];b("React").Children.forEach(this.props.children,function(b){b&&b.type===l.Option||i(0,6154),b.props.checked&&a.push(b.props.text)});var c=a.length?a.join(", "):h._("ch\u1ecdn t\u1eeb..."),d=b("joinClasses")("_3nk6",this.props.className);return b("React").createElement("span",{className:d},b("React").createElement(b("XUIButton.react"),{use:"default",className:"_3nk7",ref:"menuOpener",onClick:this.$BUIFilterTokenTextSetSelector1,label:c,suppressed:!0}),this.renderLayers())};l.prototype.renderLayers=function(){if(this.state.showMenu){var a=b("React").Children.map(this.props.children,function(a,c){return b("React").cloneElement(a,{optionName:"option_"+c,onOptionChange:this.$BUIFilterTokenTextSetSelector2})}.bind(this));return b("React").createElement(b("ContextualLayer.react"),{key:"menu",onToggle:this.$BUIFilterTokenTextSetSelector1,behaviors:{LayerHideOnBlur:b("LayerHideOnBlur")},contextRef:function(){return this.refs.menuOpener}.bind(this),position:"below",shown:this.state.showMenu},b("React").createElement(b("ScrollableArea.react"),{className:"_25sp",maxHeight:190,role:"menu"},a))}else return null};l.propTypes={onChange:c.func.isRequired};l.Option=a;e.exports=l}),null);
__d("BUIFilterTokenTypeaheadInput.react",["cx","fbt","invariant","AbstractSearchSource","BUIComponent","React","SearchableEntry","XUIText.react","XUITokenizer.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;var k=20;d=babelHelpers.inherits(a,b("BUIComponent"));j=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.$BUIFilterTokenTypeaheadInput2=function(a){if(this.$BUIFilterTokenTypeaheadInput6(a))return;var b=Array.from(this.props.entries);b.push(a);this.props.onChange(b)}.bind(this),this.$BUIFilterTokenTypeaheadInput3=function(a){var b;a=this.props.entries.indexOf(a);a>-1&&(b=Array.from(this.props.entries),b.splice(a,1));this.props.onChange(b)}.bind(this),b}a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement(b("XUITokenizer.react"),{limit:this.$BUIFilterTokenTypeaheadInput1(),entries:this.props.entries,focusedOnInit:this.props.focusedOnInit,onAddEntryAttempt:this.$BUIFilterTokenTypeaheadInput2,onRemoveEntryAttempt:this.$BUIFilterTokenTypeaheadInput3,placeholder:this.props.placeholder,presenter:this.props.presenter,searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,className:this.props.className,showEntriesOnFocus:this.props.showEntriesOnFocus}),this.$BUIFilterTokenTypeaheadInput4())};a.prototype.$BUIFilterTokenTypeaheadInput1=function(){this.props.maxTypeaheadTokens==null||this.props.maxTypeaheadTokens>0||i(0,6251);return this.props.maxTypeaheadTokens||k};a.prototype.$BUIFilterTokenTypeaheadInput5=function(){return this.props.entries.length===this.$BUIFilterTokenTypeaheadInput1()};a.prototype.$BUIFilterTokenTypeaheadInput6=function(a){var b=a.getUniqueID();a=this.props.entries;return a.some(function(a){return a.getUniqueID()===b})};a.prototype.$BUIFilterTokenTypeaheadInput4=function(){return!this.$BUIFilterTokenTypeaheadInput5()?null:b("React").createElement("div",{className:"_2pid"},b("React").createElement(b("XUIText.react"),{size:"meta1",display:"block"},h._("B\u1ea1n \u0111\u00e3 th\u00eam s\u1ed1 m\u00e3 t\u1ed1i \u0111a.")))};a.defaultProps={focusedOnInit:!0,placeholder:h._("Th\u00eam m\u00e3 nh\u01b0 baseball, daycare v.v..")};a.propTypes={entries:c.arrayOf(c.instanceOf(b("SearchableEntry"))).isRequired,focusedOnInit:c.bool,maxTypeaheadTokens:c.number,onChange:c.func.isRequired,placeholder:c.node.isRequired,presenter:c.object,searchSource:c.instanceOf(b("AbstractSearchSource")).isRequired,searchSourceOptions:c.object};e.exports=a}),null);
__d("BUIFilterTokenInput.react",["ix","csx","cx","fbt","glyph","invariant","AdsGenericFilter","AdsGenericFilterFieldConfigUtil","AdsGenericFilterFieldType","AdsGenericFilterOperator","BUIAdoptionCloseButton.react","BUIComponent","BUIDatePicker.react","BUIDateRangePicker.react","BUIDateRangeUtils","BUIDateTimePicker.react","BUIFilterTokenInputHelper","BUIFilterTokenSearchableInputUtils","BUIFilterTokenTextInput.react","BUIFilterTokenTextSetSelector.react","BUIFilterTokenTypeaheadInput.react","ClockFormatConverter","DateConsts","DateTime","DOM","Event","Image.react","LocalDate","LocalDateInterval","Parent","PositionEnum","React","ReactDOM","Rect","StaticSearchSource","SUIBusinessTheme","SUIBusinessThemeContainer.react","SUIGlyphIcon.react","SUIPopover.react","SUIRadioList.react","SUISearchableSelector.react","SUISelector.react","SUISelectorButton.react","SUISelectorOption.react","SUISelectorOptionGroup.react","SUISelectorSeparator.react","SUISimplePopover.react","SUIText.react","Timezone","XUIButton.react","XUISelector.react","XUISpinner.react","XUIMenuStaticItem.react","XUISelectorButton.react","asset","autoFlipStyleProps","compactArray","joinClasses","suiMargin"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m,n,o,p,q=b("DateConsts").MS_PER_SEC,r=b("SUIRadioList.react").Item,s=b("XUISelector.react").Option,t=b("BUIDateRangeUtils").isSameInterval;c=b("React").PropTypes;var u=b("BUIFilterTokenTextSetSelector.react").Option,v=function(a){a=parseInt(a,10);return!isNaN(a)?b("LocalDate").fromUTCDate(new Date(a)):null},w=function(a,c){a=parseInt(a,10);return isNaN(a)?null:new(b("DateTime"))(a,c)};d={applyOnly:!1,autoOpenFieldSelector:!1,confirmOnBlur:!1,dismissOnBlur:!0,hasInitialFocus:!0,hasSearchableSelector:!1};f=babelHelpers.inherits(a,b("BUIComponent"));m=f&&f.prototype;function a(a){__p&&__p();m.constructor.call(this);this.$BUIFilterTokenInput5=function(){this.props.useSUI_EXPERIMENTAL||this.refs.fieldSelector.showMenu()}.bind(this);this.$BUIFilterTokenInput18=function(){return this.refs.prefixLink}.bind(this);this.$BUIFilterTokenInput19=function(a,b){this.$BUIFilterTokenInput20({prefixes:this.state.prefixes.map(function(c,d){return a===d?b:c})})}.bind(this);this.$BUIFilterTokenInput21=function(){this.$BUIFilterTokenInput20({prefixHoverShown:!this.state.prefixHoverShown})}.bind(this);this.$BUIFilterTokenInput26=function(a){a.isDynamic&&l(0,164,a.field.toString());var c=!this.props.canAddStandalone,d=a.adsHelpLinkText?{tooltip:a.adsHelpLinkText}:{};return b("React").createElement(b("SUISelectorOption.react"),babelHelpers["extends"]({disabled:a.isStandalone&&c,icon:this.$BUIFilterTokenInput14(a.iconURI,a.largeIcon),key:"field_option_"+a.field.toString()},d,{value:a}),a.text)}.bind(this);this.$BUIFilterTokenInput37=function(){var a=this.state.fieldConfig,c=this.state.fieldValueRenderer,d;switch(this.state.operatorConfig.operator){case b("AdsGenericFilterOperator").EQUAL:case b("AdsGenericFilterOperator").NOT_EQUAL:d=a.values.map(function(a){return b("React").createElement(s,{value:a.value,key:a.value},a.text||c(a.value))});return b("React").createElement(x,{className:"_5b5s",key:"value_set_selector_"+a.field.name,onChange:this.$BUIFilterTokenInput50,defaultValue:this.state.value},d);default:d=a.values.map(function(a){var d=this.state.value.indexOf(a.value)>-1;return b("React").createElement(u,{value:a.value,key:a.value,text:a.text||c(a.value),checked:d})}.bind(this));return b("React").createElement(b("BUIFilterTokenTextSetSelector.react"),{className:"_5b5s _bm6",onChange:this.$BUIFilterTokenInput51},d)}}.bind(this);this.$BUIFilterTokenInput52=function(a){a=a&&a.length?a:"";this.$BUIFilterTokenInput20({value:a})}.bind(this);this.$BUIFilterTokenInput53=function(){var a=this.state.operatorConfig.operator;switch(a){case b("AdsGenericFilterOperator").GREATER_THAN:case b("AdsGenericFilterOperator").LESS_THAN:a=this.state.value;if(!a||!Number(a))return!1;break}return this.$BUIFilterTokenInput54()}.bind(this);this.$BUIFilterTokenInput54=function(){__p&&__p();if(this.state.fieldConfig.isFieldOnly)return!0;var a=this.state.value;if(a){var c=this.state.operatorConfig.operator;switch(c){case b("AdsGenericFilterOperator").IN_RANGE:case b("AdsGenericFilterOperator").NOT_IN_RANGE:if(!a[0]||!a[1]||Number(a[1])<=Number(a[0]))return!1;break;case b("AdsGenericFilterOperator").IN:case b("AdsGenericFilterOperator").NOT_IN:case b("AdsGenericFilterOperator").ANY:case b("AdsGenericFilterOperator").NONE:case b("AdsGenericFilterOperator").ALL:if(!Array.isArray(a)||!a.length)return!1;break}c=this.state.fieldConfig.field.type;switch(c){case b("AdsGenericFilterFieldType").DURATION:if(!b("ClockFormatConverter").validate(a))return!1;break}return!0}else return!1}.bind(this);this.$BUIFilterTokenInput11=function(){if(this.$BUIFilterTokenInput54()){var a=this.props.defaultFilter?j._("\u00c1p d\u1ee5ng"):j._("Th\u00eam");return b("React").createElement(b("XUIButton.react"),{className:"_5b5u _5b5v",label:a,use:"default",onClick:this.$BUIFilterTokenInput55})}return null}.bind(this);this.$BUIFilterTokenInput41=function(a){this.$BUIFilterTokenInput54()&&this.$BUIFilterTokenInput55(a)}.bind(this);this.$BUIFilterTokenInput55=function(a){a.preventDefault();a=this.state.fieldConfig.converter;a?this.setState({value:a.toIds(this.state.value)},function(){this.props.onSubmit(this.state.fieldConfig.field,this.state.operatorConfig.operator,this.state.value,this.state.prefixes)}):this.props.onSubmit(this.state.fieldConfig.field,this.state.operatorConfig.operator,this.state.value,this.state.prefixes)}.bind(this);this.$BUIFilterTokenInput56=function(a){a.preventDefault(),this.props.onCancel&&this.props.onCancel()}.bind(this);this.$BUIFilterTokenInput20=function(a){a=babelHelpers["extends"]({},this.state,a);this.setState(this.$BUIFilterTokenInput1(this.props,a))}.bind(this);this.$BUIFilterTokenInput57=function(a){var b=this.state.fieldValueParser;return b(a)}.bind(this);this.$BUIFilterTokenInput34=function(a){this.$BUIFilterTokenInput20({fieldConfig:a.value,shouldFocusInput:!0})}.bind(this);this.$BUIFilterTokenInput35=function(a){this.$BUIFilterTokenInput20({operatorConfig:a.value,shouldFocusInput:!0})}.bind(this);this.$BUIFilterTokenInput33=function(a){this.$BUIFilterTokenInput20({fieldConfig:a,shouldFocusInput:!0})}.bind(this);this.$BUIFilterTokenInput31=function(a){this.$BUIFilterTokenInput20({fieldConfig:a.getAuxiliaryData(),shouldFocusInput:!0})}.bind(this);this.$BUIFilterTokenInput24=function(a){this.$BUIFilterTokenInput20({operatorConfig:a,shouldFocusInput:!0})}.bind(this);this.$BUIFilterTokenInput42=function(a){this.$BUIFilterTokenInput20({value:this.$BUIFilterTokenInput57(a)})}.bind(this);this.$BUIFilterTokenInput46=function(a){a=a.toInstant(this.props.timezoneID)*q;this.$BUIFilterTokenInput20({value:this.$BUIFilterTokenInput57(a)})}.bind(this);this.$BUIFilterTokenInput45=function(a){a=a.interval;var b=a.start.toInstant(this.props.timezoneID)*q;a=a.end.toInstant(this.props.timezoneID)*q;b=[this.$BUIFilterTokenInput57(b),this.$BUIFilterTokenInput57(a)];this.$BUIFilterTokenInput20({value:b})}.bind(this);this.$BUIFilterTokenInput49=function(a){a=a.getUnixTimestampSeconds();this.$BUIFilterTokenInput20({value:this.$BUIFilterTokenInput57(a)})}.bind(this);this.$BUIFilterTokenInput47=function(a){a=a.getUnixTimestampSeconds();this.$BUIFilterTokenInput20({value:[this.$BUIFilterTokenInput57(a),this.state.value[1]]})}.bind(this);this.$BUIFilterTokenInput48=function(a){a=a.getUnixTimestampSeconds();this.$BUIFilterTokenInput20({value:[this.state.value[0],this.$BUIFilterTokenInput57(a)]})}.bind(this);this.$BUIFilterTokenInput43=function(a){this.$BUIFilterTokenInput20({value:[this.$BUIFilterTokenInput57(a),this.state.value[1]],shouldFocusInput:!1})}.bind(this);this.$BUIFilterTokenInput44=function(a){this.$BUIFilterTokenInput20({value:[this.state.value[0],this.$BUIFilterTokenInput57(a)]})}.bind(this);this.$BUIFilterTokenInput50=function(a){this.$BUIFilterTokenInput20({value:this.$BUIFilterTokenInput57(a.value)})}.bind(this);this.$BUIFilterTokenInput51=function(a){this.$BUIFilterTokenInput20({value:a.map(this.$BUIFilterTokenInput57,this)})}.bind(this);this.$BUIFilterTokenInput58=function(a){__p&&__p();if(!this.props.dismissOnBlur&&!this.props.confirmOnBlur)return;var c=a.target,d=b("ReactDOM").findDOMNode(this),e=this.refs.prefixSelector&&b("ReactDOM").findDOMNode(this.refs.prefixSelector);if(b("DOM").contains(d,c)||e&&b("DOM").contains(e,c)||b("Parent").bySelector(c,"._1t-2")||b("Parent").bySelector(c,"._5xr5")||b("Parent").bySelector(c,"._5b5q")||b("Parent").bySelector(c,"._5mwk")||b("Parent").bySelector(c,"._5c02")||b("Parent").bySelector(c,"._58zx"))return;e=c;while(e&&e.nodeType===1){e=e;if(e.getAttribute("role")==="menu")return;e=e.parentNode}e=b("Rect").getElementBounds(d);d=20;e=new(b("Rect"))(e.t-d,e.r+d,e.b+d,e.l-d);d=b("Rect").getElementBounds(c);if(e.contains(d))return;this.setState({shouldFocusInput:!1});this.props.confirmOnBlur&&this.$BUIFilterTokenInput53()?this.$BUIFilterTokenInput55(a):this.props.dismissOnBlur&&this.props.onCancel&&this.props.onCancel()}.bind(this);this.$BUIFilterTokenInput4=function(){this.$BUIFilterTokenInput59||(this.$BUIFilterTokenInput59=b("Event").listen(document,"click",this.$BUIFilterTokenInput58))}.bind(this);this.$BUIFilterTokenInput6=function(){this.$BUIFilterTokenInput59&&(this.$BUIFilterTokenInput59.remove(),this.$BUIFilterTokenInput59=null)}.bind(this);var c=a.applyOnly,d=a.hasInitialFocus;this.state=this.$BUIFilterTokenInput1(a,{shouldFocusInput:d!==void 0?d:!c})}a.prototype.componentDidMount=function(){this.$BUIFilterTokenInput2=setTimeout(this.$BUIFilterTokenInput4,16),this.props.autoOpenFieldSelector&&!this.props.applyOnly&&(this.$BUIFilterTokenInput3=setTimeout(this.$BUIFilterTokenInput5,200))};a.prototype.componentWillUnmount=function(){clearTimeout(this.$BUIFilterTokenInput2),clearTimeout(this.$BUIFilterTokenInput3),this.$BUIFilterTokenInput6()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){String(a.defaultFilter)!==String(this.props.defaultFilter)?this.setState(this.$BUIFilterTokenInput1(a,{})):this.setState(this.$BUIFilterTokenInput1(a,this.state))};a.prototype.render=function(){if(!this.state.fieldConfig)return b("React").createElement("i",{className:"hidden_elem"});var a=b("joinClasses")("_5b5o",this.props.className);if(this.props.applyOnly)return this.$BUIFilterTokenInput7(a);else if(this.state.fieldConfig.isFieldOnly)return this.$BUIFilterTokenInput8(a);else return this.$BUIFilterTokenInput9(a)};a.prototype.$BUIFilterTokenInput8=function(a){return b("React").createElement("div",{className:a},this.$BUIFilterTokenInput10(),this.$BUIFilterTokenInput11(),this.$BUIFilterTokenInput12())};a.prototype.$BUIFilterTokenInput7=function(a){a=b("joinClasses")(a,"_4cld");return b("React").createElement("div",{className:a},this.$BUIFilterTokenInput13(),this.$BUIFilterTokenInput11())};a.prototype.$BUIFilterTokenInput13=function(){!this.props.defaultFilter&&l(0,165);var a=b("AdsGenericFilterFieldConfigUtil").getConfigByField(this.props.fieldsConfig,this.props.defaultFilter.field),c=a.helpText,d=a.iconURI,e=a.largeIcon;a=a.text;var f=this.props.defaultFilter.value;c=c?b("React").createElement(b("SUISimplePopover.react"),{content:c,contentWidthUseSparingly:168,position:"below",theme:b("SUIBusinessTheme")}):null;return b("React").createElement("div",{className:"_5b5t _2d2k"},this.$BUIFilterTokenInput14(d,e),b("React").createElement("div",{className:"_5b5r"},j._("{field}: ({value})",[j._param("field",a),j._param("value",f.length)]),c))};a.prototype.$BUIFilterTokenInput9=function(a){return this.props.expandTokenInput?b("React").createElement("div",{className:a},b("React").createElement("div",null,this.$BUIFilterTokenInput10(),this.$BUIFilterTokenInput15(),this.$BUIFilterTokenInput16(),this.props.enableFilterPrefixes&&this.$BUIFilterTokenInput17(),this.$BUIFilterTokenInput11()),b("React").createElement("div",{style:{marginTop:2}},this.$BUIFilterTokenInput12())):b("React").createElement("div",{className:a},this.$BUIFilterTokenInput10(),this.$BUIFilterTokenInput15(),this.$BUIFilterTokenInput16(),this.props.enableFilterPrefixes&&this.$BUIFilterTokenInput17(),this.$BUIFilterTokenInput11(),this.$BUIFilterTokenInput12())};a.prototype.$BUIFilterTokenInput17=function(){return!this.state.fieldConfig.supportedPrefixes||this.state.fieldConfig.supportedPrefixes.length===0?b("React").createElement("span",null):b("React").createElement("div",null,b("React").createElement("span",{ref:"prefixLink",className:b("joinClasses")("_3-8r","_2pir"),onMouseEnter:this.$BUIFilterTokenInput21,onMouseLeave:this.$BUIFilterTokenInput21},b("React").createElement(b("SUIGlyphIcon.react"),{srcDefault:g("540232"),srcHover:g("540233"),hover:this.state.prefixHoverShown,style:{cursor:"pointer",verticalAlign:"middle"}})),b("React").createElement(y,{prefixes:this.state.prefixes,supportedPrefixes:this.state.fieldConfig.supportedPrefixes,onChange:this.$BUIFilterTokenInput19,contextRef:this.$BUIFilterTokenInput18,ref:"prefixSelector"}))};a.prototype.$BUIFilterTokenInput14=function(a,c){return!a?null:b("React").createElement(b("Image.react"),{className:"_5b5p"+(c?" _4gem":""),src:a})};a.prototype.$BUIFilterTokenInput22=function(a){this.props.useSUI_EXPERIMENTAL||l(0,166);return b("React").createElement(b("SUISelectorButton.react"),{height:"short",label:b("React").createElement("div",{"data-hover":"tooltip","data-tooltip-display":"overflow"},a),style:b("autoFlipStyleProps")({marginRight:"4px"}),textAlign:"center",uniformOverride:{chevron:b("React").createElement("span",null),padding:"4px",margins:{label:{right:"0"}}}})};a.prototype.$BUIFilterTokenInput23=function(){this.props.useSUI_EXPERIMENTAL||l(0,166);var a=this.state.operatorConfigOptions.map(function(a){return b("React").createElement(b("SUISelectorOption.react"),{value:a,key:"operator_"+a.operator},a.text)});return b("React").createElement(b("SUIBusinessThemeContainer.react"),null,b("React").createElement(b("SUISelector.react"),{button:this.$BUIFilterTokenInput22(this.state.operatorConfig.text),key:"operator_"+this.state.fieldConfig.field.name,maxHeight:400,value:this.state.operatorConfig,onChange:this.$BUIFilterTokenInput24},a))};a.prototype.$BUIFilterTokenInput25=function(a,b){b=b.get(a);return!b?null:this.$BUIFilterTokenInput26(b)};a.prototype.$BUIFilterTokenInput27=function(a,c){switch(a.type){case"separator":return b("React").createElement(b("SUISelectorSeparator.react"),null);case"item":return this.$BUIFilterTokenInput25(a.item,c);case"group":var d=b("compactArray")(a.children.map(function(a){return this.$BUIFilterTokenInput25(a,c)}.bind(this)));return this.$BUIFilterTokenInput28(a.group,a.label,d)}return l(!1,"Unsupported item type: %s",a.type)};a.prototype.$BUIFilterTokenInput29=function(a,c){if(!c)return a.map(this.$BUIFilterTokenInput26);var d=new Map();a.forEach(function(a){var b=a.field.toString();d.has(b)&&l(0,167,b);d.set(b,a)});return b("compactArray")(c.map(function(a){return this.$BUIFilterTokenInput27(a,d)}.bind(this)))};a.prototype.$BUIFilterTokenInput28=function(a,c,d){return b("React").createElement(b("SUISelectorOptionGroup.react"),{key:a,label:c},d)};a.prototype.$BUIFilterTokenInput30=function(){var a=b("BUIFilterTokenSearchableInputUtils").getSUIFieldSearchSource(this.state.fieldConfigOptions,this.props.fieldGroupingConfig),c=b("BUIFilterTokenSearchableInputUtils").getSearchableEntry(this.state.fieldConfig);return b("React").createElement(b("SUISearchableSelector.react"),{areCategoriesCollapsible:!0,button:this.$BUIFilterTokenInput22(this.state.fieldConfig.text),dropdownWidth:240,getTooltipForEntry:function(a){return a.getAuxiliaryData().adsHelpLinkText},hasCategories:!0,height:"short",initiallyExpandedCategories:[a[1].getType()],isDisabled:this.props.disableFieldSelector,maxHeight:400,shouldOpenAutomatically:this.props.autoOpenFieldSelector,theme:b("SUIBusinessTheme"),value:c,searchSource:new(b("StaticSearchSource"))(a),onChange:this.$BUIFilterTokenInput31})};a.prototype.$BUIFilterTokenInput32=function(){this.props.useSUI_EXPERIMENTAL||l(0,166);var a=this.$BUIFilterTokenInput29(this.state.fieldConfigOptions,this.props.fieldGroupingConfig);return b("React").createElement(b("SUIBusinessThemeContainer.react"),null,b("React").createElement(b("SUISelector.react"),{button:this.$BUIFilterTokenInput22(this.state.fieldConfig.text),disabled:this.props.disableFieldSelector,dropdownWidth:240,key:"field_"+this.state.fieldConfig.field.toString(),maxHeight:400,shouldOpenAutomatically:this.props.autoOpenFieldSelector,value:this.state.fieldConfig,onChange:this.$BUIFilterTokenInput33},a))};a.prototype.$BUIFilterTokenInput10=function(){__p&&__p();if(this.props.useSUI_EXPERIMENTAL&&this.props.hasSearchableSelector)return this.$BUIFilterTokenInput30();if(this.props.useSUI_EXPERIMENTAL)return this.$BUIFilterTokenInput32();var a=this.state.fieldConfigOptions.map(function(a){var c=s,d,e;a.iconURI&&(d=this.$BUIFilterTokenInput14(a.iconURI,a.largeIcon));a.isDynamic&&(a.values===void 0&&(c=b("XUIMenuStaticItem.react"),d=b("React").createElement(b("XUISpinner.react"),null)),a.values===null&&(c=b("XUIMenuStaticItem.react"),d=b("React").createElement(b("Image.react"),{className:"_5b5p",src:g("101449")})));a.adsHelpLinkText&&(e=b("React").createElement(b("SUISimplePopover.react"),{content:a.adsHelpLinkText,theme:b("SUIBusinessTheme")}));return b("React").createElement(c,{disabled:a.isStandalone&&!this.props.canAddStandalone,value:a,key:"field_option_"+a.field.toString()},b("React").createElement("div",{className:"_5b5q"},d,b("React").createElement("div",{className:"ellipsis _5b5r","data-hover":"tooltip","data-tooltip-display":"overflow"},a.text,e)))}.bind(this));return b("React").createElement(x,{className:"_5b5s",defaultValue:this.state.fieldConfig,key:"field_"+this.state.fieldConfig.field.toString(),ref:"fieldSelector",disabled:this.props.disableFieldSelector,onChange:this.$BUIFilterTokenInput34},a)};a.prototype.$BUIFilterTokenInput15=function(){if(this.props.useSUI_EXPERIMENTAL)return this.$BUIFilterTokenInput23();var a=this.state.operatorConfigOptions.map(function(a){return b("React").createElement(s,{value:a,key:"operator_"+a.operator},b("React").createElement("div",{className:"_5b5q"},a.text))});return b("React").createElement(x,{key:"operator_"+this.state.fieldConfig.field.name,className:"_5b5s",onChange:this.$BUIFilterTokenInput35,defaultValue:this.state.operatorConfig},a)};a.prototype.$BUIFilterTokenInput16=function(){__p&&__p();var a=this.state.fieldValueRenderer;switch(this.state.fieldConfig.field.type){case b("AdsGenericFilterFieldType").CURRENCY:return this.$BUIFilterTokenInput36("currency");case b("AdsGenericFilterFieldType").NUMBER:return this.$BUIFilterTokenInput36("number");case b("AdsGenericFilterFieldType").DURATION:return this.$BUIFilterTokenInput36("duration");case b("AdsGenericFilterFieldType").PERCENTAGE:return this.$BUIFilterTokenInput36("percentage");case b("AdsGenericFilterFieldType").STRING_SET:case b("AdsGenericFilterFieldType").NUMBER_SET:return this.$BUIFilterTokenInput37();case b("AdsGenericFilterFieldType").DATE_RANGE:return this.$BUIFilterTokenInput38();case b("AdsGenericFilterFieldType").DATETIME_RANGE:return this.$BUIFilterTokenInput39();case b("AdsGenericFilterFieldType").TOKENIZED_TYPEAHEAD:return this.$BUIFilterTokenInput40();default:return b("React").createElement(b("BUIFilterTokenTextInput.react"),{onEnter:this.$BUIFilterTokenInput41,onEscape:this.props.onCancel,value:a(this.state.value),onChange:this.$BUIFilterTokenInput42,format:"string",shouldFocus:this.state.shouldFocusInput})}};a.prototype.$BUIFilterTokenInput36=function(a){if(Array.isArray(this.state.fieldConfig.values))return this.$BUIFilterTokenInput37();var c=this.state.value,d=this.state.fieldValueRenderer;switch(this.state.valueOperator){case b("AdsGenericFilterOperator").IN_RANGE:case b("AdsGenericFilterOperator").NOT_IN_RANGE:return b("React").createElement("div",{className:"_5b5t"},b("React").createElement(b("BUIFilterTokenTextInput.react"),{onEnter:this.$BUIFilterTokenInput41,onEscape:this.props.onCancel,value:d(c[0]),onChange:this.$BUIFilterTokenInput43,format:a,shouldFocus:this.state.shouldFocusInput}),b("React").createElement("span",{className:"_60-g"},"\u2013"),b("React").createElement(b("BUIFilterTokenTextInput.react"),{onEnter:this.$BUIFilterTokenInput41,onEscape:this.props.onCancel,value:d(c[1]),onChange:this.$BUIFilterTokenInput44,format:a}));default:return b("React").createElement(b("BUIFilterTokenTextInput.react"),{onEnter:this.$BUIFilterTokenInput41,onEscape:this.props.onCancel,value:d(c),onChange:this.$BUIFilterTokenInput42,format:a,shouldFocus:this.state.shouldFocusInput})}};a.prototype.$BUIFilterTokenInput38=function(){this.props.timezoneID==null;if(this.state.operatorConfig.operator===b("AdsGenericFilterOperator").IN_RANGE||this.state.operatorConfig.operator===b("AdsGenericFilterOperator").NOT_IN_RANGE){var a=null,c=v(this.state.value[0]),d=v(this.state.value[1]);c&&d&&(a=new(b("LocalDateInterval"))(c,d));return b("React").createElement(z,{onChange:this.$BUIFilterTokenInput45,timezoneID:this.props.timezoneID||b("Timezone").UTC,value:{interval:a}})}return b("React").createElement(b("BUIDatePicker.react"),{value:v(this.state.value),onChange:this.$BUIFilterTokenInput46})};a.prototype.$BUIFilterTokenInput39=function(){switch(this.state.operatorConfig.operator){case b("AdsGenericFilterOperator").IN_RANGE:case b("AdsGenericFilterOperator").NOT_IN_RANGE:var a=w(this.state.value[0],this.props.timezoneID),c=w(this.state.value[1],this.props.timezoneID);return b("React").createElement("div",{className:"_1ogp"},b("React").createElement(b("BUIDateTimePicker.react"),{timezoneID:this.props.timezoneID||b("Timezone").UTC,value:a,onChange:this.$BUIFilterTokenInput47}),b("React").createElement("span",{className:"_60-g"},"\u2013"),b("React").createElement(b("BUIDateTimePicker.react"),{timezoneID:this.props.timezoneID||b("Timezone").UTC,value:c,onChange:this.$BUIFilterTokenInput48}));case b("AdsGenericFilterOperator").AFTER:case b("AdsGenericFilterOperator").BEFORE:case b("AdsGenericFilterOperator").GREATER_THAN:case b("AdsGenericFilterOperator").LESS_THAN:a=w(this.state.value,this.props.timezoneID);return b("React").createElement(b("BUIDateTimePicker.react"),{timezoneID:this.props.timezoneID||b("Timezone").UTC,value:a,onChange:this.$BUIFilterTokenInput49});default:return l(!1,"Unsupported operator %s for date time range filter",this.state.operatorConfig.operator)}};a.prototype.$BUIFilterTokenInput40=function(){var a=this.state.value,c=this.state.fieldConfig.converter;c&&(a=c.toEntries(a,this.state.fieldConfig.values));return b("React").createElement(b("BUIFilterTokenTypeaheadInput.react"),{className:this.state.fieldConfig.className,entries:a||[],onChange:this.$BUIFilterTokenInput52,placeholder:this.state.fieldConfig.placeholder,presenter:this.state.fieldConfig.presenter,searchSource:this.state.fieldConfig.searchSource,searchSourceOptions:this.state.fieldConfig.searchSourceOptions,showEntriesOnFocus:!!this.state.fieldConfig.showEntriesOnFocus})};a.prototype.$BUIFilterTokenInput12=function(){return b("React").createElement(b("BUIAdoptionCloseButton.react"),{className_DEPRECATED:"_3-8h",onClick:this.$BUIFilterTokenInput56})};a.prototype.$BUIFilterTokenInput1=function(a,c){b("BUIFilterTokenInputHelper").calibrateFieldState(a,c);b("BUIFilterTokenInputHelper").calibrateOperatorState(a,c);b("BUIFilterTokenInputHelper").calibrateValueState(a,c);b("BUIFilterTokenInputHelper").calibratePrefixState(a,c);return c};a.propTypes={autoOpenFieldSelector:c.bool,defaultFilter:c.instanceOf(b("AdsGenericFilter")),filterBlacklist:c.array,onSubmit:c.func.isRequired,onCancel:c.func,validFieldConfigs:c.array.isRequired,fieldsConfig:c.object.isRequired,timezoneID:c.number,applyOnly:c.bool.isRequired,confirmOnBlur:c.bool.isRequired,dismissOnBlur:c.bool.isRequired,hideMenuOnSingleItem:c.bool,disableFieldSelector:c.bool,canAddStandalone:c.bool,useSUI_EXPERIMENTAL:c.bool,fieldGroupingConfig:c.array,expandTokenInput:c.bool,hasSearchableSelector:c.bool,enableFilterPrefixes:c.bool};a.defaultProps=d;n=babelHelpers.inherits(x,b("React").Component);n&&n.prototype;x.prototype.render=function(){var a=this.props.children.length==1&&this.props.hideMenuOnSingleItem;return b("React").createElement(b("XUISelector.react"),{className:this.props.className,onChange:this.props.onChange,defaultValue:this.props.defaultValue,disabled:a||this.props.disabled,ref:"selector"},b("React").createElement(b("XUISelectorButton.react"),{maxwidth:500,className:"_bm6",haschevron:!1,suppressed:!0}),this.props.children)};x.prototype.showMenu=function(){this.refs.selector.showMenu()};function x(){n.apply(this,arguments)}o=babelHelpers.inherits(y,b("React").Component);o&&o.prototype;y.prototype.render=function(){var a=this.props.supportedPrefixes.map(function(a,c){var d=a.prefixes,e=function(a){this.props.onChange(c,a)}.bind(this);return b("React").createElement("div",{className:"_68kn",key:a.key},b("React").createElement(b("SUIText.react"),{display:"block",margin:"_3-8w",size:"meta1",theme:b("SUIBusinessTheme")},a.text),b("React").createElement(b("SUIRadioList.react"),{value:this.props.prefixes[c]||"",onChange:e},b("React").createElement(r,{value:""},j._("M\u1eb7c \u0111\u1ecbnh")),d.map(function(a,c){return b("React").createElement(r,{value:a.prefix,key:a.prefix},a.text)})))}.bind(this));a=b("React").createElement("div",{className:"._68ko"},j._("Thay \u0111\u1ed5i c\u00e1c t\u00f9y ch\u1ecdn b\u1ed5 sung theo t\u1eebng \u0111i\u1ec1u ki\u1ec7n. Vi\u1ec7c \u0111\u1eb7t kho\u1ea3ng th\u1eddi gian s\u1ebd ch\u1ec9 \u00e1p d\u1ee5ng cho \u0111i\u1ec1u ki\u1ec7n \u0111\u00e3 ch\u1ecdn"),b("React").createElement("br",null),a);return b("React").createElement(b("SUIPopover.react"),{content:a,delay:300,hoverContextRef:this.props.contextRef,linger:200,position:b("PositionEnum").above,theme:b("SUIBusinessTheme"),title:j._("T\u00f9y ch\u1ecdn b\u1ed9 l\u1ecdc b\u1ed5 sung")})};function y(){o.apply(this,arguments)}y.propTypes={prefixes:c.array,supportedPrefixes:c.array,onChange:c.func,contextRef:c.func};h=babelHelpers.inherits(z,b("React").Component);p=h&&h.prototype;function z(a){p.constructor.call(this,a),this.$2=function(a){this.setState({value:a}),this.props.onChange(a)}.bind(this),this.state={value:z.$1(a)}}z.prototype.UNSAFE_componentWillReceiveProps=function(a){this.setState(function(b){var c=z.$1(a);return t(b.value.interval,c.interval)?void 0:{value:c}})};z.$1=function(a){a=b("BUIDateRangeUtils").calculateSelectedOption({dateRestraints:a.dateRestraints,defaultIncludeToday:!1,options:b("BUIDateRangePicker.react").defaultProps.options,timezoneID:a.timezoneID,value:a.value&&a.value.interval});return b("BUIDateRangeUtils").rangeSelectionToValue(a)};z.prototype.render=function(){return b("React").createElement(b("BUIDateRangePicker.react"),{onChange:this.$2,timezoneID:this.props.timezoneID,value:this.state.value,verbose:"all"})};z.propTypes={value:c.shape({interval:c.instanceOf(b("LocalDateInterval"))})};e.exports=a}),null);
__d("BUIFilterToken.react",["ix","cx","fbt","invariant","AdsGenericFilter","AdsGenericFilterFieldConfigUtil","AdsGenericFilterOperatorConfigUtil","AdsGenericFilterValueTextUtil","AdsPopoverLink_DEPRECATED.react","BUIAdoptionCloseButton.react","BUIComponent","BUIFilterTokenInput.react","Image.react","React","ReactDOM","fbglyph"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k;c=b("React").PropTypes;var l=4;d=babelHelpers.inherits(a,b("BUIComponent"));k=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.$BUIFilterToken11=function(){this.props.onEditCancelAttempt&&this.props.onEditCancelAttempt(this.props.filter,this.props.index)}.bind(this),this.$BUIFilterToken17=function(a){a.preventDefault(),!this.$BUIFilterToken1()&&!this.$BUIFilterToken2()&&this.props.onEditAttempt&&this.props.onEditAttempt(this.props.filter,this.props.index)}.bind(this),this.$BUIFilterToken20=function(a){a.preventDefault(),this.props.onRemove(this.props.filter,this.props.index)}.bind(this),this.$BUIFilterToken10=function(a,b,c,d){if(this.props.filterConstructor==null)return;a=new this.props.filterConstructor(a,b,c,{},d);this.props.onChange(a,this.props.index)}.bind(this),b}a.prototype.render=function(){var a=this.props.contentEditable,c="_3yz1"+(a?" _3yz2":"")+(!this.$BUIFilterToken1()&&!this.$BUIFilterToken2()?" _4tod":"")+(this.$BUIFilterToken1()?" _3dad":"")+(this.$BUIFilterToken3()?" _2sy-":"")+(this.$BUIFilterToken4()?" _5k1u":""),d=this.$BUIFilterToken5();return b("React").createElement("div",{className:c},b("React").createElement("div",{className:"_3yz4",ref:"filterToken","aria-hidden":!a},this.$BUIFilterToken6(),this.$BUIFilterToken7(),this.$BUIFilterToken8(),this.$BUIFilterToken9()),d)};a.prototype.$BUIFilterToken5=function(){return this.props.contentEditable?b("React").createElement(b("BUIFilterTokenInput.react"),{ref:"filterTokenInput",applyOnly:this.$BUIFilterToken1(),className:"_3yz3",defaultFilter:this.props.filter,confirmOnBlur:this.props.confirmOnBlur,dismissOnBlur:this.props.dismissOnBlur,expandTokenInput:this.props.expandTokenInput,onSubmit:this.$BUIFilterToken10,onCancel:this.$BUIFilterToken11,validFieldConfigs:this.props.validFieldConfigs,fieldsConfig:this.props.fieldsConfig,timezoneID:this.props.timezoneID,hideMenuOnSingleItem:this.props.hideMenuOnSingleItem,disableFieldSelector:this.props.disableFieldSelector,canAddStandalone:this.props.canAddStandalone,useSUI_EXPERIMENTAL:this.props.useSUI_EXPERIMENTAL,fieldGroupingConfig:this.props.fieldGroupingConfig,hasSearchableSelector:this.props.hasSearchableSelector,enableFilterPrefixes:this.props.enableFilterPrefixes}):null};a.prototype.$BUIFilterToken7=function(){if(!this.$BUIFilterToken12())return null;var a=this.$BUIFilterToken13();return b("React").createElement(b("Image.react"),{"aria-label":a.deprecationMessage,className:"_3-99","data-hover":"tooltip","data-tooltip-content":a.deprecationMessage,src:g("140185")})};a.prototype.componentDidMount=function(){this.$BUIFilterToken14()};a.prototype.componentDidUpdate=function(){this.$BUIFilterToken14()};a.prototype.$BUIFilterToken6=function(){var a=this.$BUIFilterToken15(),c=a.fieldIcon,d=a.fieldText,e=a.operatorText;a=a.valueText;e=this.$BUIFilterToken16(e,a);return b("React").createElement("div",{className:"_3yz5",onClick:this.$BUIFilterToken17,role:"presentation"},this.$BUIFilterToken18(c),b("React").createElement("div",{className:"_3yz7"},d),b("React").createElement("div",{className:"ellipsis _3yz8","data-hover":"tooltip","data-tooltip-display":"overflow"},e))};a.prototype.$BUIFilterToken18=function(a){var c=a.uri;a=a.isLarge;return!c?null:b("React").createElement(b("Image.react"),{className:"_3yz6"+(a?" _5whs":""),src:c})};a.prototype.$BUIFilterToken8=function(){var a=this.$BUIFilterToken3();return!this.$BUIFilterToken19()?b("React").createElement(b("BUIAdoptionCloseButton.react"),{className_DEPRECATED:"_3-99 _1t-2 _3yz9",shade:a?"light":"dark",onClick:this.$BUIFilterToken20}):null};a.prototype.$BUIFilterToken9=function(){__p&&__p();if(this.props.theme!=="regular")return null;var a=this.props.filter.extraRenderingProps;a=a.tooltip;if(a){var c=a.render();if(!c)return null;var d=this.$BUIFilterToken21(a.type);return b("React").createElement("span",{className:"_5pjl"+(a.type==="notify"?" _5pjm":"")+(a.type==="recommend"?" _5pjo":"")+(a.type==="warn"?" _5pjp":"")},b("React").createElement(b("AdsPopoverLink_DEPRECATED.react"),{imgHover:d,imgNormal:d,linkContainerClassName:"_5pkj",onClick_DEPRECATED:this.$BUIFilterToken17,popover:c,width:400}))}return null};a.prototype.$BUIFilterToken21=function(a){switch(a){case"notify":return g("115127");case"warn":return g("114553");case"recommend":return g("114553")}return j(!1,"no icon for tooltipType %s",a)};a.prototype.$BUIFilterToken2=function(){return this.props.disabled||this.$BUIFilterToken19()||this.$BUIFilterToken12()};a.prototype.$BUIFilterToken15=function(){var a=this.$BUIFilterToken13();return{fieldIcon:{uri:a.iconURI,isLarge:!!a.largeIcon},fieldText:this.$BUIFilterToken22(a),operatorText:a.isStatic?"":this.$BUIFilterToken23(),valueText:b("AdsGenericFilterValueTextUtil").getValueText(this.props.filter,a,this.props.valuesConfig)}};a.prototype.$BUIFilterToken13=function(){return b("AdsGenericFilterFieldConfigUtil").getConfigByField(this.props.fieldsConfig,this.props.filter.field)};a.prototype.$BUIFilterToken1=function(){var a=this.$BUIFilterToken13();return!!a.applyOnly};a.prototype.$BUIFilterToken24=function(){var a=this.$BUIFilterToken13();return!!a.isFieldOnly};a.prototype.$BUIFilterToken19=function(){var a=this.$BUIFilterToken13();return this.props.isReadOnly||!!a.isReadOnly};a.prototype.$BUIFilterToken25=function(){var a=this.$BUIFilterToken13();return!!a.getTokenTextByValue};a.prototype.$BUIFilterToken3=function(){return this.props.theme==="dark"};a.prototype.$BUIFilterToken4=function(){return this.props.theme==="plain"};a.prototype.$BUIFilterToken22=function(a){__p&&__p();var c=a.text,d=a.isFieldOnly?"":":",e=a.supportedPrefixes||[];e=e.map(function(a,c){a=a.prefixes;if(c>=this.props.filter.prefixes.length)return"";var d=this.props.filter.prefixes[c];c=a.find(function(a){return d&&a.prefix===d});return!c?"":b("React").createElement("span",{key:c.text},c.text," ")}.bind(this));if(this.props.enableFilterPrefixes&&e.find(function(a){return a!==""}))return i._("{field prefixes}{field}{field colon}",[i._param("field prefixes",e),i._param("field",c),i._param("field colon",d)]);else if(this.$BUIFilterToken25())return a.getTokenTextByValue(this.props.filter.value);else return i._("{field}{field colon}",[i._param("field",c),i._param("field colon",d)])};a.prototype.$BUIFilterToken23=function(){var a=this.props.filter.operator;a=b("AdsGenericFilterOperatorConfigUtil").getConfigByOperator(a);return a.shortText||""};a.prototype.$BUIFilterToken16=function(a,c){if(this.$BUIFilterToken1())return i._("({value})",[i._param("value",c)]);else if(this.$BUIFilterToken24()||this.$BUIFilterToken25())return"";else{a=a?b("React").createElement("span",{className:"_3_lp"},a):"";return i._("{operator} {value}",[i._param("operator",a),i._param("value",c)])}};a.prototype.$BUIFilterToken14=function(){__p&&__p();if(!this.refs.filterToken)return;var a=b("ReactDOM").findDOMNode(this.refs.filterToken);if(this.$BUIFilterToken1()&&this.refs.filterTokenInput){var c=b("ReactDOM").findDOMNode(this.refs.filterTokenInput);c=getComputedStyle(c).width;c=parseInt(c,10)+l;a.style.width=c+"px"}else a.style.width="auto"};a.prototype.$BUIFilterToken12=function(){var a=this.$BUIFilterToken13();return!!a.deprecationMessage};a.propTypes={contentEditable:c.bool.isRequired,disabled:c.bool,confirmOnBlur:c.bool,dismissOnBlur:c.bool.isRequired,index:c.number.isRequired,isReadOnly:c.bool,filter:c.instanceOf(b("AdsGenericFilter")).isRequired,onChange:c.func.isRequired,onRemove:c.func.isRequired,onEditAttempt:c.func,onEditCancelAttempt:c.func,validFieldConfigs:c.array.isRequired,filterConstructor:c.func,fieldsConfig:c.object.isRequired,valuesConfig:c.object.isRequired,theme:c.oneOf(["regular","dark","plain"]).isRequired,timezoneID:c.number,hideMenuOnSingleItem:c.bool,disableFieldSelector:c.bool,canAddStandalone:c.bool,useSUI_EXPERIMENTAL:c.bool,fieldGroupingConfig:c.array,expandTokenInput:c.bool,hasSearchableSelector:c.bool,enableFilterPrefixes:c.bool};a.defaultProps={confirmOnBlur:!1,dismissOnBlur:!0,filterConstructor:b("AdsGenericFilter"),theme:"regular",hasSearchableSelector:!1};e.exports=a}),null);
__d("BUIFilterTokenCreateButton.react",["ix","cx","fbt","xuiglyph","BUIComponent","BUIFilterTokenInput.react","Image.react","React","XUIButton.react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("BUIComponent"));k=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.state={editing:this.props.isInitiallyEditing,field:null,operator:null,value:null,prefixes:null},this.$BUIFilterTokenCreateButton5=function(a){a.preventDefault(),this.setState({editing:!0}),this.props.onCreateButtonToggle&&this.props.onCreateButtonToggle(!0)}.bind(this),this.$BUIFilterTokenCreateButton2=function(){this.setState({editing:!1}),this.props.onCreateButtonToggle&&this.props.onCreateButtonToggle(!1)}.bind(this),this.$BUIFilterTokenCreateButton1=function(a,b,c,d){d===void 0&&(d=[]),this.setState({editing:!1,field:a,operator:b,value:c,prefixes:d},this.$BUIFilterTokenCreateButton6),this.props.onCreateButtonToggle&&this.props.onCreateButtonToggle(!1)}.bind(this),this.$BUIFilterTokenCreateButton6=function(){this.props.onSubmit(this.state.field,this.state.operator,this.state.value,this.state.prefixes)}.bind(this),b}a.prototype.render=function(){if(this.state.editing)return b("React").createElement("div",{className:"_1tc"},b("React").createElement(b("BUIFilterTokenInput.react"),{autoOpenFieldSelector:this.props.autoOpenFieldSelector,className:"_1tb",confirmOnBlur:this.props.confirmOnBlur,dismissOnBlur:this.props.dismissOnBlur,expandTokenInput:this.props.expandTokenInput,filterBlacklist:this.props.filterBlacklist,onSubmit:this.$BUIFilterTokenCreateButton1,onCancel:this.$BUIFilterTokenCreateButton2,timezoneID:this.props.timezoneID,validFieldConfigs:this.props.validFieldConfigs,fieldsConfig:this.props.fieldsConfig,hideMenuOnSingleItem:this.props.hideMenuOnSingleItem,canAddStandalone:this.props.canAddStandalone,useSUI_EXPERIMENTAL:this.props.useSUI_EXPERIMENTAL,fieldGroupingConfig:this.props.fieldGroupingConfig,hasSearchableSelector:this.props.hasSearchableSelector,enableFilterPrefixes:this.props.enableFilterPrefixes}));else{var a=this.$BUIFilterTokenCreateButton3();return b("React").createElement("div",{className:"_1tc"+(this.$BUIFilterTokenCreateButton4()?" _1wde":"")},b("React").createElement(b("XUIButton.react"),{className:"_1wdf",size:"small",onClick:this.$BUIFilterTokenCreateButton5,image:a,label:i._("T\u1ea1o b\u1ed9 l\u1ecdc"),labelIsHidden:!0}))}};a.prototype.$BUIFilterTokenCreateButton3=function(){var a;this.$BUIFilterTokenCreateButton4()?a=g("89674"):a=g("89668");return b("React").createElement(b("Image.react"),{src:a})};a.prototype.$BUIFilterTokenCreateButton4=function(){return this.props.theme==="dark"};a.propTypes={autoOpenFieldSelector:c.bool,confirmOnBlur:c.bool,dismissOnBlur:c.bool,filterBlacklist:c.array,onSubmit:c.func.isRequired,onCreateButtonToggle:c.func,validFieldConfigs:c.array.isRequired,fieldsConfig:c.object.isRequired,theme:c.oneOf(["regular","dark"]).isRequired,timezoneID:c.number,hideMenuOnSingleItem:c.bool,isInitiallyEditing:c.bool,canAddStandalone:c.bool,useSUI_EXPERIMENTAL:c.bool,fieldGroupingConfig:c.array,expandTokenInput:c.bool,hasSearchableSelector:c.bool,enableFilterPrefixes:c.bool};a.defaultProps={autoOpenFieldSelector:!1,confirmOnBlur:!1,isInitiallyEditing:!1,theme:"regular",hasSearchableSelector:!1,enableFilterPrefixes:!1};e.exports=a}),null);
__d("getSUIHelpMessageUniform.fds",["ix","React","SUIGlyphIcon.react","asset"],(function(a,b,c,d,e,f,g){"use strict";function a(){return{icon:b("React").createElement(b("SUIGlyphIcon.react"),{srcDefault:g("481013"),srcHover:g("485955")})}}e.exports=a}),null);
__d("SUIHelpMessageUniform.fds",["getSUIHelpMessageUniform.fds"],(function(a,b,c,d,e,f){"use strict";e.exports=b("getSUIHelpMessageUniform.fds")()}),null);
__d("FDSHelpMessage.react",["React","SUIHelpMessage.react","SUIHelpMessageUniform.fds","SUITooltipUniform.fds","makeFDSStandardComponent","makeSUIFDSPrivateTheme"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PureComponent;var h=b("makeSUIFDSPrivateTheme")("FDSHelpMessage",{SUIHelpMessage:b("SUIHelpMessageUniform.fds"),SUITooltip:b("SUITooltipUniform.fds")});g=babelHelpers.inherits(a,c);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("SUIHelpMessage.react"),{margin:this.props.margin,onToggle:this.props.onToggle,position:this.props.position,preserveThemeFromContext:!0,theme:h,tooltipWidth:this.props.tooltipWidth,value:this.props.value})};function a(){g.apply(this,arguments)}a.defaultProps=b("SUIHelpMessage.react").defaultProps;e.exports=b("makeFDSStandardComponent")("FDSHelpMessage",a)}),null);
__d("XLtgLanguageDialectTypeaheadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/translation/dialects/",{value:{type:"String",defaultValue:""},q:{type:"String",defaultValue:""},dialect_set:{type:"Enum",defaultValue:"language_detection",enumType:1},render:{type:"Enum",defaultValue:"default",enumType:1}})}),null);
__d("LanguageDialectAsyncSearchSource",["WebAsyncSearchSource","XLtgLanguageDialectTypeaheadController"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("WebAsyncSearchSource"));g=c&&c.prototype;function a(a,c,d){g.constructor.call(this,{asyncErrorHandler:d,bootstrapRequests:[{uri:b("XLtgLanguageDialectTypeaheadController").getURIBuilder().setEnum("dialect_set",a).setEnum("render",c).getURI()}]})}a.prototype.searchImpl=function(a,b,c){!a?b(Object.values(this.getAllEntriesMap()),a):g.searchImpl.call(this,a,b,c)};e.exports=a}),null);
__d("LanguageDialectRenderStyle",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DEFAULT:"default",INTERNAL:"internal",ULM_CATEGORIES:"ulm_categories"})}),null);
__d("LanguageDialectCategory",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({VIEWER_UNDERSTOOD:"viewer_understood",OTHER:"other"})}),null);
__d("LanguageDialectViewRenderer.react",["cx","fbt","LanguageDialectCategory","LanguageDialectRenderStyle","React","XUIGrayText.react","XUITypeaheadViewItem.react","groupArray"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.$1=function(a){"use strict";return b("React").createElement(b("XUITypeaheadViewItem.react"),{key:a.getUniqueID(),entry:a,highlighted:a===this.props.highlightedEntry,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight})};a.prototype.$2=function(a,c){"use strict";__p&&__p();var d=null;switch(a){case b("LanguageDialectCategory").VIEWER_UNDERSTOOD:d=h._("Ng\u00f4n ng\u1eef th\u01b0\u1eddng s\u1eed d\u1ee5ng");break;case b("LanguageDialectCategory").OTHER:d=h._("Ng\u00f4n ng\u1eef kh\u00e1c");break;default:break}c=c.map(function(a){return this.$1(a)}.bind(this));d&&c.unshift(b("React").createElement(b("XUIGrayText.react"),{key:a,className:"_2pir _2pi2",shade:"light",display:"block"},d));return c};a.prototype.$3=function(){var a,c=b("groupArray")(this.props.entries,function(a){return a.getType()}),d=Object.keys(c);if(d.length===1)return this.$2("",this.props.entries);Object.prototype.hasOwnProperty.call(c,b("LanguageDialectCategory").VIEWER_UNDERSTOOD)&&(d.splice(d.indexOf(b("LanguageDialectCategory").VIEWER_UNDERSTOOD),1),d.unshift(b("LanguageDialectCategory").VIEWER_UNDERSTOOD));return(a=[]).concat.apply(a,d.map(function(a){return this.$2(a,c[a])}.bind(this)))};a.prototype.render=function(){"use strict";var a=this.props.renderStyle===b("LanguageDialectRenderStyle").ULM_CATEGORIES?this.$3():this.$2("",this.props.entries);return b("React").createElement("ul",{className:"_5p0r",role:this.props.role},a)};function a(){"use strict";i.apply(this,arguments)}e.exports=a}),null);
__d("LanguageDialectInlineTypeahead.react",["cx","AbstractTypeahead.react","LanguageDialectAsyncSearchSource","LanguageDialectRenderStyle","LanguageDialectViewRenderer.react","React"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){"use strict";h.constructor.call(this,a),this.$1=function(a){this.props.onSelect&&this.props.onSelect(a),this.$3()}.bind(this),this.$2=function(a){var b=a.target.value;this.props.onChange&&this.props.onChange(b);this.setState({query:a.target.value})}.bind(this),this.$3=function(){this.setState({query:""})}.bind(this),this.searchSource=new(b("LanguageDialectAsyncSearchSource"))(this.props.dialectType,this.props.renderStyle),this.state={query:""}}a.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";(a.dialectType!==this.props.dialectType||a.renderStyle!==this.props.renderStyle)&&(this.searchSource=new(b("LanguageDialectAsyncSearchSource"))(a.dialectType,a.renderStyle))};a.prototype.render=function(){"use strict";var a={};this.props.excludedDialects.forEach(function(b){return a[b]=!0});return b("React").createElement(b("AbstractTypeahead.react"),{autoHighlight:!0,inputClassName:this.props.className||"_5p0s",hideViewWithEntries:!1,showEntriesOnFocus:!0,onSelectAttempt:this.$1,onChange:this.$2,onClear:this.$3,searchSource:this.searchSource,placeholder:this.props.placeholder,excludedEntries:a,queryString:this.state.query,presenter:{ViewRenderer:b("LanguageDialectViewRenderer.react"),maxEntries:200,useLayer:!1,extraRendererProps:{renderStyle:this.props.renderStyle}}})};a.defaultProps={excludedDialects:[],renderStyle:b("LanguageDialectRenderStyle").DEFAULT};e.exports=a}),null);
__d("LanguageDialectSearchableDropdown.react",["cx","fbt","ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","LanguageDialectInlineTypeahead.react","LanguageDialectRenderStyle","LayerAutoFocus","LayerHideOnBlur","LayerHideOnEscape","React","XUIPopoverButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=" \u25be",k="xx_XX";c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(a){i.constructor.call(this,a),this.$2=function(a){this.setState({selectedDialect:a.getUniqueID(),selectedDialectName:a.getTitle(),isOpen:!1}),this.props.onSelect(a.getUniqueID())}.bind(this),this.$4=function(){this.setState({isOpen:!this.state.isOpen})}.bind(this),this.$5=function(a){this.setState({isOpen:a})}.bind(this),this.state={selectedDialect:this.props.initialDialect?this.props.initialDialect:k,selectedDialectName:this.props.initialDialectName?this.props.initialDialectName:h._("Ch\u1ecdn"),isOpen:!1}}a.prototype.$3=function(){return h._("Hi\u1ec3n th\u1ecb ng\u00f4n ng\u1eef kh\u1ea3 d\u1ee5ng")};a.prototype.render=function(){var a=this.props.useSelector?b("React").createElement(b("XUIPopoverButton.react"),{hasChevron:!0,label:this.state.selectedDialectName,onClick:this.$4,ref:function(a){return this.$1=a}.bind(this)}):b("React").createElement("a",{onClick:this.$4,ref:function(a){return this.$1=a}.bind(this),role:"button",tabIndex:"0",title:this.$3()},this.state.selectedDialectName,j);return b("React").createElement("span",{className:this.props.className},a,b("React").createElement(b("ContextualLayer.react"),{alignment:"left",autofocus:!0,behaviors:{ContextualLayerAutoFlip:b("ContextualLayerAutoFlip"),ContextualLayerUpdateOnScroll:b("ContextualLayerUpdateOnScroll"),LayerAutoFocus:b("LayerAutoFocus"),LayerHideOnBlur:b("LayerHideOnBlur"),LayerHideOnEscape:b("LayerHideOnEscape")},contextRef:function(){return this.$1}.bind(this),position:"below",onToggle:this.$5,shown:this.state.isOpen},b("React").createElement("div",{className:"_5ge1"},b("React").createElement(b("LanguageDialectInlineTypeahead.react"),{dialectType:this.props.dialectType,onSelect:this.$2,placeholder:this.props.placeholder,excludedDialects:this.props.excludedDialects,hasCategories:this.props.hasCategories,renderStyle:this.props.renderStyle}))))};a.defaultProps={initialDialect:k,hasCategories:!1,renderStyle:b("LanguageDialectRenderStyle").DEFAULT,useSelector:!1};e.exports=a}),null);
__d("SphericalMediaPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:SphericalMediaPerformanceLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:SphericalMediaPerformanceLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:SphericalMediaPerformanceLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setComputationTimeMs=function(a){this.$1.computation_time_ms=a;return this};a.prototype.setEndTimestampS=function(a){this.$1.end_timestamp_s=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setFallbackDuration=function(a){this.$1.fallback_duration=a;return this};a.prototype.setFallbackReason=function(a){this.$1.fallback_reason=a;return this};a.prototype.setNormalizedFrameTime=function(a){this.$1.normalized_frame_time=a;return this};a.prototype.setNumSpatialAudioStutters=function(a){this.$1.num_spatial_audio_stutters=a;return this};a.prototype.setProductName=function(a){this.$1.product_name=a;return this};a.prototype.setProjection=function(a){this.$1.projection=a;return this};a.prototype.setSpatialReactionsCacheUsed=function(a){this.$1.spatial_reactions_cache_used=a;return this};a.prototype.setSpatialReactionsClustersCount=function(a){this.$1.spatial_reactions_clusters_count=a;return this};a.prototype.setSpatialReactionsCount=function(a){this.$1.spatial_reactions_count=a;return this};a.prototype.setSphericalRendererSetupDuration=function(a){this.$1.spherical_renderer_setup_duration=a;return this};a.prototype.setStartTimestampS=function(a){this.$1.start_timestamp_s=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setVideoID=function(a){this.$1.video_id=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={computation_time_ms:!0,end_timestamp_s:!0,event:!0,fallback_duration:!0,fallback_reason:!0,normalized_frame_time:!0,num_spatial_audio_stutters:!0,product_name:!0,projection:!0,spatial_reactions_cache_used:!0,spatial_reactions_clusters_count:!0,spatial_reactions_count:!0,spherical_renderer_setup_duration:!0,start_timestamp_s:!0,time:!0,video_id:!0,weight:!0};e.exports=a}),null);
__d("createExponentialMovingAverage",[],(function(a,b,c,d,e,f){__p&&__p();function a(a,b){b===void 0&&(b=0);var c=b;return function(b){return c+=a*(b-c)}}function g(a){return function(b){return 1-Math.exp(-b/a)}}function b(a,b){b===void 0&&(b=0);var c=b,d=g(a);return function(a,b){return c+=d(b)*(a-c)}}a.createContinuous=b;e.exports=a}),null);
__d("VelocityTracker",["createExponentialMovingAverage","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c){a===void 0&&(a=50),c===void 0&&(c={x:0,y:0}),this.$5=c.x,this.$6=c.y,this.$1=b("performanceNow")(),this.$2=b("createExponentialMovingAverage").createContinuous(a,this.$5),this.$3=b("createExponentialMovingAverage").createContinuous(a,this.$6)}a.prototype.update=function(a,c){"use strict";var d=0;this.$4?(d=b("performanceNow")()-this.$1,d=this.updateVelocity((a-this.$4.x)*1e3/d,(c-this.$4.y)*1e3/d)):this.$1=b("performanceNow")();this.$4={x:a,y:c};return d};a.prototype.updateVelocity=function(a,c){"use strict";var d=b("performanceNow")(),e=d-this.$1;this.$1=d;this.$5=this.$2(a,e);this.$6=this.$3(c,e);return e};a.prototype.getVelocityX=function(){"use strict";return Math.trunc(this.$5)};a.prototype.getVelocityY=function(){"use strict";return Math.trunc(this.$6)};a.prototype.getSpeed=function(){"use strict";return Math.trunc(Math.sqrt(this.$5*this.$5+this.$6*this.$6))};e.exports=a}),null);
__d("ReactTargetingTaggerStore.react",["ReactComposerStoreBase","ReactComposerTaggerActionType","ReactComposerTaggerType"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("ReactComposerStoreBase"));g=c&&c.prototype;function a(){"use strict";var a;g.constructor.call(this,function(){var a={};a[b("ReactComposerTaggerType").TARGETING]={};return{taggersData:a,taggersSource:{}}},function(c){c.type===b("ReactComposerTaggerActionType").SET_TAGGER_DATA&&(a&&a.$ReactTargetingTaggerStore1(c))});a=this}a.prototype.getTaggerData=function(a,b){"use strict";return this.getComposerData(a).taggersData[b]};a.prototype.$ReactTargetingTaggerStore1=function(a){"use strict";var b=this.getComposerData(a.composerID),c=Array.isArray(a.taggerData)?a.taggerData.slice():Object.assign({},a.taggerData);b.taggersData[a.taggerID]=c;this.emitChange(a.composerID)};e.exports=new a()}),null);
__d("XPagesGetTargetingMetadataController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/targeting/metadata/",{})}),null);
__d("ReactComposerTargetingUtils",["fbt","AsyncRequest","React","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","ReactTargetingTaggerStore.react","XPagesGetTargetingMetadataController","XUIText.react","curry","intlList"],(function(a,b,c,d,e,f,g){__p&&__p();a={fetchMetadata:function(a,c,d){var e=b("XPagesGetTargetingMetadataController").getURIBuilder();new(b("AsyncRequest"))().setURI(e.getURI()).setMethod("POST").setReadOnly(!0).setData({page_id:c,target_spec:JSON.stringify(a)}).setHandler(b("curry")(this._onFetchMetadataHandler,d)).send()},_onFetchMetadataHandler:function(a,c){c=c.payload;var d=c.sentences.map(function(a){return b("React").createElement("span",null,g._("{content_label} {children}",[g._param("content_label",b("React").createElement(b("XUIText.react"),{weight:"bold"},a.content)),g._param("children",b("intlList")(a.children,b("intlList").CONJUNCTIONS.OR))]))});a(JSON.parse(c.target_spec),b("React").createElement("span",null,b("intlList")(d,b("intlList").CONJUNCTIONS.NONE)),c.reach_estimate)},getDataFromComposerTaggerStore:function(a){return b("ReactComposerTaggerStore").getTaggerData(a,b("ReactComposerTaggerType").TARGETING)},getDataFromTargetingTaggerStore:function(a){return b("ReactTargetingTaggerStore.react").getTaggerData(a,b("ReactComposerTaggerType").TARGETING)},setData:function(a,c){var d={},e=["targeting","gating","hints","targetingSentences","gatingSentences","reachEstimate","videoCreatorTopFanPageID","woodhengeInfo","newsSubscribersInfo","lockPrivacy"];e.map(function(a){a in c&&(d[a]=c[a])});b("ReactComposerTaggerActions").setTaggerDataWithoutLogging(a,b("ReactComposerTaggerType").TARGETING,d)}};e.exports=a}),null);
__d("SphericalVideoComponentDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!0})}),null);
__d("SphericalVideoComponentActions",["SphericalVideoComponentDispatcher"],(function(a,b,c,d,e,f){__p&&__p();a={registerVideoPlayerController:function(a){a={type:"SphericalVideoComponent/registerVideoPlayerController",controller:a,id:a.getVideoPlayerID()};b("SphericalVideoComponentDispatcher").dispatch(a)},updateVideoPlayerState:function(a,c){a={type:"SphericalVideoComponent/updateVideoPlayerState",id:a,state:c};b("SphericalVideoComponentDispatcher").dispatch(a)},togglePlay:function(a,c){a={type:"SphericalVideoComponent/togglePlay",id:a,nextIsPlaying:c};b("SphericalVideoComponentDispatcher").dispatch(a)},toggleChannelView:function(a,c){a={type:"SphericalVideoComponent/toggleChannelView",id:a,isInChannelView:c};b("SphericalVideoComponentDispatcher").dispatch(a)},toggleTahoe:function(a,c){a={type:"SphericalVideoComponent/toggleTahoe",id:a,isInTahoe:c};b("SphericalVideoComponentDispatcher").dispatch(a)},setCurrentVideoTime:function(a,c){a={type:"SphericalVideoComponent/setCurrentPlaytime",id:a,time:c};b("SphericalVideoComponentDispatcher").dispatch(a)},setVideoDuration:function(a,c){a={type:"SphericalVideoComponent/setVideoDuration",id:a,durationSeconds:c};b("SphericalVideoComponentDispatcher").dispatch(a)},seekStart:function(a){a={type:"SphericalVideoComponent/seekStart",id:a};b("SphericalVideoComponentDispatcher").dispatch(a)},registerSphericalViewportControl:function(a,c,d){a={type:"SphericalVideoComponent/registerSphericalViewportControl",id:a,sphericalViewportControl:c,viewport:d};b("SphericalVideoComponentDispatcher").dispatch(a)},changeViewport:function(a,c,d,e){a={type:"SphericalVideoComponent/changeViewport",id:a,yaw:c,pitch:d,fieldOfView:e};b("SphericalVideoComponentDispatcher").dispatch(a)},toggleViewportGrabbed:function(a){a={type:"SphericalVideoComponent/toggleViewportGrabbed",id:a};b("SphericalVideoComponentDispatcher").dispatch(a)},updateViewportDimensions:function(a,c,d){a={type:"SphericalVideoComponent/updateViewportDimensions",id:a,width:c,height:d};b("SphericalVideoComponentDispatcher").dispatch(a)},setUserIsInactive:function(a){a={type:"SphericalVideoComponent/setUserIsInactive",id:a};b("SphericalVideoComponentDispatcher").dispatch(a)},setInitialViewport:function(a,c,d){a={type:"SphericalVideoComponent/setInitialViewport",id:a,yaw:c,pitch:d};b("SphericalVideoComponentDispatcher").dispatch(a)}};e.exports=a}),null);
__d("SphericalVideoComponentConstants",[],(function(a,b,c,d,e,f){a={ACTIONS:{REGISTER_VIDEO_PLAYER_CONTROLLER:"SphericalVideoComponent/registerVideoPlayerController",UPDATE_VIDEO_PLAYER_STATE:"SphericalVideoComponent/updateVideoPlayerState",TOGGLE_PLAY:"SphericalVideoComponent/togglePlay",SET_CURRENT_PLAY_TIME:"SphericalVideoComponent/setCurrentPlaytime",SET_VIDEO_DURATION:"SphericalVideoComponent/setVideoDuration",TOGGLE_CHANNEL_VIEW:"SphericalVideoComponent/toggleChannelView",TOGGLE_TAHOE:"SphericalVideoComponent/toggleTahoe",SEEK_START:"SphericalVideoComponent/seekStart",REGISTER_SPHERICAL_VIEWPORT_CONTROL:"SphericalVideoComponent/registerSphericalViewportControl",CHANGE_VIEWPORT:"SphericalVideoComponent/changeViewport",TOGGLE_VIEWPORT_GRABBED:"SphericalVideoComponent/toggleViewportGrabbed",UPDATE_VIEWPORT_DIMENSIONS:"SphericalVideoComponent/updateViewportDimensions",SET_USER_IS_INACTIVE:"SphericalVideoComponent/setUserIsInactive",SET_INITIAL_VIEWPORT:"SphericalVideoComponent/setInitialViewport"}};e.exports=a}),null);
__d("degToRad",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a*Math.PI/180}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("gl-matrix-2.4.0",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h={exports:g},i;function j(){__p&&__p();(function(a,b){if(typeof g==="object"&&typeof h==="object")h.exports=b();else if(typeof i==="function"&&i.amd)i([],b);else{b=b();for(var c in b)(typeof g==="object"?g:a)[c]=b[c]}})(this,function(){__p&&__p();return function(a){__p&&__p();var b={};function c(f){if(b[f])return b[f].exports;var d=b[f]={i:f,l:!1,exports:{}};a[f].call(d.exports,d,d.exports,c);d.l=!0;return d.exports}c.m=a;c.c=b;c.d=function(a,b,d){c.o(a,b)||Object.defineProperty(a,b,{configurable:!1,enumerable:!0,get:d})};c.n=function(a){var b=a&&a.__esModule?function(){return a["default"]}:function(){return a};c.d(b,"a",b);return b};c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};c.p="";return c(c.s=4)}([function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.setMatrixArrayType=a;b.toRadian=c;b.equals=h;var d=b.EPSILON=1e-6;b.ARRAY_TYPE=typeof Float32Array!=="undefined"?Float32Array:Array;b.RANDOM=Math.random;function a(a){b.ARRAY_TYPE=a}var g=Math.PI/180;function c(a){return a*g}function h(a,b){return Math.abs(a-b)<=d*Math.max(1,Math.abs(a),Math.abs(b))}},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.sub=b.mul=void 0;b.create=g;b.fromMat4=h;b.clone=i;b.copy=j;b.fromValues=k;b.set=l;b.identity=m;b.transpose=n;b.invert=o;b.adjoint=p;b.determinant=q;b.multiply=r;b.translate=s;b.rotate=t;b.scale=u;b.fromTranslation=v;b.fromRotation=w;b.fromScaling=x;b.fromMat2d=y;b.fromQuat=z;b.normalFromMat4=A;b.projection=B;b.str=C;b.frob=D;b.add=E;b.subtract=F;b.multiplyScalar=G;b.multiplyScalarAndAdd=H;b.exactEquals=I;b.equals=J;g=c(0);var d=a(g);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){__p&&__p();var a=new d.ARRAY_TYPE(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function h(a,b){__p&&__p();a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a}function i(a){__p&&__p();var b=new d.ARRAY_TYPE(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b}function j(a,b){__p&&__p();a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a}function k(a,b,c,e,f,g,h,i,j){__p&&__p();var k=new d.ARRAY_TYPE(9);k[0]=a;k[1]=b;k[2]=c;k[3]=e;k[4]=f;k[5]=g;k[6]=h;k[7]=i;k[8]=j;return k}function l(a,b,c,d,e,f,g,h,i,j){__p&&__p();a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=h;a[7]=i;a[8]=j;return a}function m(a){__p&&__p();a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function n(a,b){__p&&__p();if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=d;a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a}function o(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7];b=b[8];var k=b*g-h*j,l=-b*f+h*i,m=j*f-g*i,n=c*k+d*l+e*m;if(!n)return null;n=1/n;a[0]=k*n;a[1]=(-b*d+e*j)*n;a[2]=(h*d-e*g)*n;a[3]=l*n;a[4]=(b*c-e*i)*n;a[5]=(-h*c+e*f)*n;a[6]=m*n;a[7]=(-j*c+d*i)*n;a[8]=(g*c-d*f)*n;return a}function p(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7];b=b[8];a[0]=g*b-h*j;a[1]=e*j-d*b;a[2]=d*h-e*g;a[3]=h*i-f*b;a[4]=c*b-e*i;a[5]=e*f-c*h;a[6]=f*j-g*i;a[7]=d*i-c*j;a[8]=c*g-d*f;return a}function q(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7];a=a[8];return b*(a*f-g*i)+c*(-a*e+g*h)+d*(i*e-f*h)}function r(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7];b=b[8];var l=c[0],m=c[1],n=c[2],o=c[3],p=c[4],q=c[5],r=c[6],s=c[7];c=c[8];a[0]=l*d+m*g+n*j;a[1]=l*e+m*h+n*k;a[2]=l*f+m*i+n*b;a[3]=o*d+p*g+q*j;a[4]=o*e+p*h+q*k;a[5]=o*f+p*i+q*b;a[6]=r*d+s*g+c*j;a[7]=r*e+s*h+c*k;a[8]=r*f+s*i+c*b;return a}function s(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7];b=b[8];var l=c[0];c=c[1];a[0]=d;a[1]=e;a[2]=f;a[3]=g;a[4]=h;a[5]=i;a[6]=l*d+c*g+j;a[7]=l*e+c*h+k;a[8]=l*f+c*i+b;return a}function t(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7];b=b[8];var l=Math.sin(c);c=Math.cos(c);a[0]=c*d+l*g;a[1]=c*e+l*h;a[2]=c*f+l*i;a[3]=c*g-l*d;a[4]=c*h-l*e;a[5]=c*i-l*f;a[6]=j;a[7]=k;a[8]=b;return a}function u(a,b,c){__p&&__p();var d=c[0];c=c[1];a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a}function v(a,b){__p&&__p();a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a}function w(a,b){__p&&__p();var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=-c;a[4]=b;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function x(a,b){__p&&__p();a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function y(a,b){__p&&__p();a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a}function z(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2];b=b[3];var f=c+c,g=d+d,h=e+e;c=c*f;var i=d*f;d=d*g;var j=e*f,k=e*g;e=e*h;f=b*f;g=b*g;b=b*h;a[0]=1-d-e;a[3]=i-b;a[6]=j+g;a[1]=i+b;a[4]=1-c-e;a[7]=k-f;a[2]=j-g;a[5]=k+f;a[8]=1-c-d;return a}function A(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14];b=b[15];var r=c*h-d*g,s=c*i-e*g,t=c*j-f*g,u=d*i-e*h,v=d*j-f*h,w=e*j-f*i,x=k*p-l*o,y=k*q-m*o;k=k*b-n*o;var z=l*q-m*p;l=l*b-n*p;m=m*b-n*q;n=r*m-s*l+t*z+u*k-v*y+w*x;if(!n)return null;n=1/n;a[0]=(h*m-i*l+j*z)*n;a[1]=(i*k-g*m-j*y)*n;a[2]=(g*l-h*k+j*x)*n;a[3]=(e*l-d*m-f*z)*n;a[4]=(c*m-e*k+f*y)*n;a[5]=(d*k-c*l-f*x)*n;a[6]=(p*w-q*v+b*u)*n;a[7]=(q*t-o*w-b*s)*n;a[8]=(o*v-p*t+b*r)*n;return a}function B(a,b,c){__p&&__p();a[0]=2/b;a[1]=0;a[2]=0;a[3]=0;a[4]=-2/c;a[5]=0;a[6]=-1;a[7]=1;a[8]=1;return a}function C(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"}function D(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))}function E(a,b,c){__p&&__p();a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];return a}function F(a,b,c){__p&&__p();a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];return a}function G(a,b,c){__p&&__p();a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;return a}function H(b,c,d,a){__p&&__p();b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;b[2]=c[2]+d[2]*a;b[3]=c[3]+d[3]*a;b[4]=c[4]+d[4]*a;b[5]=c[5]+d[5]*a;b[6]=c[6]+d[6]*a;b[7]=c[7]+d[7]*a;b[8]=c[8]+d[8]*a;return b}function I(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]}function J(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7];a=a[8];var l=b[0],m=b[1],n=b[2],o=b[3],p=b[4],q=b[5],r=b[6],s=b[7];b=b[8];return Math.abs(c-l)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(l))&&Math.abs(e-m)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(f-n)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(n))&&Math.abs(g-o)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(o))&&Math.abs(h-p)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(i-q)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(q))&&Math.abs(j-r)<=d.EPSILON*Math.max(1,Math.abs(j),Math.abs(r))&&Math.abs(k-s)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(s))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}b.mul=r;b.sub=F},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.forEach=b.sqrLen=b.len=b.sqrDist=b.dist=b.div=b.mul=b.sub=void 0;b.create=g;b.clone=h;b.length=i;b.fromValues=j;b.copy=k;b.set=l;b.add=m;b.subtract=n;b.multiply=o;b.divide=p;b.ceil=q;b.floor=r;b.min=s;b.max=t;b.round=u;b.scale=v;b.scaleAndAdd=w;b.distance=x;b.squaredDistance=y;b.squaredLength=z;b.negate=A;b.inverse=B;b.normalize=C;b.dot=D;b.cross=E;b.lerp=F;b.hermite=G;b.bezier=H;b.random=I;b.transformMat4=J;b.transformMat3=K;b.transformQuat=L;b.rotateX=M;b.rotateY=N;b.rotateZ=O;b.angle=P;b.str=Q;b.exactEquals=R;b.equals=S;h=c(0);var d=a(h);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){var a=new d.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a}function h(a){var b=new d.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b}function i(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function j(a,b,c){var e=new d.ARRAY_TYPE(3);e[0]=a;e[1]=b;e[2]=c;return e}function k(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a}function l(a,b,c,d){a[0]=b;a[1]=c;a[2]=d;return a}function m(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a}function n(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}function o(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a}function p(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a}function q(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a}function r(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a}function s(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a}function t(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a}function u(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a}function v(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a}function w(b,c,d,a){b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;b[2]=c[2]+d[2]*a;return b}function x(a,b){var c=b[0]-a[0],d=b[1]-a[1];b=b[2]-a[2];return Math.sqrt(c*c+d*d+b*b)}function y(a,b){var c=b[0]-a[0],d=b[1]-a[1];b=b[2]-a[2];return c*c+d*d+b*b}function z(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a}function A(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a}function B(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a}function C(a,b){var c=b[0],d=b[1],e=b[2];c=c*c+d*d+e*e;c>0&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a}function D(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function E(a,b,c){var d=b[0],e=b[1];b=b[2];var f=c[0],g=c[1];c=c[2];a[0]=e*c-b*g;a[1]=b*f-d*c;a[2]=d*g-e*f;return a}function F(a,b,c,d){var e=b[0],f=b[1];b=b[2];a[0]=e+d*(c[0]-e);a[1]=f+d*(c[1]-f);a[2]=b+d*(c[2]-b);return a}function G(a,b,c,d,e,f){var g=f*f,h=g*(2*f-3)+1,i=g*(f-2)+f,j=g*(f-1);g=g*(3-2*f);a[0]=b[0]*h+c[0]*i+d[0]*j+e[0]*g;a[1]=b[1]*h+c[1]*i+d[1]*j+e[1]*g;a[2]=b[2]*h+c[2]*i+d[2]*j+e[2]*g;return a}function H(a,b,c,d,e,f){var g=1-f,h=g*g,i=f*f,j=h*g;h=3*f*h;g=3*i*g;i=i*f;a[0]=b[0]*j+c[0]*h+d[0]*g+e[0]*i;a[1]=b[1]*j+c[1]*h+d[1]*g+e[1]*i;a[2]=b[2]*j+c[2]*h+d[2]*g+e[2]*i;return a}function I(b,a){a=a||1;var c=d.RANDOM()*2*Math.PI,e=d.RANDOM()*2-1,f=Math.sqrt(1-e*e)*a;b[0]=Math.cos(c)*f;b[1]=Math.sin(c)*f;b[2]=e*a;return b}function J(a,b,c){var d=b[0],e=b[1];b=b[2];var f=c[3]*d+c[7]*e+c[11]*b+c[15];f=f||1;a[0]=(c[0]*d+c[4]*e+c[8]*b+c[12])/f;a[1]=(c[1]*d+c[5]*e+c[9]*b+c[13])/f;a[2]=(c[2]*d+c[6]*e+c[10]*b+c[14])/f;return a}function K(a,b,c){var d=b[0],e=b[1];b=b[2];a[0]=d*c[0]+e*c[3]+b*c[6];a[1]=d*c[1]+e*c[4]+b*c[7];a[2]=d*c[2]+e*c[5]+b*c[8];return a}function L(a,b,c){__p&&__p();var d=b[0],e=b[1];b=b[2];var f=c[0],g=c[1],h=c[2];c=c[3];var i=c*d+g*b-h*e,j=c*e+h*d-f*b,k=c*b+f*e-g*d;d=-f*d-g*e-h*b;a[0]=i*c+d*-f+j*-h-k*-g;a[1]=j*c+d*-g+k*-f-i*-h;a[2]=k*c+d*-h+i*-g-j*-f;return a}function M(a,b,c,d){__p&&__p();var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[0];f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d);f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d);a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a}function N(a,b,c,d){__p&&__p();var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d);f[1]=e[1];f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d);a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a}function O(a,b,c,d){__p&&__p();var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d);f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d);f[2]=e[2];a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a}function P(a,b){__p&&__p();a=j(a[0],a[1],a[2]);b=j(b[0],b[1],b[2]);C(a,a);C(b,b);a=D(a,b);if(a>1)return 0;else if(a<-1)return Math.PI;else return Math.acos(a)}function Q(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"}function R(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]}function S(a,b){var c=a[0],e=a[1];a=a[2];var f=b[0],g=b[1];b=b[2];return Math.abs(c-f)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(e-g)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}b.sub=n;b.mul=o;b.div=p;b.dist=x;b.sqrDist=y;b.len=i;b.sqrLen=z;b.forEach=function(){var a=g();return function(b,c,d,e,f,g){var h=void 0,i=void 0;c||(c=3);d||(d=0);e?i=Math.min(e*c+d,b.length):i=b.length;for(h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}()},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.forEach=b.sqrLen=b.len=b.sqrDist=b.dist=b.div=b.mul=b.sub=void 0;b.create=g;b.clone=h;b.fromValues=i;b.copy=j;b.set=k;b.add=l;b.subtract=m;b.multiply=n;b.divide=o;b.ceil=p;b.floor=q;b.min=r;b.max=s;b.round=t;b.scale=u;b.scaleAndAdd=v;b.distance=w;b.squaredDistance=x;b.length=y;b.squaredLength=z;b.negate=A;b.inverse=B;b.normalize=C;b.dot=D;b.lerp=E;b.random=F;b.transformMat4=G;b.transformQuat=H;b.str=I;b.exactEquals=J;b.equals=K;h=c(0);var d=a(h);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){var a=new d.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a}function h(a){var b=new d.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b}function i(a,b,c,e){var f=new d.ARRAY_TYPE(4);f[0]=a;f[1]=b;f[2]=c;f[3]=e;return f}function j(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function k(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e;return a}function l(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a}function m(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];return a}function n(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];a[3]=b[3]*c[3];return a}function o(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];a[3]=b[3]/c[3];return a}function p(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a}function q(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);a[3]=Math.floor(b[3]);return a}function r(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);a[3]=Math.min(b[3],c[3]);return a}function s(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);a[3]=Math.max(b[3],c[3]);return a}function t(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a}function u(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;return a}function v(b,c,d,a){b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;b[2]=c[2]+d[2]*a;b[3]=c[3]+d[3]*a;return b}function w(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];b=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+b*b)}function x(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];b=b[3]-a[3];return c*c+d*d+e*e+b*b}function y(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)}function z(a){var b=a[0],c=a[1],d=a[2];a=a[3];return b*b+c*c+d*d+a*a}function A(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a}function B(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a}function C(a,b){var c=b[0],d=b[1],e=b[2];b=b[3];var f=c*c+d*d+e*e+b*b;f>0&&(f=1/Math.sqrt(f),a[0]=c*f,a[1]=d*f,a[2]=e*f,a[3]=b*f);return a}function D(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function E(a,b,c,d){var e=b[0],f=b[1],g=b[2];b=b[3];a[0]=e+d*(c[0]-e);a[1]=f+d*(c[1]-f);a[2]=g+d*(c[2]-g);a[3]=b+d*(c[3]-b);return a}function F(a,b){b=b||1;a[0]=d.RANDOM();a[1]=d.RANDOM();a[2]=d.RANDOM();a[3]=d.RANDOM();C(a,a);u(a,a,b);return a}function G(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*b;a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*b;a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*b;a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*b;return a}function H(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];c=c[3];var j=c*d+h*f-i*e,k=c*e+i*d-g*f,l=c*f+g*e-h*d;d=-g*d-h*e-i*f;a[0]=j*c+d*-g+k*-i-l*-h;a[1]=k*c+d*-h+l*-g-j*-i;a[2]=l*c+d*-i+j*-h-k*-g;a[3]=b[3];return a}function I(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}function J(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]}function K(a,b){var c=a[0],e=a[1],f=a[2];a=a[3];var g=b[0],h=b[1],i=b[2];b=b[3];return Math.abs(c-g)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(e-h)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(f-i)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(i))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}b.sub=m;b.mul=n;b.div=o;b.dist=w;b.sqrDist=x;b.len=y;b.sqrLen=z;b.forEach=function(){var a=g();return function(b,c,d,e,f,g){var h=void 0,i=void 0;c||(c=4);d||(d=0);e?i=Math.min(e*c+d,b.length):i=b.length;for(h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}()},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.vec4=b.vec3=b.vec2=b.quat=b.mat4=b.mat3=b.mat2d=b.mat2=b.glMatrix=void 0;var d=c(0);d=a(d);var g=c(5);g=a(g);var h=c(6);h=a(h);var i=c(1);i=a(i);var j=c(7);j=a(j);var k=c(8);k=a(k);var l=c(9);l=a(l);var m=c(2);m=a(m);c=c(3);a=a(c);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}b.glMatrix=d;b.mat2=g;b.mat2d=h;b.mat3=i;b.mat4=j;b.quat=k;b.vec2=l;b.vec3=m;b.vec4=a},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.sub=b.mul=void 0;b.create=g;b.clone=h;b.copy=i;b.identity=j;b.fromValues=k;b.set=l;b.transpose=m;b.invert=n;b.adjoint=o;b.determinant=p;b.multiply=q;b.rotate=r;b.scale=s;b.fromRotation=t;b.fromScaling=u;b.str=v;b.frob=w;b.LDU=x;b.add=y;b.subtract=z;b.exactEquals=A;b.equals=B;b.multiplyScalar=C;b.multiplyScalarAndAdd=D;g=c(0);var d=a(g);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){var a=new d.ARRAY_TYPE(4);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a}function h(a){var b=new d.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b}function i(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function j(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a}function k(a,b,c,e){var f=new d.ARRAY_TYPE(4);f[0]=a;f[1]=b;f[2]=c;f[3]=e;return f}function l(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e;return a}function m(a,b){if(a===b){var c=b[1];a[1]=b[2];a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a}function n(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2];b=b[3];var f=c*b-e*d;if(!f)return null;f=1/f;a[0]=b*f;a[1]=-d*f;a[2]=-e*f;a[3]=c*f;return a}function o(a,b){var c=b[0];a[0]=b[3];a[1]=-b[1];a[2]=-b[2];a[3]=c;return a}function p(a){return a[0]*a[3]-a[2]*a[1]}function q(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0],h=c[1],i=c[2];c=c[3];a[0]=d*g+f*h;a[1]=e*g+b*h;a[2]=d*i+f*c;a[3]=e*i+b*c;return a}function r(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+f*g;a[1]=e*c+b*g;a[2]=d*-g+f*c;a[3]=e*-g+b*c;return a}function s(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0];c=c[1];a[0]=d*g;a[1]=e*g;a[2]=f*c;a[3]=b*c;return a}function t(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=-c;a[3]=b;return a}function u(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];return a}function v(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}function w(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))}function x(a,b,c,d){a[2]=d[2]/d[0];c[0]=d[0];c[1]=d[1];c[3]=d[3]-a[2]*c[1];return[a,b,c]}function y(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a}function z(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];return a}function A(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]}function B(a,b){var c=a[0],e=a[1],f=a[2];a=a[3];var g=b[0],h=b[1],i=b[2];b=b[3];return Math.abs(c-g)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(e-h)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(f-i)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(i))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}function C(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;return a}function D(b,c,d,a){b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;b[2]=c[2]+d[2]*a;b[3]=c[3]+d[3]*a;return b}b.mul=q;b.sub=z},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.sub=b.mul=void 0;b.create=g;b.clone=h;b.copy=i;b.identity=j;b.fromValues=k;b.set=l;b.invert=m;b.determinant=n;b.multiply=o;b.rotate=p;b.scale=q;b.translate=r;b.fromRotation=s;b.fromScaling=t;b.fromTranslation=u;b.str=v;b.frob=w;b.add=x;b.subtract=y;b.multiplyScalar=z;b.multiplyScalarAndAdd=A;b.exactEquals=B;b.equals=C;g=c(0);var d=a(g);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){var a=new d.ARRAY_TYPE(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a}function h(a){var b=new d.ARRAY_TYPE(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b}function i(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function j(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a}function k(a,b,c,e,f,g){var h=new d.ARRAY_TYPE(6);h[0]=a;h[1]=b;h[2]=c;h[3]=e;h[4]=f;h[5]=g;return h}function l(a,b,c,d,e,f,g){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;return a}function m(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4];b=b[5];var h=c*f-d*e;if(!h)return null;h=1/h;a[0]=f*h;a[1]=-d*h;a[2]=-e*h;a[3]=c*h;a[4]=(e*b-f*g)*h;a[5]=(d*g-c*b)*h;return a}function n(a){return a[0]*a[3]-a[1]*a[2]}function o(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var i=c[0],j=c[1],k=c[2],l=c[3],m=c[4];c=c[5];a[0]=d*i+f*j;a[1]=e*i+g*j;a[2]=d*k+f*l;a[3]=e*k+g*l;a[4]=d*m+f*c+h;a[5]=e*m+g*c+b;return a}function p(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var i=Math.sin(c);c=Math.cos(c);a[0]=d*c+f*i;a[1]=e*c+g*i;a[2]=d*-i+f*c;a[3]=e*-i+g*c;a[4]=h;a[5]=b;return a}function q(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var i=c[0];c=c[1];a[0]=d*i;a[1]=e*i;a[2]=f*c;a[3]=g*c;a[4]=h;a[5]=b;return a}function r(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var i=c[0];c=c[1];a[0]=d;a[1]=e;a[2]=f;a[3]=g;a[4]=d*i+f*c+h;a[5]=e*i+g*c+b;return a}function s(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=-c;a[3]=b;a[4]=0;a[5]=0;return a}function t(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=0;return a}function u(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a}function v(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"}function w(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)}function x(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];return a}function y(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];return a}function z(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;return a}function A(b,c,d,a){b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;b[2]=c[2]+d[2]*a;b[3]=c[3]+d[3]*a;b[4]=c[4]+d[4]*a;b[5]=c[5]+d[5]*a;return b}function B(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]}function C(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4];a=a[5];var i=b[0],j=b[1],k=b[2],l=b[3],m=b[4];b=b[5];return Math.abs(c-i)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(i))&&Math.abs(e-j)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(j))&&Math.abs(f-k)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(g-l)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(l))&&Math.abs(h-m)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}b.mul=o;b.sub=y},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.sub=b.mul=void 0;b.create=g;b.clone=h;b.copy=i;b.fromValues=j;b.set=k;b.identity=l;b.transpose=m;b.invert=n;b.adjoint=o;b.determinant=p;b.multiply=q;b.translate=r;b.scale=s;b.rotate=t;b.rotateX=u;b.rotateY=v;b.rotateZ=w;b.fromTranslation=x;b.fromScaling=y;b.fromRotation=z;b.fromXRotation=A;b.fromYRotation=B;b.fromZRotation=C;b.fromRotationTranslation=D;b.getTranslation=E;b.getScaling=F;b.getRotation=G;b.fromRotationTranslationScale=H;b.fromRotationTranslationScaleOrigin=I;b.fromQuat=J;b.frustum=K;b.perspective=L;b.perspectiveFromFieldOfView=M;b.ortho=N;b.lookAt=O;b.targetTo=P;b.str=Q;b.frob=R;b.add=S;b.subtract=T;b.multiplyScalar=U;b.multiplyScalarAndAdd=V;b.exactEquals=W;b.equals=X;g=c(0);var d=a(g);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){__p&&__p();var a=new d.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function h(a){__p&&__p();var b=new d.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b}function i(a,b){__p&&__p();a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function j(a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q){__p&&__p();var r=new d.ARRAY_TYPE(16);r[0]=a;r[1]=b;r[2]=c;r[3]=e;r[4]=f;r[5]=g;r[6]=h;r[7]=i;r[8]=j;r[9]=k;r[10]=l;r[11]=m;r[12]=n;r[13]=o;r[14]=p;r[15]=q;return r}function k(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){__p&&__p();a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=h;a[7]=i;a[8]=j;a[9]=k;a[10]=l;a[11]=m;a[12]=n;a[13]=o;a[14]=p;a[15]=q;return a}function l(a){__p&&__p();a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function m(a,b){__p&&__p();if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=f;a[11]=b[14];a[12]=e;a[13]=g;a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}function n(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14];b=b[15];var r=c*h-d*g,s=c*i-e*g,t=c*j-f*g,u=d*i-e*h,v=d*j-f*h,w=e*j-f*i,x=k*p-l*o,y=k*q-m*o,z=k*b-n*o,A=l*q-m*p,B=l*b-n*p,C=m*b-n*q,D=r*C-s*B+t*A+u*z-v*y+w*x;if(!D)return null;D=1/D;a[0]=(h*C-i*B+j*A)*D;a[1]=(e*B-d*C-f*A)*D;a[2]=(p*w-q*v+b*u)*D;a[3]=(m*v-l*w-n*u)*D;a[4]=(i*z-g*C-j*y)*D;a[5]=(c*C-e*z+f*y)*D;a[6]=(q*t-o*w-b*s)*D;a[7]=(k*w-m*t+n*s)*D;a[8]=(g*B-h*z+j*x)*D;a[9]=(d*z-c*B-f*x)*D;a[10]=(o*v-p*t+b*r)*D;a[11]=(l*t-k*v-n*r)*D;a[12]=(h*y-g*A-i*x)*D;a[13]=(c*A-d*y+e*x)*D;a[14]=(p*s-o*u-q*r)*D;a[15]=(k*u-l*s+m*r)*D;return a}function o(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14];b=b[15];a[0]=h*(m*b-n*q)-l*(i*b-j*q)+p*(i*n-j*m);a[1]=-(d*(m*b-n*q)-l*(e*b-f*q)+p*(e*n-f*m));a[2]=d*(i*b-j*q)-h*(e*b-f*q)+p*(e*j-f*i);a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i));a[4]=-(g*(m*b-n*q)-k*(i*b-j*q)+o*(i*n-j*m));a[5]=c*(m*b-n*q)-k*(e*b-f*q)+o*(e*n-f*m);a[6]=-(c*(i*b-j*q)-g*(e*b-f*q)+o*(e*j-f*i));a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i);a[8]=g*(l*b-n*p)-k*(h*b-j*p)+o*(h*n-j*l);a[9]=-(c*(l*b-n*p)-k*(d*b-f*p)+o*(d*n-f*l));a[10]=c*(h*b-j*p)-g*(d*b-f*p)+o*(d*j-f*h);a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h));a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l));a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l);a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h));a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h);return a}function p(a){__p&&__p();var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14];a=a[15];var q=b*g-c*f,r=b*h-d*f;b=b*i-e*f;f=c*h-d*g;c=c*i-e*g;g=d*i-e*h;d=j*o-k*n;i=j*p-l*n;e=j*a-m*n;h=k*p-l*o;j=k*a-m*o;n=l*a-m*p;return q*n-r*j+b*h+f*e-c*i+g*d}function q(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14];b=b[15];var s=c[0],t=c[1],u=c[2],v=c[3];a[0]=s*d+t*h+u*l+v*p;a[1]=s*e+t*i+u*m+v*q;a[2]=s*f+t*j+u*n+v*r;a[3]=s*g+t*k+u*o+v*b;s=c[4];t=c[5];u=c[6];v=c[7];a[4]=s*d+t*h+u*l+v*p;a[5]=s*e+t*i+u*m+v*q;a[6]=s*f+t*j+u*n+v*r;a[7]=s*g+t*k+u*o+v*b;s=c[8];t=c[9];u=c[10];v=c[11];a[8]=s*d+t*h+u*l+v*p;a[9]=s*e+t*i+u*m+v*q;a[10]=s*f+t*j+u*n+v*r;a[11]=s*g+t*k+u*o+v*b;s=c[12];t=c[13];u=c[14];v=c[15];a[12]=s*d+t*h+u*l+v*p;a[13]=s*e+t*i+u*m+v*q;a[14]=s*f+t*j+u*n+v*r;a[15]=s*g+t*k+u*o+v*b;return a}function r(a,b,c){var d=c[0],e=c[1];c=c[2];var f,g,h,i,j,k,l,m,n,o,p,q;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7],n=b[8],o=b[9],p=b[10],q=b[11],a[0]=f,a[1]=g,a[2]=h,a[3]=i,a[4]=j,a[5]=k,a[6]=l,a[7]=m,a[8]=n,a[9]=o,a[10]=p,a[11]=q,a[12]=f*d+j*e+n*c+b[12],a[13]=g*d+k*e+o*c+b[13],a[14]=h*d+l*e+p*c+b[14],a[15]=i*d+m*e+q*c+b[15]);return a}function s(a,b,c){__p&&__p();var d=c[0],e=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function t(a,b,c,e){__p&&__p();var f=e[0],g=e[1];e=e[2];var h=Math.sqrt(f*f+g*g+e*e),i=void 0,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;if(Math.abs(h)<d.EPSILON)return null;h=1/h;f*=h;g*=h;e*=h;i=Math.sin(c);h=Math.cos(c);c=1-h;j=b[0];k=b[1];l=b[2];m=b[3];n=b[4];o=b[5];p=b[6];q=b[7];r=b[8];s=b[9];t=b[10];u=b[11];v=f*f*c+h;w=g*f*c+e*i;x=e*f*c-g*i;y=f*g*c-e*i;z=g*g*c+h;A=e*g*c+f*i;B=f*e*c+g*i;g=g*e*c-f*i;f=e*e*c+h;a[0]=j*v+n*w+r*x;a[1]=k*v+o*w+s*x;a[2]=l*v+p*w+t*x;a[3]=m*v+q*w+u*x;a[4]=j*y+n*z+r*A;a[5]=k*y+o*z+s*A;a[6]=l*y+p*z+t*A;a[7]=m*y+q*z+u*A;a[8]=j*B+n*g+r*f;a[9]=k*B+o*g+s*f;a[10]=l*B+p*g+t*f;a[11]=m*B+q*g+u*f;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a}function u(a,b,c){__p&&__p();var d=Math.sin(c);c=Math.cos(c);var e=b[4],f=b[5],g=b[6],h=b[7],i=b[8],j=b[9],k=b[10],l=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+i*d;a[5]=f*c+j*d;a[6]=g*c+k*d;a[7]=h*c+l*d;a[8]=i*c-e*d;a[9]=j*c-f*d;a[10]=k*c-g*d;a[11]=l*c-h*d;return a}function v(a,b,c){__p&&__p();var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],i=b[8],j=b[9],k=b[10],l=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-i*d;a[1]=f*c-j*d;a[2]=g*c-k*d;a[3]=h*c-l*d;a[8]=e*d+i*c;a[9]=f*d+j*c;a[10]=g*d+k*c;a[11]=h*d+l*c;return a}function w(a,b,c){__p&&__p();var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],i=b[4],j=b[5],k=b[6],l=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+i*d;a[1]=f*c+j*d;a[2]=g*c+k*d;a[3]=h*c+l*d;a[4]=i*c-e*d;a[5]=j*c-f*d;a[6]=k*c-g*d;a[7]=l*c-h*d;return a}function x(a,b){__p&&__p();a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a}function y(a,b){__p&&__p();a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function z(a,b,c){__p&&__p();var e=c[0],f=c[1];c=c[2];var g=Math.sqrt(e*e+f*f+c*c),h=void 0;if(Math.abs(g)<d.EPSILON)return null;g=1/g;e*=g;f*=g;c*=g;h=Math.sin(b);g=Math.cos(b);b=1-g;a[0]=e*e*b+g;a[1]=f*e*b+c*h;a[2]=c*e*b-f*h;a[3]=0;a[4]=e*f*b-c*h;a[5]=f*f*b+g;a[6]=c*f*b+e*h;a[7]=0;a[8]=e*c*b+f*h;a[9]=f*c*b-e*h;a[10]=c*c*b+g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function A(a,b){__p&&__p();var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function B(a,b){__p&&__p();var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function C(a,b){__p&&__p();var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function D(a,b,c){__p&&__p();var d=b[0],e=b[1],f=b[2];b=b[3];var g=d+d,h=e+e,i=f+f,j=d*g,k=d*h;d=d*i;var l=e*h;e=e*i;f=f*i;g=b*g;h=b*h;b=b*i;a[0]=1-(l+f);a[1]=k+b;a[2]=d-h;a[3]=0;a[4]=k-b;a[5]=1-(j+f);a[6]=e+g;a[7]=0;a[8]=d+h;a[9]=e-g;a[10]=1-(j+l);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function E(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a}function F(a,b){var c=b[0],d=b[1],e=b[2],f=b[4],g=b[5],h=b[6],i=b[8],j=b[9];b=b[10];a[0]=Math.sqrt(c*c+d*d+e*e);a[1]=Math.sqrt(f*f+g*g+h*h);a[2]=Math.sqrt(i*i+j*j+b*b);return a}function G(a,b){var c=b[0]+b[5]+b[10];c>0?(c=Math.sqrt(c+1)*2,a[3]=.25*c,a[0]=(b[6]-b[9])/c,a[1]=(b[8]-b[2])/c,a[2]=(b[1]-b[4])/c):b[0]>b[5]&b[0]>b[10]?(c=Math.sqrt(1+b[0]-b[5]-b[10])*2,a[3]=(b[6]-b[9])/c,a[0]=.25*c,a[1]=(b[1]+b[4])/c,a[2]=(b[8]+b[2])/c):b[5]>b[10]?(c=Math.sqrt(1+b[5]-b[0]-b[10])*2,a[3]=(b[8]-b[2])/c,a[0]=(b[1]+b[4])/c,a[1]=.25*c,a[2]=(b[6]+b[9])/c):(c=Math.sqrt(1+b[10]-b[0]-b[5])*2,a[3]=(b[1]-b[4])/c,a[0]=(b[8]+b[2])/c,a[1]=(b[6]+b[9])/c,a[2]=.25*c);return a}function H(a,b,c,d){__p&&__p();var e=b[0],f=b[1],g=b[2];b=b[3];var h=e+e,i=f+f,j=g+g,k=e*h,l=e*i;e=e*j;var m=f*i;f=f*j;g=g*j;h=b*h;i=b*i;b=b*j;j=d[0];var n=d[1];d=d[2];a[0]=(1-(m+g))*j;a[1]=(l+b)*j;a[2]=(e-i)*j;a[3]=0;a[4]=(l-b)*n;a[5]=(1-(k+g))*n;a[6]=(f+h)*n;a[7]=0;a[8]=(e+i)*d;a[9]=(f-h)*d;a[10]=(1-(k+m))*d;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function I(a,b,c,d,e){__p&&__p();var f=b[0],g=b[1],h=b[2];b=b[3];var i=f+f,j=g+g,k=h+h,l=f*i,m=f*j;f=f*k;var n=g*j;g=g*k;h=h*k;i=b*i;j=b*j;b=b*k;k=d[0];var o=d[1];d=d[2];var p=e[0],q=e[1];e=e[2];a[0]=(1-(n+h))*k;a[1]=(m+b)*k;a[2]=(f-j)*k;a[3]=0;a[4]=(m-b)*o;a[5]=(1-(l+h))*o;a[6]=(g+i)*o;a[7]=0;a[8]=(f+j)*d;a[9]=(g-i)*d;a[10]=(1-(l+n))*d;a[11]=0;a[12]=c[0]+p-(a[0]*p+a[4]*q+a[8]*e);a[13]=c[1]+q-(a[1]*p+a[5]*q+a[9]*e);a[14]=c[2]+e-(a[2]*p+a[6]*q+a[10]*e);a[15]=1;return a}function J(a,b){__p&&__p();var c=b[0],d=b[1],e=b[2];b=b[3];var f=c+c,g=d+d,h=e+e;c=c*f;var i=d*f;d=d*g;var j=e*f,k=e*g;e=e*h;f=b*f;g=b*g;b=b*h;a[0]=1-d-e;a[1]=i+b;a[2]=j-g;a[3]=0;a[4]=i-b;a[5]=1-c-e;a[6]=k+f;a[7]=0;a[8]=j+g;a[9]=k-f;a[10]=1-c-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function K(a,b,c,d,e,f,g){__p&&__p();var h=1/(c-b),i=1/(e-d),j=1/(f-g);a[0]=f*2*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f*2*i;a[6]=0;a[7]=0;a[8]=(c+b)*h;a[9]=(e+d)*i;a[10]=(g+f)*j;a[11]=-1;a[12]=0;a[13]=0;a[14]=g*f*2*j;a[15]=0;return a}function L(a,b,c,d,e){__p&&__p();b=1/Math.tan(b/2);var f=1/(d-e);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(e+d)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*e*d*f;a[15]=0;return a}function M(a,b,c,d){__p&&__p();var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var h=2/(g+b),i=2/(e+f);a[0]=h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=i;a[6]=0;a[7]=0;a[8]=-((g-b)*h*.5);a[9]=(e-f)*i*.5;a[10]=d/(c-d);a[11]=-1;a[12]=0;a[13]=0;a[14]=d*c/(c-d);a[15]=0;return a}function N(a,b,c,d,e,f,g){__p&&__p();var h=1/(b-c),i=1/(d-e),j=1/(f-g);a[0]=-2*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*i;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*j;a[11]=0;a[12]=(b+c)*h;a[13]=(e+d)*i;a[14]=(g+f)*j;a[15]=1;return a}function O(a,b,c,e){__p&&__p();var f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=b[0],p=b[1];b=b[2];var q=e[0],r=e[1];e=e[2];var s=c[0],t=c[1];c=c[2];if(Math.abs(o-s)<d.EPSILON&&Math.abs(p-t)<d.EPSILON&&Math.abs(b-c)<d.EPSILON)return mat4.identity(a);l=o-s;m=p-t;n=b-c;s=1/Math.sqrt(l*l+m*m+n*n);l*=s;m*=s;n*=s;f=r*n-e*m;g=e*l-q*n;h=q*m-r*l;s=Math.sqrt(f*f+g*g+h*h);!s?(f=0,g=0,h=0):(s=1/s,f*=s,g*=s,h*=s);i=m*h-n*g;j=n*f-l*h;k=l*g-m*f;s=Math.sqrt(i*i+j*j+k*k);!s?(i=0,j=0,k=0):(s=1/s,i*=s,j*=s,k*=s);a[0]=f;a[1]=i;a[2]=l;a[3]=0;a[4]=g;a[5]=j;a[6]=m;a[7]=0;a[8]=h;a[9]=k;a[10]=n;a[11]=0;a[12]=-(f*o+g*p+h*b);a[13]=-(i*o+j*p+k*b);a[14]=-(l*o+m*p+n*b);a[15]=1;return a}function P(a,b,c,d){__p&&__p();var e=b[0],f=b[1];b=b[2];var g=d[0],h=d[1];d=d[2];var i=e-c[0],j=f-c[1];c=b-c[2];var k=i*i+j*j+c*c;k>0&&(k=1/Math.sqrt(k),i*=k,j*=k,c*=k);k=h*c-d*j;d=d*i-g*c;g=g*j-h*i;a[0]=k;a[1]=d;a[2]=g;a[3]=0;a[4]=j*g-c*d;a[5]=c*k-i*g;a[6]=i*d-j*k;a[7]=0;a[8]=i;a[9]=j;a[10]=c;a[11]=0;a[12]=e;a[13]=f;a[14]=b;a[15]=1;return a}function Q(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function R(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))}function S(a,b,c){__p&&__p();a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a}function T(a,b,c){__p&&__p();a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}function U(a,b,c){__p&&__p();a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a}function V(b,c,d,a){__p&&__p();b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;b[2]=c[2]+d[2]*a;b[3]=c[3]+d[3]*a;b[4]=c[4]+d[4]*a;b[5]=c[5]+d[5]*a;b[6]=c[6]+d[6]*a;b[7]=c[7]+d[7]*a;b[8]=c[8]+d[8]*a;b[9]=c[9]+d[9]*a;b[10]=c[10]+d[10]*a;b[11]=c[11]+d[11]*a;b[12]=c[12]+d[12]*a;b[13]=c[13]+d[13]*a;b[14]=c[14]+d[14]*a;b[15]=c[15]+d[15]*a;return b}function W(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]}function X(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14];a=a[15];var s=b[0],t=b[1],u=b[2],v=b[3],w=b[4],x=b[5],y=b[6],z=b[7],A=b[8],B=b[9],C=b[10],D=b[11],E=b[12],F=b[13],G=b[14];b=b[15];return Math.abs(c-s)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(s))&&Math.abs(e-t)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))&&Math.abs(f-u)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(u))&&Math.abs(g-v)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(v))&&Math.abs(h-w)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(i-x)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(j-y)<=d.EPSILON*Math.max(1,Math.abs(j),Math.abs(y))&&Math.abs(k-z)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(z))&&Math.abs(l-A)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(m-B)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(n-C)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(C))&&Math.abs(o-D)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(D))&&Math.abs(p-E)<=d.EPSILON*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(q-F)<=d.EPSILON*Math.max(1,Math.abs(q),Math.abs(F))&&Math.abs(r-G)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(G))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}b.mul=q;b.sub=T},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.setAxes=b.sqlerp=b.rotationTo=b.equals=b.exactEquals=b.normalize=b.sqrLen=b.squaredLength=b.len=b.length=b.lerp=b.dot=b.scale=b.mul=b.add=b.set=b.copy=b.fromValues=b.clone=void 0;b.create=i;b.identity=j;b.setAxisAngle=k;b.getAxisAngle=l;b.multiply=m;b.rotateX=n;b.rotateY=o;b.rotateZ=p;b.calculateW=q;b.slerp=r;b.invert=s;b.conjugate=t;b.fromMat3=u;b.fromEuler=v;b.str=w;j=c(0);var d=a(j);l=c(1);var g=a(l);n=c(2);var h=a(n);o=c(3);p=a(o);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function i(){var a=new d.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}function j(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}function k(a,b,c){c=c*.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=Math.cos(c);return a}function l(a,b){var c=Math.acos(b[3])*2,d=Math.sin(c/2);d!=0?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0);return c}function m(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0],h=c[1],i=c[2];c=c[3];a[0]=d*c+b*g+e*i-f*h;a[1]=e*c+b*h+f*g-d*i;a[2]=f*c+b*i+d*h-e*g;a[3]=b*c-d*g-e*h-f*i;return a}function n(a,b,c){__p&&__p();c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+b*g;a[1]=e*c+f*g;a[2]=f*c-e*g;a[3]=b*c-d*g;return a}function o(a,b,c){__p&&__p();c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c-f*g;a[1]=e*c+b*g;a[2]=f*c+d*g;a[3]=b*c-e*g;return a}function p(a,b,c){__p&&__p();c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+e*g;a[1]=e*c-d*g;a[2]=f*c+b*g;a[3]=b*c-f*g;return a}function q(a,b){var c=b[0],d=b[1];b=b[2];a[0]=c;a[1]=d;a[2]=b;a[3]=Math.sqrt(Math.abs(1-c*c-d*d-b*b));return a}function r(a,b,c,d){__p&&__p();var e=b[0],f=b[1],g=b[2];b=b[3];var h=c[0],i=c[1],j=c[2];c=c[3];var k=void 0,l,m=void 0,n=void 0;l=e*h+f*i+g*j+b*c;l<0&&(l=-l,h=-h,i=-i,j=-j,c=-c);1-l>1e-6?(k=Math.acos(l),m=Math.sin(k),n=Math.sin((1-d)*k)/m,l=Math.sin(d*k)/m):(n=1-d,l=d);a[0]=n*e+l*h;a[1]=n*f+l*i;a[2]=n*g+l*j;a[3]=n*b+l*c;return a}function s(a,b){var c=b[0],d=b[1],e=b[2];b=b[3];var f=c*c+d*d+e*e+b*b;f=f?1/f:0;a[0]=-c*f;a[1]=-d*f;a[2]=-e*f;a[3]=b*f;return a}function t(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a}function u(a,b){__p&&__p();var c=b[0]+b[4]+b[8];if(c>0)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[d*3+d]&&(d=2);var e=(d+1)%3,f=(d+2)%3;c=Math.sqrt(b[d*3+d]-b[e*3+e]-b[f*3+f]+1);a[d]=.5*c;c=.5/c;a[3]=(b[e*3+f]-b[f*3+e])*c;a[e]=(b[e*3+d]+b[d*3+e])*c;a[f]=(b[f*3+d]+b[d*3+f])*c}return a}function v(a,b,c,d){__p&&__p();var e=.5*Math.PI/180;b*=e;c*=e;d*=e;e=Math.sin(b);b=Math.cos(b);var f=Math.sin(c);c=Math.cos(c);var g=Math.sin(d);d=Math.cos(d);a[0]=e*c*d-b*f*g;a[1]=b*f*d+e*c*g;a[2]=b*c*g-e*f*d;a[3]=b*c*d+e*f*g;return a}function w(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}b.clone=p.clone;b.fromValues=p.fromValues;b.copy=p.copy;b.set=p.set;b.add=p.add;b.mul=m;b.scale=p.scale;b.dot=p.dot;b.lerp=p.lerp;q=b.length=p.length;b.len=q;s=b.squaredLength=p.squaredLength;b.sqrLen=s;var x=b.normalize=p.normalize;b.exactEquals=p.exactEquals;b.equals=p.equals;b.rotationTo=function(){__p&&__p();var a=h.create(),b=h.fromValues(1,0,0),c=h.fromValues(0,1,0);return function(d,e,f){__p&&__p();var g=h.dot(e,f);if(g<-.999999){h.cross(a,b,e);h.len(a)<1e-6&&h.cross(a,c,e);h.normalize(a,a);k(d,a,Math.PI);return d}else if(g>.999999){d[0]=0;d[1]=0;d[2]=0;d[3]=1;return d}else{h.cross(a,e,f);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=1+g;return x(d,d)}}}();b.sqlerp=function(){var a=i(),b=i();return function(c,d,e,f,g,h){r(a,d,g,h);r(b,e,f,h);r(c,a,b,2*h*(1-h));return c}}();b.setAxes=function(){__p&&__p();var a=g.create();return function(b,c,d,e){__p&&__p();a[0]=d[0];a[3]=d[1];a[6]=d[2];a[1]=e[0];a[4]=e[1];a[7]=e[2];a[2]=-c[0];a[5]=-c[1];a[8]=-c[2];return x(b,u(b,a))}}()},function(a,b,c){__p&&__p();Object.defineProperty(b,"__esModule",{value:!0});b.forEach=b.sqrLen=b.sqrDist=b.dist=b.div=b.mul=b.sub=b.len=void 0;b.create=g;b.clone=h;b.fromValues=i;b.copy=j;b.set=k;b.add=l;b.subtract=m;b.multiply=n;b.divide=o;b.ceil=p;b.floor=q;b.min=r;b.max=s;b.round=t;b.scale=u;b.scaleAndAdd=v;b.distance=w;b.squaredDistance=x;b.length=y;b.squaredLength=z;b.negate=A;b.inverse=B;b.normalize=C;b.dot=D;b.cross=E;b.lerp=F;b.random=G;b.transformMat2=H;b.transformMat2d=I;b.transformMat3=J;b.transformMat4=K;b.str=L;b.exactEquals=M;b.equals=N;h=c(0);var d=a(h);function a(a){if(a&&a.__esModule)return a;else{var b={};if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}}function g(){var a=new d.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a}function h(a){var b=new d.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b}function i(a,b){var c=new d.ARRAY_TYPE(2);c[0]=a;c[1]=b;return c}function j(a,b){a[0]=b[0];a[1]=b[1];return a}function k(a,b,c){a[0]=b;a[1]=c;return a}function l(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a}function m(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}function n(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a}function o(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a}function p(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a}function q(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a}function r(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a}function s(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a}function t(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a}function u(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a}function v(b,c,d,a){b[0]=c[0]+d[0]*a;b[1]=c[1]+d[1]*a;return b}function w(a,b){var c=b[0]-a[0];b=b[1]-a[1];return Math.sqrt(c*c+b*b)}function x(a,b){var c=b[0]-a[0];b=b[1]-a[1];return c*c+b*b}function y(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function z(a){var b=a[0];a=a[1];return b*b+a*a}function A(a,b){a[0]=-b[0];a[1]=-b[1];return a}function B(a,b){a[0]=1/b[0];a[1]=1/b[1];return a}function C(a,b){var c=b[0],d=b[1];c=c*c+d*d;c>0&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a}function D(a,b){return a[0]*b[0]+a[1]*b[1]}function E(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a}function F(a,b,c,d){var e=b[0];b=b[1];a[0]=e+d*(c[0]-e);a[1]=b+d*(c[1]-b);return a}function G(b,a){a=a||1;var c=d.RANDOM()*2*Math.PI;b[0]=Math.cos(c)*a;b[1]=Math.sin(c)*a;return b}function H(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=c[1]*d+c[3]*b;return a}function I(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*b+c[5];return a}function J(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a}function K(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a}function L(a){return"vec2("+a[0]+", "+a[1]+")"}function M(a,b){return a[0]===b[0]&&a[1]===b[1]}function N(a,b){var c=a[0];a=a[1];var e=b[0];b=b[1];return Math.abs(c-e)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}b.len=y;b.sub=m;b.mul=n;b.div=o;b.dist=w;b.sqrDist=x;b.sqrLen=z;b.forEach=function(){var a=g();return function(b,c,d,e,f,g){var h=void 0,i=void 0;c||(c=2);d||(d=0);e?i=Math.min(e*c+d,b.length):i=b.length;for(h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}()}])})}var k=!1,l=function(){k||(k=!0,j());return h.exports};a=function(a){switch(a){case void 0:return l()}};e.exports=a}),null);
__d("gl-matrix",["gl-matrix-2.4.0"],(function(a,b,c,d,e,f){e.exports=b("gl-matrix-2.4.0")()}),null);
__d("radToDeg",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a*180/Math.PI}e.exports=a}),null);
__d("SphericalPhotoProjectionUtils",["degToRad","gl-matrix","radToDeg"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("gl-matrix").glMatrix;var g=b("gl-matrix").mat4,h=b("gl-matrix").vec3;a={getMaxMinVfov:function(a,c){var d=b("degToRad")(a.partialRightDegrees||180),e=b("degToRad")(a.partialLeftDegrees||180),f=b("degToRad")(a.partialTopDegrees||90);a=b("degToRad")(a.partialBottomDegrees||90);d=(d+e)/2;e=(f+a)/2;f=2*Math.atan(d/c);a=this.getMinFullVfov(e,e);return{maxVfov:b("radToDeg")(Math.max(f,a)),minVfov:b("radToDeg")(Math.min(a,f/2))}},getMaxVfov:function(a,b){return this.getMaxMinVfov(a,b).maxVfov},getMinFullVfov:function(a,b){a=(a+b)/2;return 2*Math.atan(a)},getMinFullHfov:function(a,b){a=(a+b)/2;return 2*Math.atan(a)},getZoomProgressFromFov:function(a,b,c){return Math.max(0,Math.min(1,(a-c)/(b-c)))},getZoomProgress:function(a,b,c){b=this.getMaxMinVfov(b,c);c=b.maxVfov;b=b.minVfov;return this.getZoomProgressFromFov(a,c,b)},getHfov:function(a,b){a=2*Math.atan(Math.tan(a/2)*b);return a},normalizeLimits:function(a){__p&&__p();var b=a.partialLeftDegrees||0,c=a.partialRightDegrees||0,d=a.partialTopDegrees||0;a=a.partialBottomDegrees||0;if(b<0&&c<0){var e=Math.max(b,c);b-=e;c-=e}if(d<0&&a<0){e=Math.max(d,a);d-=e;a-=e}return{partialLeftDegrees:b,partialRightDegrees:c,partialTopDegrees:d,partialBottomDegrees:a}},getPartialLimits:function(a,c,d){__p&&__p();var e=this.getMaxMinVfov(d,c),f=e.maxVfov;e=e.minVfov;var g=b("degToRad")(a);c=this.getHfov(g,c);e=this.getZoomProgressFromFov(a,f,e);c=Math.tan(c/2);g=Math.tan(g/2);var h=Math.sin(c)*e+c*(1-e);c=Math.cos(c)*e+1*(1-e);var i=Math.sin(g)*e+g*(1-e);g=Math.cos(g)*e+1*(1-e);e=function(c,d,e){var g=Math.sin(c);c=Math.cos(c);return a>f?0:b("radToDeg")(Math.atan2(g*e-c*d,g*d+c*e))};var j=b("degToRad")(d.partialLeftDegrees||180),k=b("degToRad")(d.partialRightDegrees||180),l=b("degToRad")(d.partialTopDegrees||90);d=b("degToRad")(d.partialBottomDegrees||90);return this.normalizeLimits({partialLeftDegrees:e(j,h,c),partialRightDegrees:e(k,h,c),partialTopDegrees:e(l,i,g),partialBottomDegrees:e(d,i,g)})},projectVertex:function(a,b,c,d){__p&&__p();var e=a[0];a=a[1];var f=c?Math.sin(e):Math.sin(e)*Math.cos(a),g=c?a:Math.sin(a);c=c?Math.cos(e):Math.cos(e)*Math.cos(a);f=d*f+(1-d)*e;g=d*g+(1-d)*a;c=d*c+(1-d)*1;e=h.fromValues(f,g,c);h.transformMat4(e,e,b);return e},getSphericalFromVertex:function(a){var b=a[0],c=a[1];a=a[2];var d=Math.atan2(b,a);c=Math.atan2(c,Math.sqrt(b*b+a*a));return{yaw:d,pitch:c}},getRelativeHfov:function(a,c,d){a=this.getPartialLimits(a,c,d);c=d.partialLeftDegrees||180;d=d.partialRightDegrees||180;var e=a.partialLeftDegrees||0;a=a.partialRightDegrees||0;return b("degToRad")(d-a+c-e)},getRelativeVfov:function(a,c,d){a=this.getPartialLimits(a,c,d);c=d.partialTopDegrees||90;d=d.partialBottomDegrees||90;var e=a.partialTopDegrees||0;a=a.partialBottomDegrees||0;return b("degToRad")(c-e+d-a)},convert2dTo3d:function(a,c,d,e,f,i){__p&&__p();var j=e/f,k=e/2,l=f/2;a=(a-k)*(2/e);k=(c-l)*(2/f);e=b("degToRad")(d.fov);c=this.getHfov(e,j);l=this.getMinFullHfov(b("degToRad")(i.partialLeftDegrees||180),b("degToRad")(i.partialRightDegrees||180));f=Math.tan(e/2);e=Math.tan(c/2);c=Math.tan(Math.min(c,l)/2);l=a*e;a=-k*f;if(l>c||l<-c)return null;e=this.getZoomProgress(d.fov,i,j);k=g.create();g.rotateY(k,k,b("degToRad")(d.yaw));g.rotateX(k,k,-b("degToRad")(d.pitch));f=this.projectVertex(h.fromValues(l,a,-1),k,!1,e);c=this.getSphericalFromVertex(f);i=b("radToDeg")(c.yaw);return{yaw:i<0?360+i:i,pitch:b("radToDeg")(c.pitch)}},convert3dTo2d:function(a,c,d,e,f,i){__p&&__p();a=b("degToRad")(a);c=b("degToRad")(c);var j=b("degToRad")(d.fov),k=e/f,l=this.getHfov(j,k),m=this.getMinFullHfov(b("degToRad")(i.partialLeftDegrees||180),b("degToRad")(i.partialRightDegrees||180)),n=Math.tan(l/2);l=Math.tan(Math.min(l,m)/2);m=l/n;l=this.getMinFullVfov(b("degToRad")(i.partialTopDegrees||90),b("degToRad")(i.partialBottomDegrees||90));n=Math.tan(j/2);j=Math.tan(Math.min(j,l)/2);l=j/n;j=this.getRelativeHfov(d.fov,k,i);n=this.getRelativeVfov(d.fov,k,i);k=g.create();g.rotateY(k,k,b("degToRad")(d.yaw));g.rotateX(k,k,-b("degToRad")(d.pitch));g.invert(k,k);i=a+Math.PI;d=c+Math.PI/2;a=-Math.sin(d)*Math.sin(i);c=-Math.cos(d);d=-Math.sin(d)*Math.cos(i);i=h.fromValues(a,c,d);h.transformMat4(i,i,k);a=Math.atan2(i[0],i[2]);c=Math.atan2(i[1],Math.sqrt(i[0]*i[0]+i[2]*i[2]));d=.5+a*m/j;k=.5-c*l/n;return{x:d*e,y:k*f}}};e.exports=a}),null);
__d("calculateHFOVFromVFOV",["degToRad","radToDeg"],(function(a,b,c,d,e,f){"use strict";a=function(a,c){a=b("radToDeg")(Math.atan(Math.tan(b("degToRad")(a/2))*c)*2);return(a%360+360)%360};e.exports=a}),null);
__d("calculateVFOVFromHFOV",["degToRad","radToDeg"],(function(a,b,c,d,e,f){"use strict";a=function(a,c){a=b("radToDeg")(Math.atan(Math.tan(b("degToRad")(a)/2)/c))*2;return(a%360+360)%360};e.exports=a}),null);
__d("SphericalViewportControl",["csx","cx","invariant","Bootloader","CSS","DOMEventListener","DOMQuery","Event","EventEmitter","Keys","Parent","SphericalPhotoProjectionUtils","SubscriptionsHandler","UserAgent","VelocityTracker","calculateHFOVFromVFOV","calculateVFOVFromHFOV","debounce","degToRad","getElementRect","gkx","performanceNow","queryThenMutateDOM","radToDeg","requestAnimationFrame","throttle","uniqueID"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k=b("DOMQuery").scry(window.document.body,"_li")[0]||window.document.body,l=navigator===void 0||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),m=.6,n=2.5,o=20,p=110,q=179,r=.01,s=1e3,t=.5,u=["W","A","S","D"].reduce(function(a,b){a[b]=b.charCodeAt(0);return a},{}),v={Up:"__tu",Down:"__tz",Left:"_2a6u",Right:"_2a6v",UpLeft:"__t-",UpRight:"__u0",DownLeft:"__u1",DownRight:"__u3"};c=babelHelpers.inherits(a,b("EventEmitter"));j=c&&c.prototype;function a(a,c,d,e,f){__p&&__p();d===void 0&&(d={});e===void 0&&(e=!1);f===void 0&&(f=k);j.constructor.call(this);this.$SphericalViewportControl18=!1;this.$SphericalViewportControl19=!1;this.$SphericalViewportControl20=!1;this.$SphericalViewportControl45=!1;this.$SphericalViewportControl62=!1;this.$SphericalViewportControl64={x:1,y:1};this.$SphericalViewportControl65=!1;this.$SphericalViewportControl66=null;this.$SphericalViewportControl69=!1;this.$SphericalViewportControl70=!0;this.$SphericalViewportControl90=function(a){__p&&__p();a.deliberateSync=!0;if(this.$SphericalViewportControl67){if(a.shiftKey){var c=this.$SphericalViewportControl114(a),d=b("getElementRect")(this.$SphericalViewportControl32);if(c.x>d.left&&c.x<d.right&&c.y>d.top&&c.y<d.bottom){var e=(a.deltaX||0)+(a.deltaY||0)+(a.deltaZ||0),f=.5*(d.left+d.right),g=.5*(d.top+d.bottom);f={x:(c.x-f)/(d.right-d.left),y:(c.y-g)/(d.bottom-d.top)};this.emit("wheelScrollWithShiftKey",e,f)}a.preventDefault()}return}this.$SphericalViewportControl38&&a.preventDefault();this.$SphericalViewportControl124(a);this.$SphericalViewportControl46&&b("Event").kill(a)}.bind(this);this.$SphericalViewportControl127=function(a){this.emit("panningWithRightMouse",this.$SphericalViewportControl111());if(this.$SphericalViewportControl69){this.$SphericalViewportControl66=b("requestAnimationFrame")(this.$SphericalViewportControl127);return}this.emit("updateViewportEnd",this.$SphericalViewportControl26.x,this.$SphericalViewportControl26.y);this.$SphericalViewportControl15=!1;this.$SphericalViewportControl66=null}.bind(this);this.$SphericalViewportControl128=function(a){__p&&__p();var c=(a-this.$SphericalViewportControl59)/1e3;this.$SphericalViewportControl59=a;this.$SphericalViewportControl129();this.$SphericalViewportControl60||b("queryThenMutateDOM")(this.$SphericalViewportControl91.bind(this),function(){return null});a=this.$SphericalViewportControl111();var d=!1;if(this.$SphericalViewportControl42&&this.$SphericalViewportControl54&&this.$SphericalViewportControl47&&!this.$SphericalViewportControl19&&!this.$SphericalViewportControl20){var e=this.$SphericalViewportControl130()*c;a.x+=e;var f=this.$SphericalViewportControl131()*c;a.y+=f;(e||f)&&(d=!0)}a.x+=this.$SphericalViewportControl8.getVelocityX()*c;a.y+=this.$SphericalViewportControl8.getVelocityY()*c;a.x+=this.$SphericalViewportControl9.getVelocityX()*c;a.y+=this.$SphericalViewportControl9.getVelocityY()*c;a.x*=this.$SphericalViewportControl64.x;a.y*=this.$SphericalViewportControl64.y;this.$SphericalViewportControl132(a.x,a.y);e=this.$SphericalViewportControl8.getSpeed()>0||this.$SphericalViewportControl9.getSpeed()>0;if(this.$SphericalViewportControl19||this.$SphericalViewportControl18||this.$SphericalViewportControl20||this.$SphericalViewportControl57||this.$SphericalViewportControl45||e||d)this.$SphericalViewportControl66=b("requestAnimationFrame")(this.$SphericalViewportControl128);else{this.$SphericalViewportControl15=!1;this.$SphericalViewportControl66=null;f={yaw:this.$SphericalViewportControl26.x,pitch:this.$SphericalViewportControl26.y};c=this.getCurrentViewport();this.$SphericalViewportControl4.pitch+=f.pitch-c.pitch;this.$SphericalViewportControl4.yaw-=f.yaw-c.yaw;this.emit("updateViewportEnd",this.$SphericalViewportControl26.x,this.$SphericalViewportControl26.y)}}.bind(this);this.$SphericalViewportControl124=b("throttle")(function(a){this.emit("wheelScroll",a);if(!this.$SphericalViewportControl46)return;a=(a.deltaX||0)+(a.deltaY||0)+(a.deltaZ||0);a=a/120*45/10;this.$SphericalViewportControl99(a)}.bind(this),30);this.$SphericalViewportControl70=d.listenOnlyOneElement==null?!0:d.listenOnlyOneElement;this.$SphericalViewportControl4={pitch:0,yaw:0};this.$SphericalViewportControl5=c.dragVelocityFactor||m;this.$SphericalViewportControl3=!1;this.$SphericalViewportControl8=new(b("VelocityTracker"))(300);this.$SphericalViewportControl9=new(b("VelocityTracker"))(300);this.$SphericalViewportControl13=new(b("SubscriptionsHandler"))();this.$SphericalViewportControl32=a;this.$SphericalViewportControl10=f;this.$SphericalViewportControl51=o;this.$SphericalViewportControl52=p;this.$SphericalViewportControl53=q;this.$SphericalViewportControl63=e;this.$SphericalViewportControl71(c);this.$SphericalViewportControl21={x:0,y:0};this.$SphericalViewportControl59=0;this.$SphericalViewportControl17={left:0,right:0,up:0,down:0};this.$SphericalViewportControl23={x:0,y:0};this.$SphericalViewportControl24={x:0,y:0};this.$SphericalViewportControl25=new(b("VelocityTracker"))();this.$SphericalViewportControl30=new Map();this.$SphericalViewportControl38=!1;this.$SphericalViewportControl22=!1;this.$SphericalViewportControl27=!1;this.$SphericalViewportControl72(d);this.$SphericalViewportControl57=!1;this.$SphericalViewportControl58=0;this.$SphericalViewportControl56=b("debounce")(function(){return this.emit("zoomStart")}.bind(this),s);this.$SphericalViewportControl37=this.$SphericalViewportControl73();this.$SphericalViewportControl61=[];this.$SphericalViewportControl31=this.addNewLayer(this.$SphericalViewportControl32);a=b("gkx")("678913");l&&a&&b("Bootloader").loadModules(["FullTilt"],function(a){a.getDeviceOrientation({type:"game"}).then(function(a){return this.$SphericalViewportControl74(a,c)}.bind(this))["catch"](function(a){return this.$SphericalViewportControl75(a)}.bind(this))}.bind(this),"SphericalViewportControl")}a.prototype.$SphericalViewportControl74=function(a,c){"use strict";if(c.partialLimits){var d=c.partialLimits,e=this.getVerticalFieldOfView(),f=this.getHorizontalFieldOfView();this.$SphericalViewportControl6={top:(d.partialTopDegrees||Infinity)-e/2,bottom:-(d.partialBottomDegrees||Infinity)+e/2,left:-(d.partialLeftDegrees||Infinity)+f/2,right:(d.partialRightDegrees||Infinity)-f/2}}b("Bootloader").loadModules(["MSphericalViewportControlEuler"],function(b){this.$SphericalViewportControl2=new b(a,c,this.$SphericalViewportControl6),this.$SphericalViewportControl2.setActive(!0),this.$SphericalViewportControl1=a,this.$SphericalViewportControl1.start(function(){return this.$SphericalViewportControl76()}.bind(this)),this.$SphericalViewportControl3=!0}.bind(this),"SphericalViewportControl")};a.prototype.$SphericalViewportControl76=function(){"use strict";var a={yaw:b("degToRad")(this.$SphericalViewportControl4.yaw-this.$SphericalViewportControl28.x),pitch:b("degToRad")(this.$SphericalViewportControl4.pitch+this.$SphericalViewportControl28.y)};this.$SphericalViewportControl2.onSensorUpdate();this.$SphericalViewportControl2.getRotationMatrix(a);a=this.getCurrentViewport();this.$SphericalViewportControl15||this.emit("viewportChange",a.yaw,a.pitch,this.$SphericalViewportControl11)};a.prototype.getCurrentViewport=function(){"use strict";var a={yaw:b("degToRad")(this.$SphericalViewportControl4.yaw-this.$SphericalViewportControl28.x),pitch:b("degToRad")(this.$SphericalViewportControl4.pitch+this.$SphericalViewportControl28.y)};return!this.$SphericalViewportControl3?{pitch:b("radToDeg")(a.pitch),yaw:b("radToDeg")(a.yaw)}:this.$SphericalViewportControl2.getCurrentViewport(a)||{pitch:b("radToDeg")(a.pitch),yaw:b("radToDeg")(a.yaw)}};a.prototype.$SphericalViewportControl75=function(a){"use strict";this.emit("sensorSetupError",{error:"SPHERICAL_GYROSCOPE_SETUP_FAILED",message:a})};a.prototype.isListening=function(a){"use strict";return!this.$SphericalViewportControl70||Boolean(this.getSubscriptionKeyFromElement(a))};a.prototype.getSubscriptionKeyFromElement=function(a){"use strict";__p&&__p();for(var b=this.$SphericalViewportControl30,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];if(e.element===a)return f}return null};a.prototype.addNewLayer=function(a){"use strict";var c=this.getSubscriptionKeyFromElement(a);if(!c){c=b("uniqueID")();var d=new(b("SubscriptionsHandler"))();this.$SphericalViewportControl77(d,a);this.$SphericalViewportControl30.set(c,{handler:d,element:a})}return c};a.prototype.removeLayer=function(a){"use strict";var b=this.$SphericalViewportControl30.get(a);b&&(b.handler.release(),this.$SphericalViewportControl30["delete"](a))};a.prototype.destroy=function(){"use strict";this.removeAllListeners(),this.getSubscriptions().remove()};a.prototype.$SphericalViewportControl77=function(a,c){"use strict";__p&&__p();a.addSubscriptions(b("Event").listen(c,"mousedown",function(a){return this.$SphericalViewportControl78(a)}.bind(this)),b("Event").listen(c,"mouseenter",function(a){return this.$SphericalViewportControl79(a,c)}.bind(this)),b("Event").listen(c,"mouseleave",function(a){return this.$SphericalViewportControl80(a,c)}.bind(this)),b("Event").listen(c,"mousemove",function(a){return this.$SphericalViewportControl81(a)}.bind(this)),b("Event").listen(c,"mouseup",function(a){return this.$SphericalViewportControl82(a)}.bind(this)),b("Event").listen(c,"click",function(a){return this.$SphericalViewportControl83(a)}.bind(this)),b("Event").listen(c,"keydown",function(a){return this.$SphericalViewportControl84(a)}.bind(this)),b("Event").listen(c,"keyup",function(a){return this.$SphericalViewportControl85(a)}.bind(this)),b("Event").listen(c,"blur",function(a){return this.$SphericalViewportControl86(a)}.bind(this)),b("Event").listen(c,"touchstart",function(a){return this.$SphericalViewportControl87(a)}.bind(this)),b("Event").listen(c,"touchmove",function(a){return this.$SphericalViewportControl88(a)}.bind(this)),b("Event").listen(c,"touchend",function(a){return this.$SphericalViewportControl89(a)}.bind(this)),b("Event").listen(c,"touchcancel",function(a){return this.$SphericalViewportControl89(a)}.bind(this)),{remove:function(){b("DOMEventListener").remove(c,"wheel",function(a){return this.$SphericalViewportControl90(a)}.bind(this),{passive:!1})}.bind(this)})};a.prototype.$SphericalViewportControl71=function(a){"use strict";__p&&__p();this.$SphericalViewportControl91();this.$SphericalViewportControl7=this.$SphericalViewportControl34/this.$SphericalViewportControl35;var b=a.fieldOfView;this.$SphericalViewportControl46=Boolean(a.enableZoom);this.$SphericalViewportControl29=(a.panningVelocityFactor||0)/15*80||80;this.$SphericalViewportControl16=(a.keyboardVelocityFactor||0)*1e3||80;a.partialLimits?(this.$SphericalViewportControl39=a.partialLimits,this.$SphericalViewportControl42=!0):(this.$SphericalViewportControl42=!1,this.$SphericalViewportControl39={partialLeftDegrees:null,partialRightDegrees:null,partialTopDegrees:null,partialBottomDegrees:null});this.$SphericalViewportControl40=this.$SphericalViewportControl39;this.$SphericalViewportControl41=1;this.$SphericalViewportControl63&&(this.$SphericalViewportControl42=!0);this.$SphericalViewportControl28={x:a.initialHeading,y:a.initialPitch};a=this.$SphericalViewportControl39;var c=a.partialTopDegrees;a=a.partialBottomDegrees;if(!this.$SphericalViewportControl63&&(c||c===0)&&(a||a===0)){c=c;a=a;var d=c+a;b>d&&(b=d,this.$SphericalViewportControl28.y=(c-a)/2)}this.$SphericalViewportControl11=this.$SphericalViewportControl92(b);this.$SphericalViewportControl12=this.$SphericalViewportControl11;this.$SphericalViewportControl93();this.$SphericalViewportControl26={x:this.$SphericalViewportControl28.x,y:this.$SphericalViewportControl28.y}};a.prototype.$SphericalViewportControl72=function(a){a===void 0&&(a={}),this.$SphericalViewportControl43=a.enableGyro||!1,this.$SphericalViewportControl44=a.slipFactor||0,this.$SphericalViewportControl47=a.springFactor||0,this.$SphericalViewportControl48=a.maxSpringDegrees||15,this.$SphericalViewportControl49=a.maxStretchXDegrees||20,this.$SphericalViewportControl50=a.maxStretchYDegrees||20,this.$SphericalViewportControl55=a.rubberBandConstant||0,this.$SphericalViewportControl54=a.enableRubberBanding||!1,this.$SphericalViewportControl67=a.enableZoomWithShiftKey||!1,this.$SphericalViewportControl68=a.enablePanningWithRightMouse||!1,this.$SphericalViewportControl60=a.disableAutoClientSizeUpdate||!1};a.prototype.reconfigure=function(a){"use strict";this.$SphericalViewportControl71(a)};a.prototype.reconfigureControlConfig=function(a){a===void 0&&(a={}),this.$SphericalViewportControl72(a)};a.prototype.setEnableGyro=function(a){"use strict";this.$SphericalViewportControl43=a};a.prototype.$SphericalViewportControl78=function(a){"use strict";this.$SphericalViewportControl65&&this.$SphericalViewportControl94(),this.isListening(a.target)&&(this.$SphericalViewportControl19=!0,this.$SphericalViewportControl95(a))};a.prototype.$SphericalViewportControl87=function(a){"use strict";this.$SphericalViewportControl62=!1,this.$SphericalViewportControl65&&this.$SphericalViewportControl94(),this.$SphericalViewportControl20?(this.$SphericalViewportControl96(a),this.$SphericalViewportControl20=!1):this.$SphericalViewportControl20=!0,this.$SphericalViewportControl95(a)};a.prototype.$SphericalViewportControl96=function(a){"use strict";a.touches.length===2&&this.$SphericalViewportControl46&&(this.$SphericalViewportControl57=!0,this.$SphericalViewportControl58=this.$SphericalViewportControl97(a))};a.prototype.$SphericalViewportControl88=function(a){"use strict";this.$SphericalViewportControl62=!0,this.$SphericalViewportControl57&&(this.$SphericalViewportControl98(a),this.$SphericalViewportControl46&&b("Event").kill(a))};a.prototype.$SphericalViewportControl98=function(a){"use strict";a=this.$SphericalViewportControl97(a);var b=this.$SphericalViewportControl11*(this.$SphericalViewportControl58/a);b=b-this.$SphericalViewportControl11;this.$SphericalViewportControl99(b);this.$SphericalViewportControl58=a};a.prototype.$SphericalViewportControl97=function(a){"use strict";var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;return Math.sqrt(Math.pow(b,2)+Math.pow(a,2))};a.prototype.$SphericalViewportControl89=function(a){"use strict";this.$SphericalViewportControl62||(a.target.focus(a),this.$SphericalViewportControl83(a)),this.$SphericalViewportControl57?this.$SphericalViewportControl57=!1:this.$SphericalViewportControl20&&this.$SphericalViewportControl100(a)};a.prototype.$SphericalViewportControl95=function(a){"use strict";this.emit("onMovementStart"),this.$SphericalViewportControl101(),this.$SphericalViewportControl102(a),this.$SphericalViewportControl103(a),this.$SphericalViewportControl68&&(a.which===3||a.button===2)&&(this.$SphericalViewportControl69=!0,this.$SphericalViewportControl15=!1),this.$SphericalViewportControl104(),a.preventDefault()};a.prototype.$SphericalViewportControl100=function(a){"use strict";this.$SphericalViewportControl45&&!this.$SphericalViewportControl19&&(this.$SphericalViewportControl105(),this.$SphericalViewportControl45=!1)};a.prototype.$SphericalViewportControl106=function(a){"use strict";this.$SphericalViewportControl65&&this.$SphericalViewportControl94()};a.prototype.$SphericalViewportControl107=function(a){"use strict";this.$SphericalViewportControl103(a),this.$SphericalViewportControl14=!0,this.emit("updateViewportMove")};a.prototype.$SphericalViewportControl108=function(a){"use strict";this.$SphericalViewportControl45&&(this.$SphericalViewportControl109(a),this.emit("updateViewportMove"))};a.prototype.$SphericalViewportControl101=function(){"use strict";this.$SphericalViewportControl15=!1,this.$SphericalViewportControl45=!1,this.$SphericalViewportControl43=!1};a.prototype.$SphericalViewportControl110=function(a){"use strict";this.$SphericalViewportControl103(a),this.$SphericalViewportControl111(),this.$SphericalViewportControl94(),this.$SphericalViewportControl105(),a.preventDefault()};a.prototype.$SphericalViewportControl94=function(a){"use strict";this.$SphericalViewportControl65=!1,b("queryThenMutateDOM")(function(){},function(){return this.$SphericalViewportControl32.style.cursor=""}.bind(this)),this.$SphericalViewportControl20=!1,this.$SphericalViewportControl19=!1,this.$SphericalViewportControl69=!1,this.$SphericalViewportControl13.release(),this.$SphericalViewportControl36&&(b("CSS").removeClass(this.$SphericalViewportControl10,this.$SphericalViewportControl36),this.$SphericalViewportControl36="")};a.prototype.$SphericalViewportControl112=function(a){"use strict";if(this.$SphericalViewportControl20&&a.changedTouches)return a.changedTouches[0];else if(this.$SphericalViewportControl19)return a;else if(this.$SphericalViewportControl45)return a;return null};a.prototype.setMovementPosition=function(a){"use strict";this.$SphericalViewportControl23=this.$SphericalViewportControl113(a)};a.prototype.$SphericalViewportControl113=function(a){"use strict";a=this.$SphericalViewportControl112(a);return!a?this.$SphericalViewportControl23:{x:a.screenX,y:a.screenY}};a.prototype.$SphericalViewportControl114=function(a){"use strict";a=this.$SphericalViewportControl112(a);return!a?this.$SphericalViewportControl24:{x:a.clientX,y:a.clientY}};a.prototype.$SphericalViewportControl102=function(a){"use strict";__p&&__p();this.$SphericalViewportControl65=!0;this.$SphericalViewportControl23=this.$SphericalViewportControl113(a);this.$SphericalViewportControl21={x:0,y:0};this.$SphericalViewportControl25=new(b("VelocityTracker"))();this.$SphericalViewportControl9=new(b("VelocityTracker"))(300);b("queryThenMutateDOM")(function(){},function(){return this.$SphericalViewportControl32.style.cursor=this.$SphericalViewportControl37}.bind(this));this.$SphericalViewportControl13.engage();a=this.$SphericalViewportControl10;this.$SphericalViewportControl20?this.$SphericalViewportControl13.addSubscriptions(b("Event").listen(a,"touchmove",function(a){return this.$SphericalViewportControl107(a)}.bind(this)),b("Event").listen(a,"touchend",function(a){return this.$SphericalViewportControl110(a)}.bind(this)),b("Event").listen(a,"touchcancel",function(a){return this.$SphericalViewportControl106(a)}.bind(this))):this.$SphericalViewportControl13.addSubscriptions(b("Event").listen(a,"mousemove",function(a){return this.$SphericalViewportControl107(a)}.bind(this)),b("Event").listen(a,"mouseup",function(a){return this.$SphericalViewportControl110(a)}.bind(this)),b("Event").listen(a,"mouseleave",function(a){return this.$SphericalViewportControl106(a)}.bind(this)))};a.prototype.$SphericalViewportControl109=function(a){"use strict";this.$SphericalViewportControl115(a,this.$SphericalViewportControl44)};a.prototype.$SphericalViewportControl103=function(a){"use strict";this.$SphericalViewportControl115(a,1)};a.prototype.reEnableGyro=function(){"use strict";this.$SphericalViewportControl21={x:0,y:0},this.$SphericalViewportControl43=!0,this.$SphericalViewportControl45=!0,this.$SphericalViewportControl94()};a.prototype.$SphericalViewportControl115=function(a,b){"use strict";var c=this.$SphericalViewportControl113(a),d=c.x-this.$SphericalViewportControl23.x,e=c.y-this.$SphericalViewportControl23.y,f=this.$SphericalViewportControl22?{x:0,y:0}:this.$SphericalViewportControl21;this.$SphericalViewportControl21={x:b*(c.x-this.$SphericalViewportControl23.x)+f.x,y:b*(c.y-this.$SphericalViewportControl23.y)+f.y};this.$SphericalViewportControl4.yaw+=d*this.$SphericalViewportControl5;this.$SphericalViewportControl4.pitch+=e*this.$SphericalViewportControl5;this.$SphericalViewportControl22=!1;this.$SphericalViewportControl23=c;this.$SphericalViewportControl25.update(c.x,c.y);this.$SphericalViewportControl24=this.$SphericalViewportControl114(a)};a.prototype.$SphericalViewportControl116=function(){"use strict";var a=this.$SphericalViewportControl117(),b=-this.$SphericalViewportControl25.getVelocityX()*a;a=this.$SphericalViewportControl25.getVelocityY()*a;var c=this.$SphericalViewportControl45?this.$SphericalViewportControl44:1;this.$SphericalViewportControl118()&&(b=-b);return{x:b*c,y:a*c}};a.prototype.$SphericalViewportControl119=function(a,c){"use strict";return b("radToDeg")(Math.atan(a/c))};a.prototype.$SphericalViewportControl120=function(a,b,c){"use strict";return{x:this.$SphericalViewportControl119(a.x-this.$SphericalViewportControl34/2,c),y:-this.$SphericalViewportControl119(a.y-this.$SphericalViewportControl35/2,b)}};a.prototype.$SphericalViewportControl121=function(a,c){"use strict";__p&&__p();var d={x:a.x-c.x,y:a.y-c.y},e=this.$SphericalViewportControl35/(2*Math.tan(b("degToRad")(this.getVerticalFieldOfView()/2))),f=e*Math.cos(b("degToRad")(this.$SphericalViewportControl26.y));f=f-(this.$SphericalViewportControl35/2-a.y)*Math.sin(b("degToRad")(this.$SphericalViewportControl26.y));if(this.$SphericalViewportControl26.y==-90&&c.y<0||this.$SphericalViewportControl26.y==90&&c.y>0){c=this.$SphericalViewportControl119(d.y-this.$SphericalViewportControl35/2,d.x-this.$SphericalViewportControl34/2);var g=this.$SphericalViewportControl119(a.y-this.$SphericalViewportControl35/2,a.x-this.$SphericalViewportControl34/2);g=g-c;g>90?g=180-g:g<-90&&(g=180+g);return{x:g*Math.sign(this.$SphericalViewportControl26.y),y:0}}else{c=this.$SphericalViewportControl120(d,e,f);g=this.$SphericalViewportControl120(a,e,f);return{x:c.x-g.x,y:c.y-g.y}}};a.prototype.$SphericalViewportControl118=function(){"use strict";var a=this.$SphericalViewportControl33?this.$SphericalViewportControl33.top:b("getElementRect")(this.$SphericalViewportControl32).top;a=this.$SphericalViewportControl24.y-a;var c=this.$SphericalViewportControl35/(2*Math.tan(b("degToRad")(this.getVerticalFieldOfView()/2)));c=-c/Math.tan(b("degToRad")(this.$SphericalViewportControl26.y))+this.$SphericalViewportControl35/2;a=a>c&&this.$SphericalViewportControl26.y<0||a<c&&this.$SphericalViewportControl26.y>0;return a};a.prototype.$SphericalViewportControl111=function(){"use strict";__p&&__p();if(this.$SphericalViewportControl69){var a={x:0,y:0};this.$SphericalViewportControl22||(this.$SphericalViewportControl22=!0,a.x=this.$SphericalViewportControl21.x/this.$SphericalViewportControl34,a.y=this.$SphericalViewportControl21.y/this.$SphericalViewportControl35);return a}a={x:0,y:0};if(!this.$SphericalViewportControl22){this.$SphericalViewportControl22=!0;var b=this.$SphericalViewportControl33,c=this.$SphericalViewportControl24.x<b.left,d=this.$SphericalViewportControl24.x>b.right,e=this.$SphericalViewportControl24.y<b.top,f=this.$SphericalViewportControl24.y>b.bottom;this.$SphericalViewportControl122(c,d,e,f);b={x:this.$SphericalViewportControl24.x-b.left,y:this.$SphericalViewportControl24.y-b.top};!c&&!d?a.x=this.$SphericalViewportControl121(b,this.$SphericalViewportControl21).x:a.x=-this.$SphericalViewportControl21.x*this.$SphericalViewportControl117()*t;!e&&!f?a.y=this.$SphericalViewportControl121(b,this.$SphericalViewportControl21).y:a.y=this.$SphericalViewportControl21.y*this.$SphericalViewportControl117()*t}this.$SphericalViewportControl9.updateVelocity(0,0);return this.$SphericalViewportControl123(a)};a.prototype.$SphericalViewportControl123=function(a){"use strict";__p&&__p();if(!this.$SphericalViewportControl54||!this.$SphericalViewportControl42)return a;var b=this.$SphericalViewportControl26,c=b.x;b=b.y;var d=this.$SphericalViewportControl40,e=d.partialLeftDegrees,f=d.partialRightDegrees,g=d.partialTopDegrees;d=d.partialBottomDegrees;var h=a.x;a=a.y;var i=c+h;b=b+a;var j=!0,k=!0;if(this.$SphericalViewportControl63){var l=this.$SphericalViewportControl39.partialLeftDegrees,m=this.$SphericalViewportControl39.partialRightDegrees,n=this.$SphericalViewportControl41===0;(i<180&&h<0||i>180&&h>0)&&(i=c-h);(l!=null||!n)&&e!=null&&(j=e<0?(i<180?i+360:i)>360-e:i>360-e);(m!=null||!n)&&f!=null&&(k=f<0?(i<180?i+360:i)<360+f:(i>180?360-i:i)<f);c=g!=null?b<g:!0;l=d!=null?b>-d:!0}else{m=this.getVerticalFieldOfView();n=this.getHorizontalFieldOfView();var o=i<180?i+360:i;i=i>180?i-360:i;j=e!=null?o>360-e+n/2:!0;k=f!=null?i<f-n/2:!0;c=g!=null?b<g-m/2:!0;l=d!=null?b>-d+m/2:!0}!j&&!k&&(h*=this.$SphericalViewportControl55);(!c||!l)&&(a*=this.$SphericalViewportControl55);return{x:h,y:a}};a.prototype.$SphericalViewportControl79=function(a,c){"use strict";b("DOMEventListener").add(c,"wheel",this.$SphericalViewportControl90,{passive:!1}),this.emit("mouseEnter"),this.$SphericalViewportControl19?this.$SphericalViewportControl9=new(b("VelocityTracker"))(300):this.$SphericalViewportControl43&&this.$SphericalViewportControl44&&(this.$SphericalViewportControl9=new(b("VelocityTracker"))(300),this.$SphericalViewportControl45=!0,this.$SphericalViewportControl23=this.$SphericalViewportControl113(a),this.$SphericalViewportControl21={x:0,y:0},this.$SphericalViewportControl104())};a.prototype.$SphericalViewportControl80=function(a,c){"use strict";b("DOMEventListener").remove(c,"wheel",this.$SphericalViewportControl90,{passive:!1}),this.emit("mouseLeave",a),this.$SphericalViewportControl100(a)};a.prototype.$SphericalViewportControl81=function(a){"use strict";this.emit("mouseMove",a),this.$SphericalViewportControl43&&this.$SphericalViewportControl108(a)};a.prototype.$SphericalViewportControl82=function(a){"use strict";this.emit("mouseUp",a)};a.prototype.$SphericalViewportControl83=function(a){"use strict";__p&&__p();if(this.isListening(a.target)){a.target.focus();var c=b("Parent").bySelector(a.target,"._24cp");if(!this.$SphericalViewportControl14){this.emit("DOM/click",a);if(c)return!0}this.$SphericalViewportControl14=!1}return!1};a.prototype.$SphericalViewportControl99=function(a){"use strict";a=this.setFieldOfView(this.$SphericalViewportControl11+a);a&&this.$SphericalViewportControl56()};a.prototype.disableKeyboard=function(){"use strict";this.$SphericalViewportControl27=!0};a.prototype.enableKeyboard=function(){"use strict";this.$SphericalViewportControl27=!1};a.prototype.$SphericalViewportControl84=function(a){"use strict";a=this.$SphericalViewportControl125(a);if(a&&!this.$SphericalViewportControl27){this.$SphericalViewportControl17[a]=1;this.$SphericalViewportControl18||(this.$SphericalViewportControl18=!0,this.$SphericalViewportControl101(),this.$SphericalViewportControl104(),this.emit("updateViewportMove"));return!1}return!0};a.prototype.$SphericalViewportControl85=function(a){"use strict";__p&&__p();a=this.$SphericalViewportControl125(a);if(a&&!this.$SphericalViewportControl27){this.$SphericalViewportControl17[a]=0;a=!1;for(var b in this.$SphericalViewportControl17)if(Object.prototype.hasOwnProperty.call(this.$SphericalViewportControl17,b)&&this.$SphericalViewportControl17[b]>0){a=!0;break}this.$SphericalViewportControl18=a;return!1}return!0};a.prototype.$SphericalViewportControl105=function(){"use strict";var a=this.$SphericalViewportControl116();this.$SphericalViewportControl9=new(b("VelocityTracker"))(300,a)};a.prototype.$SphericalViewportControl104=function(){"use strict";__p&&__p();if(!this.$SphericalViewportControl15){this.$SphericalViewportControl60&&this.$SphericalViewportControl126();this.$SphericalViewportControl15=!0;this.$SphericalViewportControl8.updateVelocity(0,0);this.emit("updateViewportBegin",this.$SphericalViewportControl26.x,this.$SphericalViewportControl26.y);var a=this.once("updateViewportMove",function(){return this.emit("updateViewportMoveStart",this.$SphericalViewportControl45)}.bind(this));this.once("updateViewportEnd",function(){return a.remove()});this.$SphericalViewportControl59=b("performanceNow")();if(this.$SphericalViewportControl69){this.$SphericalViewportControl66&&cancelAnimationFrame(this.$SphericalViewportControl66);this.$SphericalViewportControl66=b("requestAnimationFrame")(this.$SphericalViewportControl127);return}this.$SphericalViewportControl66||(this.$SphericalViewportControl66=b("requestAnimationFrame")(this.$SphericalViewportControl128))}};a.prototype.$SphericalViewportControl126=function(){"use strict";this.$SphericalViewportControl33=b("getElementRect")(this.$SphericalViewportControl32)};a.prototype.updateViewportClientSize=function(a){"use strict";this.$SphericalViewportControl34=a.width,this.$SphericalViewportControl35=a.height};a.prototype.updateMinVFOV=function(a){"use strict";this.$SphericalViewportControl51=Math.max(n,Math.min(o,a))};a.prototype.updateMaxVFOV=function(a){"use strict";this.$SphericalViewportControl52=a};a.prototype.updateMaxHFOV=function(a){"use strict";this.$SphericalViewportControl53=a};a.prototype.$SphericalViewportControl91=function(){"use strict";this.$SphericalViewportControl33=b("getElementRect")(this.$SphericalViewportControl32),this.$SphericalViewportControl34=this.$SphericalViewportControl32.clientWidth||1,this.$SphericalViewportControl35=this.$SphericalViewportControl32.clientHeight||1};a.prototype.setAngularVelocityScaleFactor=function(a){"use strict";this.$SphericalViewportControl64=a};a.prototype.$SphericalViewportControl130=function(){"use strict";__p&&__p();var a=180,b=0,c=this.$SphericalViewportControl40,d=c.partialLeftDegrees;c=c.partialRightDegrees;d!=null&&c!=null&&(a=(c-d)/2+180);if(this.$SphericalViewportControl63){var e=this.$SphericalViewportControl39.partialLeftDegrees,f=this.$SphericalViewportControl39.partialRightDegrees,g=this.$SphericalViewportControl41===0;if((e!=null||!g)&&d!=null){e=d<0&&this.$SphericalViewportControl26.x<180?this.$SphericalViewportControl26.x+360:this.$SphericalViewportControl26.x;if(e>a){e=360-d-e;e>0&&(b=Math.min(e,this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}}if((f!=null||!g)&&c!=null){e=c<0&&this.$SphericalViewportControl26.x>180?this.$SphericalViewportControl26.x-360:this.$SphericalViewportControl26.x;if(e<a){f=c-e;f<0&&(b=Math.max(f,-this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}}}else{g=this.getHorizontalFieldOfView();e=this.$SphericalViewportControl26.x<180?this.$SphericalViewportControl26.x+360:this.$SphericalViewportControl26.x;f=this.$SphericalViewportControl26.x>180?this.$SphericalViewportControl26.x-360:this.$SphericalViewportControl26.x;if(d!=null&&c!=null&&d+c<g){var h=(c-d)/2-f;h>0?b=Math.min(h,this.$SphericalViewportControl48)*this.$SphericalViewportControl47:h<0&&(b=Math.max(h,-this.$SphericalViewportControl48)*this.$SphericalViewportControl47);return Math.abs(b)<r?0:b}if(d!=null&&e>=a){h=360-d+g/2-e;h>0&&(b=Math.min(h,this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}if(c!=null&&f<=a){d=c-g/2-f;d<0&&(b=Math.max(d,-this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}}return Math.abs(b)<r?0:b};a.prototype.$SphericalViewportControl131=function(){"use strict";__p&&__p();var a=0,b=0,c=this.$SphericalViewportControl40,d=c.partialTopDegrees;c=c.partialBottomDegrees;if(this.$SphericalViewportControl63){if(c!=null&&d!=null){if(c<0&&d<-c||d<0&&-d>c)return 0;b=(d-c)/2}if(d!=null&&this.$SphericalViewportControl26.y>b){var e=d-this.$SphericalViewportControl26.y;e<0&&(a=Math.max(e,-this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}if(c!=null&&this.$SphericalViewportControl26.y<b){e=-c-this.$SphericalViewportControl26.y;e>0&&(a=Math.min(e,this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}}else{b=this.getVerticalFieldOfView();if(c!=null&&d!=null&&c+d<b){e=(d-c)/2-this.$SphericalViewportControl26.y;e>0?a=Math.min(e,this.$SphericalViewportControl48)*this.$SphericalViewportControl47:e<0&&(a=Math.max(e,-this.$SphericalViewportControl48)*this.$SphericalViewportControl47);return Math.abs(a)<r?0:a}if(d!=null){e=d-b/2-this.$SphericalViewportControl26.y;e<0&&(a=Math.max(e,-this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}if(c!=null){d=-c+b/2-this.$SphericalViewportControl26.y;d>0&&(a=Math.min(d,this.$SphericalViewportControl48)*this.$SphericalViewportControl47)}}return Math.abs(a)<r?0:a};a.prototype.$SphericalViewportControl122=function(a,c,d,e){"use strict";var f="";if(a||c||d||e){a=a?"Left":c?"Right":"";c=d?"Up":e?"Down":"";f=v[c+a]}this.$SphericalViewportControl36!=f&&(this.$SphericalViewportControl36&&(b("CSS").removeClass(this.$SphericalViewportControl10,this.$SphericalViewportControl36),this.$SphericalViewportControl36=""),f&&(this.$SphericalViewportControl36=f,b("CSS").addClass(this.$SphericalViewportControl10,f)))};a.prototype.getSubscriptions=function(){"use strict";return{remove:function(){this.$SphericalViewportControl30.forEach(function(a){a=a.handler;return a.release()}),this.$SphericalViewportControl30.clear(),this.$SphericalViewportControl13.release()}.bind(this)}};a.prototype.$SphericalViewportControl86=function(a){"use strict";for(var b in this.$SphericalViewportControl17)this.$SphericalViewportControl17[b]=0;this.$SphericalViewportControl18=!1};a.prototype.getOrientation=function(){"use strict";return this.$SphericalViewportControl26};a.prototype.$SphericalViewportControl93=function(a){"use strict";if(this.$SphericalViewportControl63){a=a!=null?a:this.getVerticalFieldOfView();var c=this.getAspectRatio();this.$SphericalViewportControl40=b("SphericalPhotoProjectionUtils").getPartialLimits(a,c,this.$SphericalViewportControl39);this.$SphericalViewportControl41=b("SphericalPhotoProjectionUtils").getZoomProgress(a,this.$SphericalViewportControl39,c)}};a.prototype.$SphericalViewportControl133=function(a,b){"use strict";__p&&__p();a=(a+360)%360;b=Math.max(-90,Math.min(90,b));if(!this.$SphericalViewportControl42)return{x:a,y:b};var c=this.$SphericalViewportControl39.partialLeftDegrees,d=this.$SphericalViewportControl39.partialRightDegrees,e=this.$SphericalViewportControl41===0,f=this.$SphericalViewportControl40.partialLeftDegrees,g=this.$SphericalViewportControl40.partialRightDegrees,h=this.$SphericalViewportControl40.partialTopDegrees,i=this.$SphericalViewportControl40.partialBottomDegrees,j=this.getVerticalFieldOfView(),k=this.getHorizontalFieldOfView(),l=0,m=0;if(this.$SphericalViewportControl63)this.$SphericalViewportControl54&&(f!=null&&g!=null&&(l=Math.min(Math.abs((f+g)/2),this.$SphericalViewportControl49)),h!=null&&i!=null&&h>=-i&&(m=Math.min(Math.abs((h+i)/2),this.$SphericalViewportControl50))),(c!=null||!e)&&f!=null&&(f<0?a=Math.max(a>180?a:a+360,360-f-l)%360:a>180&&(a=Math.max(a,360-f-l))),(d!=null||!e)&&g!=null&&(g<0?a=Math.min(a<180?a+360:a,360+g+l)%360:a<180&&(a=Math.min(a,g+l))),h!=null&&(i!=null&&h<0&&-h>i?b=Math.min(b,-i):b=Math.min(b,h+m)),i!=null&&(h!=null&&i<0&&h<-i?b=Math.max(b,h):b=Math.max(b,-i-m));else{this.$SphericalViewportControl54&&(l=this.$SphericalViewportControl49,m=this.$SphericalViewportControl50);if(f!=null&&g!=null&&f+g<k){c=(g-f)/2;d=a>180?a-360:a;d<c?a=Math.max(d,c-l):a=Math.min(d,c+l)}else f!=null&&(a=a<=180?a:Math.max(a,360-f+k/2-l)),g!=null&&(a=a>=180?a:Math.min(a,g-k/2+l));if(h!=null&&i!=null&&h+i<j){e=(h-i)/2;b<e?b=Math.max(b,e-m):b=Math.min(b,e+m)}else h!=null&&(b=Math.min(b,h-j/2+m)),i!=null&&(b=Math.max(b,-i+j/2-m))}return{x:a,y:b}};a.prototype.setInitialOrientation=function(){"use strict";var a=this.$SphericalViewportControl133(0,0),b=a.x;a=a.y;var c=!Number.isNaN(b+a)&&(b!==this.$SphericalViewportControl26.x||a!==this.$SphericalViewportControl26.y);c&&(this.$SphericalViewportControl26={x:b,y:a},this.emit("initialViewportChange",b,a),this.emit("viewportChange",b,a,this.$SphericalViewportControl11))};a.prototype.setSphericalOrientation=function(a,b){"use strict";a===null&&(a=this.$SphericalViewportControl26.x);b===null&&(b=this.$SphericalViewportControl26.y);typeof a==="number"&&typeof b==="number"||i(0,4346);a=this.$SphericalViewportControl133(a,b);b=a.x;a=a.y;var c=!Number.isNaN(b+a)&&(b!==this.$SphericalViewportControl26.x||a!==this.$SphericalViewportControl26.y);c&&(this.$SphericalViewportControl26={x:b,y:a},this.emit("viewportChange",b,a,this.$SphericalViewportControl11))};a.prototype.setRelativeSphericalOrientation=function(a,b){"use strict";this.setSphericalOrientation(a+this.$SphericalViewportControl28.x,b+this.$SphericalViewportControl28.y)};a.prototype.$SphericalViewportControl132=function(a,b){"use strict";this.setSphericalOrientation(this.$SphericalViewportControl26.x+a,this.$SphericalViewportControl26.y+b)};a.prototype.$SphericalViewportControl92=function(a){"use strict";__p&&__p();if(this.$SphericalViewportControl63){var c=b("SphericalPhotoProjectionUtils").getMaxVfov(this.$SphericalViewportControl39,this.getAspectRatio());return Math.min(c,Math.max(this.$SphericalViewportControl51,a))}else{c=Math.min(b("calculateVFOVFromHFOV")(this.$SphericalViewportControl53,this.getAspectRatio()),this.$SphericalViewportControl52);if(this.$SphericalViewportControl42&&this.$SphericalViewportControl39){var d=this.$SphericalViewportControl39.partialTopDegrees||this.$SphericalViewportControl39.partialTopDegrees===0,e=this.$SphericalViewportControl39.partialBottomDegrees||this.$SphericalViewportControl39.partialBottomDegrees===0;if(d&&e){d=this.$SphericalViewportControl39.partialTopDegrees||0;e=this.$SphericalViewportControl39.partialBottomDegrees||0;c=Math.min(c,d+e)}}return Math.min(c,Math.max(this.$SphericalViewportControl51,a))}};a.prototype.setFieldOfView=function(a){"use strict";__p&&__p();var c=this.$SphericalViewportControl11;a=this.$SphericalViewportControl92(a);this.$SphericalViewportControl93(a);var d=this.$SphericalViewportControl40,e=d.partialTopDegrees,f=d.partialBottomDegrees,g=d.partialLeftDegrees;d=d.partialRightDegrees;var h=e||e===0,i=f||f===0,j=g||g===0,k=d||d===0,l=g||d;e=e||0;f=f||0;g=g||0;d=d||0;var m=!1,n=this.$SphericalViewportControl26.x,o=this.$SphericalViewportControl26.y;if(this.$SphericalViewportControl63){e=h?e:90;f=i?f:90;g=j?g:180;d=k?d:180;-o>f&&(f<0&&e<-f?o=e:o=-f,m=!0);o>e&&(e<0&&e<-f?o=-f:o=e,m=!0);j=((d-g)/2+180)%360;n>j&&360-n>g&&(n=360-g,m=!0);n<j&&n>d&&(n=d,m=!0)}else{k=b("calculateHFOVFromVFOV")(a,this.getAspectRatio());i&&a/2-o>f&&(o=a/2-f,m=!0);h&&o+a/2>e&&(o=e-a/2,m=!0);h&&i&&e+f<a&&(o=(e-f)/2,m=!0);if(l){j=((d-g)/2+180)%360;n>j&&k/2+360-n>g&&(n=360+k/2-g,m=!0);n<j&&n+k/2>d&&(n=d-k/2,m=!0);g+d<k&&(n=(d-g)/2%360,m=!0)}}!this.$SphericalViewportControl19&&!this.$SphericalViewportControl20&&m&&!Number.isNaN(n+o)&&(this.$SphericalViewportControl54?this.$SphericalViewportControl66||(this.$SphericalViewportControl66=b("requestAnimationFrame")(this.$SphericalViewportControl128)):this.$SphericalViewportControl26={x:n,y:o});if(!Number.isNaN(a)&&c!==a||m){this.$SphericalViewportControl11=a;this.emit("viewportChange",this.$SphericalViewportControl26.x,this.$SphericalViewportControl26.y,a);return!0}return!1};a.prototype.getVerticalFieldOfView=function(){"use strict";return this.$SphericalViewportControl11};a.prototype.getAspectRatio=function(){"use strict";return this.$SphericalViewportControl32&&this.$SphericalViewportControl34&&this.$SphericalViewportControl35?this.$SphericalViewportControl34/this.$SphericalViewportControl35:this.$SphericalViewportControl7};a.prototype.getHorizontalFieldOfView=function(){"use strict";return b("calculateHFOVFromVFOV")(this.$SphericalViewportControl11,this.getAspectRatio())};a.prototype.setPreventScrollDefaultAction=function(a){"use strict";this.$SphericalViewportControl38=a};a.prototype.setEnableZoom=function(a){"use strict";this.$SphericalViewportControl46=a,a||this.setFieldOfView(this.$SphericalViewportControl12)};a.prototype.updateViewport=function(a,b,c){"use strict";this.$SphericalViewportControl26={x:a,y:b},this.$SphericalViewportControl11=this.$SphericalViewportControl92(c),this.$SphericalViewportControl93()};a.prototype.isUpdating=function(){"use strict";return this.$SphericalViewportControl15};a.prototype.$SphericalViewportControl129=function(){"use strict";var a=this.$SphericalViewportControl16*(this.$SphericalViewportControl17.right-this.$SphericalViewportControl17.left),b=this.$SphericalViewportControl16*(this.$SphericalViewportControl17.up-this.$SphericalViewportControl17.down);this.$SphericalViewportControl8.updateVelocity(a,b)};a.prototype.$SphericalViewportControl125=function(a){"use strict";__p&&__p();a=b("Event").getKeyCode(a);var c=null;switch(a){case b("Keys").LEFT:case u.A:c="left";break;case b("Keys").UP:case u.W:c="up";break;case b("Keys").RIGHT:case u.D:c="right";break;case b("Keys").DOWN:case u.S:c="down";break}return c};a.prototype.$SphericalViewportControl117=function(){"use strict";return this.$SphericalViewportControl11/this.$SphericalViewportControl35};a.prototype.$SphericalViewportControl73=function(){"use strict";var a="grabbing";b("UserAgent").isEngine("WebKit")?a="-webkit-"+a:b("UserAgent").isEngine("Gecko")&&(a="-moz-"+a);return a};e.exports=a}),null);
__d("SphericalViewportMovementEnum",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({WWW_ZOOM:null,CLICK_AND_DRAG:null,RECENTER:null,GUIDE:null,PARALLAX:null,KEYBOARD_PAN:null});e.exports=a}),null);
__d("SphericalViewportEventToMovementConfig",["SphericalViewportMovementEnum","keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({WHEEL:null,MOUSE_DOWN:null,COMPASS_CLICK:null,SETUP_COMPLETE:null,WINDOW_VIEWPORT_CHANGED:null,DIRECTIONAL_KEY_DOWN:null});d=(c={},c[a.WHEEL]=[b("SphericalViewportMovementEnum").WWW_ZOOM],c[a.MOUSE_DOWN]=[b("SphericalViewportMovementEnum").CLICK_AND_DRAG],c[a.COMPASS_CLICK]=[b("SphericalViewportMovementEnum").RECENTER,b("SphericalViewportMovementEnum").GUIDE],c[a.SETUP_COMPLETE]=[b("SphericalViewportMovementEnum").GUIDE],c[a.WINDOW_VIEWPORT_CHANGED]=[b("SphericalViewportMovementEnum").PARALLAX],c[a.DIRECTIONAL_KEY_DOWN]=[b("SphericalViewportMovementEnum").KEYBOARD_PAN],c);e.exports={SphericalViewportEventEnum:a,SphericalViewportEventToMovementConfig:d}}),null);
__d("SphericalViewportMediaToMovementConfig",["SphericalViewportMovementEnum","keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({WWW_VIDEO:null});d=(c={},c[a.WWW_VIDEO]=[b("SphericalViewportMovementEnum").WWW_ZOOM,b("SphericalViewportMovementEnum").CLICK_AND_DRAG,b("SphericalViewportMovementEnum").RECENTER,b("SphericalViewportMovementEnum").GUIDE,b("SphericalViewportMovementEnum").PARALLAX,b("SphericalViewportMovementEnum").KEYBOARD_PAN],c);e.exports={SphericalViewportMediaEnum:a,SphericalViewportMediaToMovementConfig:d}}),null);
__d("SphericalViewportPriorityConfig",["SphericalViewportMovementEnum"],(function(a,b,c,d,e,f){"use strict";c=(a={NONE:0},a[b("SphericalViewportMovementEnum").WWW_ZOOM]={START:500,ACTIVE:550},a[b("SphericalViewportMovementEnum").CLICK_AND_DRAG]={START:501,ACTIVE:551,ACTIVE_INERTIA:450,ACTIVE_LOW_INERTIA:350},a[b("SphericalViewportMovementEnum").RECENTER]={START:502,ACTIVE:350},a[b("SphericalViewportMovementEnum").GUIDE]={START:502,ACTIVE:350},a[b("SphericalViewportMovementEnum").PARALLAX]={START:200,ACTIVE:250},a[b("SphericalViewportMovementEnum").KEYBOARD_PAN]={START:500,ACTIVE:550},a);e.exports=c}),null);
__d("SphericalViewportControlNew",["cx","invariant","CSS","DOMEventListener","DOMQuery","Event","EventEmitter","SphericalViewportEventToMovementConfig","SphericalViewportMediaToMovementConfig","SphericalViewportMovement","SphericalViewportPriorityConfig","SphericalViewportUtils","SubscriptionsHandler","calculateHFOVFromVFOV","getElementRect","onViewportChanged","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("SphericalViewportEventToMovementConfig").SphericalViewportEventEnum,k=b("SphericalViewportMediaToMovementConfig").SphericalViewportMediaToMovementConfig,l=110,m=20,n=b("DOMQuery").scry(window.document.body,"_li")[0]||window.document.body,o={dragLeft:"_2a6u",dragRight:"_2a6v",dragUp:"__tu",dragDown:"__tz",dragUpLeft:"__t-",dragUpRight:"__u0",dragDownLeft:"__u1",dragDownRight:"__u3",webkitGrabbing:"_4li9",mozGrabbing:"_4lia",Grabbing:"_4li8",Default:"_nqe"};c=babelHelpers.inherits(a,b("EventEmitter"));i=c&&c.prototype;function a(a,c,d,e){__p&&__p();i.constructor.call(this),this.$SphericalViewportControlNew25=function(a){this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.animate(a),b("requestAnimationFrame")(this.$SphericalViewportControlNew25)}.bind(this),this.$SphericalViewportControlNew34=function(a){a.deliberateSync=!0;this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleWheelEvent(a);var c=b("SphericalViewportUtils").getMovementIDsForEvent(this.$SphericalViewportControlNew5,j.WHEEL);c=this.$SphericalViewportControlNew38(c);c&&this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleWheelEvent(a);this.emit("wheelScroll",a)}.bind(this),this.$SphericalViewportControlNew35=function(){this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleWindowViewportChangedEvent();var a=b("SphericalViewportUtils").getMovementIDsForEvent(this.$SphericalViewportControlNew5,j.WINDOW_VIEWPORT_CHANGED);a=this.$SphericalViewportControlNew38(a);a&&this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleWindowViewportChangedEvent()}.bind(this),this.$SphericalViewportControlNew1=a,this.$SphericalViewportControlNew2=e&&e.documentBody?e.documentBody:n,this.$SphericalViewportControlNew4=this.$SphericalViewportControlNew21({x:d.initialHeading,y:d.initialPitch,vFOV:d.fieldOfView}),this.$SphericalViewportControlNew14=Object.assign({},this.$SphericalViewportControlNew4),this.$SphericalViewportControlNew5=c,this.$SphericalViewportControlNew6=null,this.$SphericalViewportControlNew10=!1,this.$SphericalViewportControlNew11=!1,this.$SphericalViewportControlNew12=!1,this.$SphericalViewportControlNew13="",e&&e.vpc&&(this.$SphericalViewportControlNew3=e.vpc),this.$SphericalViewportControlNew15=!!d.guideEnabled,this.$SphericalViewportControlNew16=d.guideKeyframes!==void 0?d.guideKeyframes:null,this.$SphericalViewportControlNew17={left:!1,right:!1,up:!1,down:!1},this.$SphericalViewportControlNew18=!1,this.$SphericalViewportControlNew22(d),this.$SphericalViewportControlNew23(),this.$SphericalViewportControlNew24(),b("requestAnimationFrame")(this.$SphericalViewportControlNew25)}a.prototype.$SphericalViewportControlNew22=function(a){var c=k[this.$SphericalViewportControlNew5];this.$SphericalViewportControlNew7=b("SphericalViewportUtils").createMovementShapeFromIDs(this,c,a)};a.prototype.$SphericalViewportControlNew23=function(){__p&&__p();this.$SphericalViewportControlNew8=new(b("SubscriptionsHandler"))(),this.$SphericalViewportControlNew8.addSubscriptions(b("Event").listen(this.$SphericalViewportControlNew1,"mouseenter",function(a){return this.$SphericalViewportControlNew26(a)}.bind(this)),b("Event").listen(this.$SphericalViewportControlNew1,"mouseleave",function(a){return this.$SphericalViewportControlNew27(a)}.bind(this)),b("Event").listen(this.$SphericalViewportControlNew1,"mousedown",function(a){return this.$SphericalViewportControlNew28(a)}.bind(this)),b("Event").listen(this.$SphericalViewportControlNew1,"mouseup",function(a){return this.$SphericalViewportControlNew29(a)}.bind(this)),b("Event").listen(this.$SphericalViewportControlNew1,"keydown",function(a){return this.$SphericalViewportControlNew30(a)}.bind(this)),b("Event").listen(this.$SphericalViewportControlNew1,"keyup",function(a){return this.$SphericalViewportControlNew31(a)}.bind(this)),b("Event").listen(this.$SphericalViewportControlNew1,"blur",function(a){return this.$SphericalViewportControlNew32(a)}.bind(this)),b("Event").listen(this.$SphericalViewportControlNew1,"click",function(a){return this.$SphericalViewportControlNew33(a)}.bind(this)),{remove:function(){b("DOMEventListener").remove(this.$SphericalViewportControlNew1,"wheel",function(a){return this.$SphericalViewportControlNew34(a)}.bind(this),{passive:!1})}.bind(this)}),this.$SphericalViewportControlNew20=b("onViewportChanged")(this.$SphericalViewportControlNew35),this.$SphericalViewportControlNew3&&this.$SphericalViewportControlNew8.addSubscriptions(this.$SphericalViewportControlNew3.addListener("SphericalHeadingIndicator/click",function(){return this.$SphericalViewportControlNew36()}.bind(this)),this.$SphericalViewportControlNew3.addListener("seekEnd",function(){return this.$SphericalViewportControlNew37()}.bind(this))),this.$SphericalViewportControlNew9=new(b("SubscriptionsHandler"))()};a.prototype.$SphericalViewportControlNew38=function(a){__p&&__p();var c=!1,d=this.$SphericalViewportControlNew6;if(d&&(!d.isValid()||!d.isActive())){d=this.$SphericalViewportControlNew6;this.$SphericalViewportControlNew6=null;c=!0;d&&d.deactivate()}if(a.length===0)return c;d=b("SphericalViewportPriorityConfig").NONE;var e="";for(var a=a,f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=a.length)break;i=a[g++]}else{g=a.next();if(g.done)break;i=g.value}i=i;var j=this.$SphericalViewportControlNew7[i];j!==null&&j!==void 0||h(0,3228,i);var k=j.getStartPriority();j.isValid()&&j!==this.$SphericalViewportControlNew6&&k>d&&(d=k,e=i)}j=this.$SphericalViewportControlNew6?this.$SphericalViewportControlNew6.getActivePriority():b("SphericalViewportPriorityConfig").NONE;if(e!==""&&d>j){k=this.$SphericalViewportControlNew6;k&&k.deactivate();this.$SphericalViewportControlNew6=this.$SphericalViewportControlNew7[e];c=!0;this.$SphericalViewportControlNew6||h(0,3229);this.$SphericalViewportControlNew6.activate()}return c};a.prototype.destroy=function(){this.removeAllListeners(),this.$SphericalViewportControlNew8.release(),this.$SphericalViewportControlNew20.remove()};a.prototype.$SphericalViewportControlNew26=function(a){this.$SphericalViewportControlNew10=!0,this.$SphericalViewportControlNew38([]),b("DOMEventListener").add(this.$SphericalViewportControlNew1,"wheel",this.$SphericalViewportControlNew34,{passive:!1})};a.prototype.$SphericalViewportControlNew27=function(a){this.$SphericalViewportControlNew10=!1,this.$SphericalViewportControlNew38([]),b("DOMEventListener").remove(this.$SphericalViewportControlNew1,"wheel",this.$SphericalViewportControlNew34,{passive:!1})};a.prototype.$SphericalViewportControlNew28=function(a){this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleMouseDownEvent(a);this.$SphericalViewportControlNew12=!0;var c=b("SphericalViewportUtils").getMovementIDsForEvent(this.$SphericalViewportControlNew5,j.MOUSE_DOWN);c=this.$SphericalViewportControlNew38(c);c&&this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleMouseDownEvent(a)};a.prototype.$SphericalViewportControlNew29=function(a){this.$SphericalViewportControlNew12=!1,this.$SphericalViewportControlNew38([])};a.prototype.$SphericalViewportControlNew39=function(a){this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleGlobalMouseMoveEvent(a);var b=this.$SphericalViewportControlNew38([]);b&&this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleGlobalMouseMoveEvent(a)};a.prototype.$SphericalViewportControlNew40=function(a){this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleGlobalMouseUpEvent(a);var b=this.$SphericalViewportControlNew38([]);b&&this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleGlobalMouseUpEvent(a)};a.prototype.$SphericalViewportControlNew41=function(a){this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleGlobalMouseLeaveEvent(a);var b=this.$SphericalViewportControlNew38([]);b&&this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleGlobalMouseLeaveEvent(a)};a.prototype.$SphericalViewportControlNew42=function(a){this.$SphericalViewportControlNew4=a,this.$SphericalViewportControlNew38([]),this.emit("viewportChange",this.$SphericalViewportControlNew4.x,this.$SphericalViewportControlNew4.y,this.$SphericalViewportControlNew4.vFOV)};a.prototype.$SphericalViewportControlNew43=function(a){this.$SphericalViewportControlNew14=a,this.$SphericalViewportControlNew38([])};a.prototype.$SphericalViewportControlNew44=function(a){this.$SphericalViewportControlNew11=a,this.$SphericalViewportControlNew38([])};a.prototype.$SphericalViewportControlNew36=function(){this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleCompassClickEvent();var a=b("SphericalViewportUtils").getMovementIDsForEvent(this.$SphericalViewportControlNew5,j.COMPASS_CLICK);a=this.$SphericalViewportControlNew38(a);a&&this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleCompassClickEvent()};a.prototype.$SphericalViewportControlNew24=function(){this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleSetupCompleteEvent();var a=b("SphericalViewportUtils").getMovementIDsForEvent(this.$SphericalViewportControlNew5,j.SETUP_COMPLETE);a=this.$SphericalViewportControlNew38(a);a&&this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleSetupCompleteEvent()};a.prototype.$SphericalViewportControlNew45=function(a){this.$SphericalViewportControlNew15=a,this.$SphericalViewportControlNew38([])};a.prototype.$SphericalViewportControlNew46=function(a){this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleGuideKeyframesChangeEvent(a);this.$SphericalViewportControlNew16=a;var b=this.$SphericalViewportControlNew38([]);b&&this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleGuideKeyframesChangeEvent(a)};a.prototype.$SphericalViewportControlNew30=function(a){var c=b("SphericalViewportUtils").getKeyDirection(a);if(!c)return;this.$SphericalViewportControlNew17[c]=!0;this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleDirectionalKeyDownEvent(a);c=b("SphericalViewportUtils").getMovementIDsForEvent(this.$SphericalViewportControlNew5,j.DIRECTIONAL_KEY_DOWN);c=this.$SphericalViewportControlNew38(c);c&&this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleDirectionalKeyDownEvent(a)};a.prototype.$SphericalViewportControlNew31=function(a){var c=b("SphericalViewportUtils").getKeyDirection(a);if(!c)return;this.$SphericalViewportControlNew17[c]=!1;this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleDirectionalKeyUpEvent(a);c=this.$SphericalViewportControlNew38([]);c&&this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleDirectionalKeyUpEvent(a)};a.prototype.$SphericalViewportControlNew32=function(a){a=Object.keys(this.$SphericalViewportControlNew17);for(var b=0;b<a.length;b++){var c=a[b];this.$SphericalViewportControlNew17[c]=!1}this.$SphericalViewportControlNew38([])};a.prototype.$SphericalViewportControlNew33=function(a){this.$SphericalViewportControlNew1.focus(),this.$SphericalViewportControlNew19||this.emit("DOM/click",a),this.$SphericalViewportControlNew19=!1};a.prototype.$SphericalViewportControlNew37=function(){this.$SphericalViewportControlNew6&&this.$SphericalViewportControlNew6.handleVideoSeekEvent()};a.prototype.getOrientation=function(){return Object.assign({},this.$SphericalViewportControlNew4)};a.prototype.setOrientation=function(a){a=this.$SphericalViewportControlNew21(a);var b=this.$SphericalViewportControlNew4.x!==a.x||this.$SphericalViewportControlNew4.y!==a.y||this.$SphericalViewportControlNew4.vFOV!==a.vFOV;b&&this.$SphericalViewportControlNew42(a);return b};a.prototype.getInitialOrientation=function(){return Object.assign({},this.$SphericalViewportControlNew14)};a.prototype.setInitialOrientation=function(a){a=this.$SphericalViewportControlNew21(a);var b=this.$SphericalViewportControlNew14.x!==a.x||this.$SphericalViewportControlNew14.y!==a.y||this.$SphericalViewportControlNew14.vFOV!==a.vFOV;b&&this.$SphericalViewportControlNew43(a)};a.prototype.getHFOV=function(){var a=this.getViewportElement().clientWidth/this.getViewportElement().clientHeight;return b("calculateHFOVFromVFOV")(this.$SphericalViewportControlNew4.vFOV,a)};a.prototype.$SphericalViewportControlNew21=function(a){var b=(a.x%360+360)%360,c=Math.max(-90,Math.min(90,a.y));a=Math.min(l,Math.max(m,a.vFOV));return{x:b,y:c,vFOV:a}};a.prototype.isMouseOnElement=function(){return this.$SphericalViewportControlNew10};a.prototype.isInTahoe=function(){return this.$SphericalViewportControlNew11};a.prototype.setInTahoe=function(a){this.$SphericalViewportControlNew44(a)};a.prototype.setCursorClass=function(a){Object.prototype.hasOwnProperty.call(o,a)||a===""||h(0,3230),this.$SphericalViewportControlNew13!==a&&(this.$SphericalViewportControlNew13!==""&&b("CSS").removeClass(this.$SphericalViewportControlNew2,o[this.$SphericalViewportControlNew13]),this.$SphericalViewportControlNew13=a,a!==""&&b("CSS").addClass(this.$SphericalViewportControlNew2,o[a]))};a.prototype.getViewportElement=function(){return this.$SphericalViewportControlNew1};a.prototype.getViewportRect=function(){return b("getElementRect")(this.$SphericalViewportControlNew1)};a.prototype.isGuideEnabled=function(){return this.$SphericalViewportControlNew15};a.prototype.setGuideEnabled=function(a){a!==this.$SphericalViewportControlNew15&&this.$SphericalViewportControlNew45(a)};a.prototype.getGuideKeyframes=function(){return this.$SphericalViewportControlNew16};a.prototype.setGuideKeyframes=function(a){this.$SphericalViewportControlNew46(a)};a.prototype.getCurrentTime=function(){this.$SphericalViewportControlNew3||h(0,3231);return this.$SphericalViewportControlNew3.getCurrentTimePosition()};a.prototype.getVPC=function(){this.$SphericalViewportControlNew3||h(0,3232);return this.$SphericalViewportControlNew3};a.prototype.engageGlobalSubscriptions=function(){this.$SphericalViewportControlNew9.engage(),this.$SphericalViewportControlNew9.addSubscriptions(b("Event").listen(this.$SphericalViewportControlNew2,"mousemove",function(a){return this.$SphericalViewportControlNew39(a)}.bind(this)),b("Event").listen(this.$SphericalViewportControlNew2,"mouseup",function(a){return this.$SphericalViewportControlNew40(a)}.bind(this)),b("Event").listen(this.$SphericalViewportControlNew2,"mouseleave",function(a){return this.$SphericalViewportControlNew41(a)}.bind(this)))};a.prototype.releaseGlobalSubscriptions=function(){this.$SphericalViewportControlNew9.release()};a.prototype.getCurrentMovement=function(){return this.$SphericalViewportControlNew6};a.prototype.getDirectionKeyMap=function(){return this.$SphericalViewportControlNew17};a.prototype.isFullscreen=function(){return this.$SphericalViewportControlNew18};a.prototype.setFullscreen=function(a){this.$SphericalViewportControlNew18=a};a.prototype.ignoreNextClickEvent=function(){this.$SphericalViewportControlNew19=!0};a.prototype.getMovements=function(){return this.$SphericalViewportControlNew7};e.exports=a}),null);
__d("SphericalViewportUtils",["Event","Keys","SphericalViewportClickAndDrag","SphericalViewportEventToMovementConfig","SphericalViewportGuide","SphericalViewportKeyboardPan","SphericalViewportMediaToMovementConfig","SphericalViewportMovementEnum","SphericalViewportParallax","SphericalViewportRecenter","SphericalViewportWWWZoom"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("SphericalViewportEventToMovementConfig").SphericalViewportEventToMovementConfig,h=b("SphericalViewportMediaToMovementConfig").SphericalViewportMediaToMovementConfig;a={getEmptyMovementShape:function(){return{WWW_ZOOM:null,CLICK_AND_DRAG:null,RECENTER:null,GUIDE:null,PARALLAX:null,KEYBOARD_PAN:null}},createMovementFromID:function(a,c,d){switch(c){case b("SphericalViewportMovementEnum").WWW_ZOOM:return new(b("SphericalViewportWWWZoom"))(a);case b("SphericalViewportMovementEnum").CLICK_AND_DRAG:return new(b("SphericalViewportClickAndDrag"))(a);case b("SphericalViewportMovementEnum").RECENTER:return new(b("SphericalViewportRecenter"))(a);case b("SphericalViewportMovementEnum").GUIDE:return new(b("SphericalViewportGuide"))(a);case b("SphericalViewportMovementEnum").PARALLAX:return new(b("SphericalViewportParallax"))(a);case b("SphericalViewportMovementEnum").KEYBOARD_PAN:return new(b("SphericalViewportKeyboardPan"))(a);default:throw new Error("Unrecognized movement ID: "+c)}},createMovementShapeFromIDs:function(a,c,d){__p&&__p();var e=this.getEmptyMovementShape();for(var c=c,f=Array.isArray(c),g=0,c=f?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=c.length)break;h=c[g++]}else{g=c.next();if(g.done)break;h=g.value}h=h;e[b("SphericalViewportMovementEnum")[h]]=this.createMovementFromID(a,h,d)}return e},getMovementIDsForEvent:function(a,b){a=new Set(h[a]);b=new Set(g[b]);a=this._setIntersection(a,b);return Array.from(a)},_setIntersection:function(a,b){__p&&__p();var c=new Set();for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;b.has(f)&&c.add(f)}return c},getKeyDirection:function(a){__p&&__p();a=b("Event").getKeyCode(a);var c=null;switch(a){case b("Keys").LEFT:case b("Keys").A:c="left";break;case b("Keys").UP:case b("Keys").W:c="up";break;case b("Keys").RIGHT:case b("Keys").D:c="right";break;case b("Keys").DOWN:case b("Keys").S:c="down";break}return c}};e.exports=a}),null);
__d("SphericalViewportClickAndDrag",["SphericalViewportMovement","SphericalViewportMovementEnum","SphericalViewportPriorityConfig","UserAgent","VelocityTracker","degToRad","performanceNow","radToDeg"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=.5,i=20;c=babelHelpers.inherits(a,b("SphericalViewportMovement"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.$SphericalViewportClickAndDrag8=this.$SphericalViewportClickAndDrag9(),this.$SphericalViewportClickAndDrag1=!1}a.prototype.isActive=function(){return this.$SphericalViewportClickAndDrag2};a.prototype.getStartPriority=function(){return b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").CLICK_AND_DRAG].START};a.prototype.getActivePriority=function(){return this.$SphericalViewportClickAndDrag1?b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").CLICK_AND_DRAG].ACTIVE:this.$SphericalViewportClickAndDrag6.getSpeed()<i?b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").CLICK_AND_DRAG].ACTIVE_LOW_INERTIA:b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").CLICK_AND_DRAG].ACTIVE_INERTIA};a.prototype.animate=function(a){__p&&__p();var b=(a-this.$SphericalViewportClickAndDrag7)/1e3;this.$SphericalViewportClickAndDrag7=a;a=this.$SphericalViewportClickAndDrag10();a.x+=this.$SphericalViewportClickAndDrag6.getVelocityX()*b;a.y+=this.$SphericalViewportClickAndDrag6.getVelocityY()*b;b=this.__viewportControl.getOrientation();b.x+=a.x;b.y+=a.y;this.__viewportControl.setOrientation(b);!this.$SphericalViewportClickAndDrag1&&this.$SphericalViewportClickAndDrag6.getSpeed()<=0&&(this.$SphericalViewportClickAndDrag2=!1)};a.prototype.deactivate=function(){this.$SphericalViewportClickAndDrag11()};a.prototype.handleMouseDownEvent=function(a){this.$SphericalViewportClickAndDrag12(a),this.$SphericalViewportClickAndDrag13(a),a.preventDefault()};a.prototype.handleGlobalMouseMoveEvent=function(a){this.$SphericalViewportClickAndDrag13(a),this.__viewportControl.ignoreNextClickEvent()};a.prototype.handleGlobalMouseUpEvent=function(a){this.$SphericalViewportClickAndDrag13(a),this.$SphericalViewportClickAndDrag10(),this.$SphericalViewportClickAndDrag11(),this.$SphericalViewportClickAndDrag14(),a.preventDefault()};a.prototype.handleGlobalMouseLeaveEvent=function(a){this.$SphericalViewportClickAndDrag11()};a.prototype.$SphericalViewportClickAndDrag12=function(a){this.$SphericalViewportClickAndDrag1=!0,this.$SphericalViewportClickAndDrag2=!0,this.$SphericalViewportClickAndDrag3=this.$SphericalViewportClickAndDrag15(a),this.$SphericalViewportClickAndDrag4=this.$SphericalViewportClickAndDrag15(a),this.$SphericalViewportClickAndDrag5=new(b("VelocityTracker"))(),this.$SphericalViewportClickAndDrag6=new(b("VelocityTracker"))(300),this.$SphericalViewportClickAndDrag7=b("performanceNow")(),this.__viewportControl.setCursorClass(this.$SphericalViewportClickAndDrag8),this.__viewportControl.engageGlobalSubscriptions()};a.prototype.$SphericalViewportClickAndDrag11=function(){this.$SphericalViewportClickAndDrag1=!1,this.__viewportControl.setCursorClass(""),this.__viewportControl.releaseGlobalSubscriptions()};a.prototype.$SphericalViewportClickAndDrag13=function(a){a=this.$SphericalViewportClickAndDrag15(a);this.$SphericalViewportClickAndDrag3=a;this.$SphericalViewportClickAndDrag5.update(a.x,a.y)};a.prototype.$SphericalViewportClickAndDrag10=function(){var a={x:this.$SphericalViewportClickAndDrag3.x-this.$SphericalViewportClickAndDrag4.x,y:this.$SphericalViewportClickAndDrag3.y-this.$SphericalViewportClickAndDrag4.y},b={x:0,y:0},c=this.__viewportControl.getViewportRect(),d=this.$SphericalViewportClickAndDrag3.x<c.left,e=this.$SphericalViewportClickAndDrag3.x>c.right,f=this.$SphericalViewportClickAndDrag3.y<c.top,g=this.$SphericalViewportClickAndDrag3.y>c.bottom;this.$SphericalViewportClickAndDrag16(d,e,f,g);c={x:this.$SphericalViewportClickAndDrag3.x-c.left,y:this.$SphericalViewportClickAndDrag3.y-c.top};!d&&!e?b.x=this.$SphericalViewportClickAndDrag17(c,a).x:b.x=-a.x*this.$SphericalViewportClickAndDrag18(this.__viewportControl.getOrientation().vFOV,this.__viewportControl.getViewportElement().clientHeight)*h;!f&&!g?b.y=this.$SphericalViewportClickAndDrag17(c,a).y:b.y=a.y*this.$SphericalViewportClickAndDrag18(this.__viewportControl.getOrientation().vFOV,this.__viewportControl.getViewportElement().clientHeight)*h;this.$SphericalViewportClickAndDrag6.updateVelocity(0,0);this.$SphericalViewportClickAndDrag4=this.$SphericalViewportClickAndDrag3;return b};a.prototype.$SphericalViewportClickAndDrag14=function(){var a=this.$SphericalViewportClickAndDrag19();this.$SphericalViewportClickAndDrag6=new(b("VelocityTracker"))(300,a)};a.prototype.$SphericalViewportClickAndDrag17=function(a,c){__p&&__p();var d={x:a.x-c.x,y:a.y-c.y},e=this.__viewportControl.getOrientation(),f=this.__viewportControl.getViewportElement().clientWidth,g=this.__viewportControl.getViewportElement().clientHeight,h=g/(2*Math.tan(b("degToRad")(e.vFOV/2))),i=h*Math.cos(b("degToRad")(e.y));i=i-(g/2-a.y)*Math.sin(b("degToRad")(e.y));if(e.y==-90&&c.y<0||e.y==90&&c.y>0){c=this.$SphericalViewportClickAndDrag20(d.y-g/2,d.x-f/2);var j=this.$SphericalViewportClickAndDrag20(a.y-g/2,a.x-f/2);j=j-c;j>90?j=180-j:j<-90&&(j=180+j);return{x:j*Math.sign(e.y),y:0}}else{c=this.$SphericalViewportClickAndDrag21(d,h,i,f,g);j=this.$SphericalViewportClickAndDrag21(a,h,i,f,g);return{x:c.x-j.x,y:c.y-j.y}}};a.prototype.$SphericalViewportClickAndDrag21=function(a,b,c,d,e){return{x:this.$SphericalViewportClickAndDrag20(a.x-d/2,c),y:-this.$SphericalViewportClickAndDrag20(a.y-e/2,b)}};a.prototype.$SphericalViewportClickAndDrag20=function(a,c){return b("radToDeg")(Math.atan(a/c))};a.prototype.$SphericalViewportClickAndDrag19=function(){var a=this.$SphericalViewportClickAndDrag18(this.__viewportControl.getOrientation().vFOV,this.__viewportControl.getViewportElement().clientHeight),b=-this.$SphericalViewportClickAndDrag5.getVelocityX()*a;a=this.$SphericalViewportClickAndDrag5.getVelocityY()*a;this.$SphericalViewportClickAndDrag22()&&(b=-b);return{x:b,y:a}};a.prototype.$SphericalViewportClickAndDrag22=function(){var a=this.__viewportControl.getOrientation(),c=this.__viewportControl.getViewportElement().clientHeight,d=this.__viewportControl.getViewportRect();d=d.top;d=this.$SphericalViewportClickAndDrag3.y-d;var e=c/(2*Math.tan(b("degToRad")(a.vFOV/2)));e=-e/Math.tan(b("degToRad")(a.y))+c/2;c=d>e&&a.y<0||d<e&&a.y>0;return c};a.prototype.$SphericalViewportClickAndDrag15=function(a){a=a;return{x:a.screenX,y:a.screenY}};a.prototype.$SphericalViewportClickAndDrag18=function(a,b){return a/b};a.prototype.$SphericalViewportClickAndDrag9=function(){var a="Grabbing";b("UserAgent").isEngine("WebKit")?a="webkit"+a:b("UserAgent").isEngine("Gecko")&&(a="moz"+a);return a};a.prototype.$SphericalViewportClickAndDrag16=function(a,b,c,d){var e="drag",f="";if(a||b||c||d){a=a?"Left":b?"Right":"";b=c?"Up":d?"Down":"";f=b+a}f!==""&&this.__viewportControl.setCursorClass(e+f)};e.exports=a}),null);
__d("SphericalVideoGuideAnimationConfig",[],(function(a,b,c,d,e,f){a=Object.freeze({MIN_INTERVAL_MS:2e3,MS_PER_SECOND:1e3,RETURN_ANIMATION_TIME:1e3});e.exports=a}),null);
__d("findGreatestLowerBoundGuideKeyframeIndex",["BinarySearch"],(function(a,b,c,d,e,f){a=function(a,c){return b("BinarySearch").greatestLowerBound(function(b){return a[b][0]},c,0,a.length,function(a,b){return a-b})};e.exports=a}),null);
__d("SphericalViewportGuideUtils",["findGreatestLowerBoundGuideKeyframeIndex","SphericalVideoGuideAnimationConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("SphericalVideoGuideAnimationConfig").MIN_INTERVAL_MS;a={calculateKeyframeInterval:function(a,c,d){var e,f;if(!c)e=[0,a.y,a.x],f=[Infinity,a.y,a.x];else{var h=b("findGreatestLowerBoundGuideKeyframeIndex")(c,d);e=h===-1?[0,a.y,a.x]:c[h];c.length<=h+1?f=[Infinity,e[1],e[2]]:c[h+1][0]-d>g?f=[c[h+1][0]-g,e[1],e[2]]:(f=c[h+1],e=[c[h+1][0]-g,e[1],e[2]])}return{prevFrame:e,nextFrame:f}},calculateKeyframeIntervalOnResume:function(a,c,d,e){var f=a.x;a=a.y;var h=[e,a,f],i=-1;if(!d)a=[Infinity,a,f];else{f=b("findGreatestLowerBoundGuideKeyframeIndex")(d,e);d.length>f+1?d[f+1][0]-e>2*g?(a=[e+g,f<0?c.y:d[f][1],f<0?c.x:d[f][2]],i=f):d[f+1][0]-e>g?(a=d[f+1],i=f+1):d.length>f+2&&d[f+2][0]-e<2*g?(a=d[f+2],i=f+2):(a=[e+g,d[f+1][1],d[f+1][2]],i=f+1):(a=[e+g,f<0?c.y:d[f][1],f<0?c.x:d[f][2]],i=f)}return{interval:{prevFrame:h,nextFrame:a},nextFrameIndex:i}},calculateKeyframeIntervalAfterReturn:function(a,b,c,d){var e=a.x;a=a.y;var f=[c,a,e],h;!b?h=[Infinity,a,e]:b.length>d+1?b[d+1][0]-c>g?h=[b[d+1][0]-g,a,e]:b.length>d+2?h=b[d+2]:(h=b[d+1],h[0]=c+g):h=[Infinity,a,e];return{prevFrame:f,nextFrame:h}}};e.exports=a}),null);
__d("SphericalViewportGuide",["invariant","SphericalVideoGuideAnimationConfig","SphericalViewportGuideUtils","SphericalViewportMovement","SphericalViewportMovementEnum","SphericalViewportPriorityConfig","easeInOutInterpolate","normalizeDeltaYaw"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("SphericalVideoGuideAnimationConfig").RETURN_ANIMATION_TIME,j=b("SphericalVideoGuideAnimationConfig").MS_PER_SECOND;c=babelHelpers.inherits(a,b("SphericalViewportMovement"));h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$SphericalViewportGuide3=!1}a.prototype.isValid=function(){return this.__viewportControl.isGuideEnabled()};a.prototype.isActive=function(){return!0};a.prototype.getStartPriority=function(){return b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").GUIDE].START};a.prototype.getActivePriority=function(){return b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").GUIDE].ACTIVE};a.prototype.activate=function(){this.__viewportControl.getVPC().emit("VideoWithSphericalGuide/toggle",!0),this.$SphericalViewportGuide3=!0,this.$SphericalViewportGuide2=null};a.prototype.deactivate=function(){this.__viewportControl.getVPC().emit("VideoWithSphericalGuide/toggle",!1)};a.prototype.animate=function(){this.$SphericalViewportGuide3?this.$SphericalViewportGuide5():this.$SphericalViewportGuide6()};a.prototype.$SphericalViewportGuide6=function(){__p&&__p();var a=this.$SphericalViewportGuide1,c=this.__viewportControl.getCurrentTime()*j;if(!a||c<a.baseTime||c>a.nextTime){var d=b("SphericalViewportGuideUtils").calculateKeyframeInterval(this.__viewportControl.getInitialOrientation(),this.__viewportControl.getGuideKeyframes()||null,c);this.$SphericalViewportGuide7(d.prevFrame,d.nextFrame);a=this.$SphericalViewportGuide1}a||g(0,4971);d=b("easeInOutInterpolate")((c-a.baseTime)/a.deltaTime);c={x:a.deltaX*d+a.baseX,y:a.deltaY*d+a.baseY,vFOV:this.__viewportControl.getOrientation().vFOV};this.__viewportControl.getVPC().emit("VideoWithSphericalGuide/viewportChange",c.x,c.y);this.__viewportControl.setOrientation(c)};a.prototype.$SphericalViewportGuide5=function(){__p&&__p();var a=this.$SphericalViewportGuide2;if(!a){var c=b("SphericalViewportGuideUtils").calculateKeyframeIntervalOnResume(this.__viewportControl.getOrientation(),this.__viewportControl.getInitialOrientation(),this.__viewportControl.getGuideKeyframes()||null,this.__viewportControl.getCurrentTime()*j),d=c.interval;c=c.nextFrameIndex;this.$SphericalViewportGuide8(d.prevFrame,d.nextFrame);this.$SphericalViewportGuide4=c;a=this.$SphericalViewportGuide2}a||g(0,4971);d=Date.now();if(d-a.startTime>i){c=1;this.$SphericalViewportGuide3=!1;var e=b("SphericalViewportGuideUtils").calculateKeyframeIntervalAfterReturn(this.__viewportControl.getOrientation(),this.__viewportControl.getGuideKeyframes()||null,this.__viewportControl.getCurrentTime()*j,this.$SphericalViewportGuide4);this.$SphericalViewportGuide7(e.prevFrame,e.nextFrame)}else c=b("easeInOutInterpolate")((d-a.startTime)/i);e={x:a.deltaX*c+a.baseX,y:a.deltaY*c+a.baseY,vFOV:this.__viewportControl.getOrientation().vFOV};this.__viewportControl.getVPC().emit("VideoWithSphericalGuide/viewportChange",e.x,e.y);this.__viewportControl.setOrientation(e)};a.prototype.handleGuideKeyframesChangeEvent=function(){this.$SphericalViewportGuide3=!0};a.prototype.handleSetupCompleteEvent=function(){this.__viewportControl.getVPC().registerOption("VideoWithSphericalGuide","enabled",function(){return this.__viewportControl.isGuideEnabled()}.bind(this)),this.__viewportControl.getVPC().registerOption("VideoWithSphericalGuide","auto",function(){return this.__viewportControl.getCurrentMovement()===this}.bind(this)),this.__viewportControl.getVPC().registerOption("VideoWithSphericalGuide","intervalData",function(){return this.$SphericalViewportGuide1}.bind(this)),this.$SphericalViewportGuide3=!1};a.prototype.handleVideoSeekEvent=function(){this.$SphericalViewportGuide3=!1,this.$SphericalViewportGuide1=null};a.prototype.$SphericalViewportGuide7=function(a,c){c={baseTime:a[0],nextTime:c[0],deltaTime:c[0]-a[0],baseX:a[2],deltaX:b("normalizeDeltaYaw")(c[2]-a[2]),baseY:a[1],deltaY:c[1]-a[1]};this.__viewportControl.getVPC().emit("VideoWithSphericalGuide/intervalUpdate",c);this.$SphericalViewportGuide1=c};a.prototype.$SphericalViewportGuide8=function(a,c){c={startTime:Date.now(),baseX:a[2],deltaX:b("normalizeDeltaYaw")(c[2]-a[2]),baseY:a[1],deltaY:c[1]-a[1]};this.__viewportControl.getVPC().emit("VideoWithSphericalGuide/intervalUpdate",c);this.$SphericalViewportGuide2=c};e.exports=a}),null);
__d("SphericalViewportKeyboardPan",["Event","SphericalViewportMovement","SphericalViewportMovementEnum","SphericalViewportPriorityConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=.04,i=16;c=babelHelpers.inherits(a,b("SphericalViewportMovement"));g=c&&c.prototype;function a(a){g.constructor.call(this,a)}a.prototype.isValid=function(){return this.__viewportControl.isFullscreen()||!this.__viewportControl.isInTahoe()};a.prototype.isActive=function(){var a=this.__viewportControl.getDirectionKeyMap();return Object.values(a).some(function(a){return a})};a.prototype.getStartPriority=function(){return b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").KEYBOARD_PAN].START};a.prototype.getActivePriority=function(){return b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").KEYBOARD_PAN].ACTIVE};a.prototype.animate=function(a){__p&&__p();var b=this.$SphericalViewportKeyboardPan1?a-this.$SphericalViewportKeyboardPan1:i;this.$SphericalViewportKeyboardPan1=a;a=this.__viewportControl.getDirectionKeyMap();var c=this.__viewportControl.getOrientation();b=b*h;a.right&&(c.x+=b);a.left&&(c.x-=b);a.up&&(c.y+=b);a.down&&(c.y-=b);this.__viewportControl.setOrientation(c)};a.prototype.deactivate=function(){this.$SphericalViewportKeyboardPan1=null};a.prototype.handleDirectionalKeyDownEvent=function(a){b("Event").prevent(a)};a.prototype.handleDirectionalKeyUpEvent=function(a){b("Event").prevent(a)};e.exports=a}),null);
__d("SphericalViewportMovement",["Event","SphericalViewportControlNew","SphericalViewportPriorityConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.__viewportControl=a}a.prototype.isValid=function(){return!0};a.prototype.isActive=function(){return!0};a.prototype.animate=function(a){};a.prototype.activate=function(){};a.prototype.deactivate=function(){};a.prototype.getStartPriority=function(){return b("SphericalViewportPriorityConfig").NONE};a.prototype.getActivePriority=function(){return b("SphericalViewportPriorityConfig").NONE};a.prototype.handleWheelEvent=function(a){};a.prototype.handleMouseDownEvent=function(a){};a.prototype.handleGlobalMouseMoveEvent=function(a){};a.prototype.handleGlobalMouseUpEvent=function(a){};a.prototype.handleGlobalMouseLeaveEvent=function(a){};a.prototype.handleCompassClickEvent=function(){};a.prototype.handleGuideKeyframesChangeEvent=function(a){};a.prototype.handleSetupCompleteEvent=function(){};a.prototype.handleWindowViewportChangedEvent=function(){};a.prototype.handleDirectionalKeyDownEvent=function(a){};a.prototype.handleDirectionalKeyUpEvent=function(a){};a.prototype.handleVideoSeekEvent=function(){};e.exports=a}),null);
__d("SphericalViewportParallax",["invariant","SphericalParallaxUtils","SphericalViewportMovement","SphericalViewportMovementEnum","SphericalViewportPriorityConfig","VideoPlayerLoggerSource","getElementRect","getViewportDimensions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("SphericalParallaxUtils").calculateYawOffset;c=.8;var j=16;d=15;var k=c/j/d,l=50,m=.1;f=babelHelpers.inherits(a,b("SphericalViewportMovement"));h=f&&f.prototype;function a(a){h.constructor.call(this,a)}a.prototype.isValid=function(){return this.__viewportControl.getVPC().getSource()===b("VideoPlayerLoggerSource").INLINE};a.prototype.getStartPriority=function(){return b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").PARALLAX].START};a.prototype.getActivePriority=function(){return b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").PARALLAX].ACTIVE};a.prototype.animate=function(a){__p&&__p();var b=this.__viewportControl.getOrientation();b.x-this.$SphericalViewportParallax2>180&&(b.x-=360);this.$SphericalViewportParallax2-b.x>180&&(b.x+=360);var c=Math.abs(b.x-this.$SphericalViewportParallax2);c<=180||g(0,4631);if(c<m)return;var d=this.$SphericalViewportParallax3?a-this.$SphericalViewportParallax3:j;this.$SphericalViewportParallax3=a;a=c*k;c=Math.max(d,l);b.x<this.$SphericalViewportParallax2?b.x+=Math.min(this.$SphericalViewportParallax2-b.x,a*c):b.x-=Math.min(b.x-this.$SphericalViewportParallax2,a*c);this.__viewportControl.setOrientation(b)};a.prototype.activate=function(){this.$SphericalViewportParallax2=this.__viewportControl.getOrientation().x;var a=this.$SphericalViewportParallax4();this.$SphericalViewportParallax1=this.$SphericalViewportParallax2-a};a.prototype.deactivate=function(){this.$SphericalViewportParallax3=null};a.prototype.handleWindowViewportChangedEvent=function(){this.$SphericalViewportParallax2=this.$SphericalViewportParallax4()+this.$SphericalViewportParallax1};a.prototype.$SphericalViewportParallax4=function(){__p&&__p();var a=this.__viewportControl.getVPC().getRootNode();a||g(0,4632);a=b("getElementRect")(a);a=a.top+a.bottom/2;var c=b("getViewportDimensions").withoutScrollbars().height;a=a/c*100;c=this.__viewportControl.getHFOV();a=i(a,null,null,c);c=a.yaw;a=a.success;a||g(0,4633);return c};e.exports=a}),null);
__d("SphericalViewportRecenter",["invariant","SphericalViewportMovement","SphericalViewportMovementEnum","SphericalViewportPriorityConfig","easeInOutInterpolate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=1e3;c=babelHelpers.inherits(a,b("SphericalViewportMovement"));h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$SphericalViewportRecenter2=!1}a.prototype.isValid=function(){return!this.__viewportControl.isGuideEnabled()};a.prototype.isActive=function(){return this.$SphericalViewportRecenter2};a.prototype.getStartPriority=function(){return b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").RECENTER].START};a.prototype.getActivePriority=function(){return b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").RECENTER].ACTIVE};a.prototype.animate=function(){if(!this.$SphericalViewportRecenter2)return;var a=Date.now(),c;a-this.$SphericalViewportRecenter1>i?(c=1,this.$SphericalViewportRecenter2=!1,this.__viewportControl.getVPC().emit("SphericalVideoRecenterControl/animationEnd")):c=b("easeInOutInterpolate")((a-this.$SphericalViewportRecenter1)/i);a=this.$SphericalViewportRecenter3;c={x:a.deltaX*c+a.startX,y:a.deltaY*c+a.startY,vFOV:this.__viewportControl.getOrientation().vFOV};this.__viewportControl.setOrientation(c)};a.prototype.deactivate=function(){this.$SphericalViewportRecenter2=!1,this.__viewportControl.getVPC().emit("SphericalVideoRecenterControl/animationEnd")};a.prototype.handleCompassClickEvent=function(){if(this.$SphericalViewportRecenter2)return;this.$SphericalViewportRecenter2=!0;this.$SphericalViewportRecenter1=Date.now();this.$SphericalViewportRecenter4(this.__viewportControl.getOrientation());this.__viewportControl.getVPC().emit("SphericalVideoRecenterControl/animationStart")};a.prototype.$SphericalViewportRecenter4=function(a){var b=this.__viewportControl.getInitialOrientation(),c=b.x-a.x;Math.abs(c)<=360||g(0,1643);c<-180&&(c+=360);c>180&&(c-=360);b=b.y-a.y;Math.abs(b)<=180||g(0,1644);this.$SphericalViewportRecenter3={startX:a.x,deltaX:c,startY:a.y,deltaY:b}};e.exports=a}),null);
__d("SphericalViewportWWWZoom",["Event","SphericalViewportMovement","SphericalViewportMovementEnum","SphericalViewportPriorityConfig","debounce","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=1e3,i=30;c=babelHelpers.inherits(a,b("SphericalViewportMovement"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.$SphericalViewportWWWZoom1=b("debounce")(function(){return this.__viewportControl.emit("zoomStart")}.bind(this),h),this.$SphericalViewportWWWZoom2=b("throttle")(function(a){a=(a.deltaX||0)+(a.deltaY||0)+(a.deltaZ||0);a=a/120*45/10;var b=this.__viewportControl.getOrientation();b.vFOV+=a;a=this.__viewportControl.setOrientation(b);a&&this.$SphericalViewportWWWZoom1()}.bind(this),i)}a.prototype.isValid=function(){return this.__viewportControl.isInTahoe()&&this.__viewportControl.isMouseOnElement()};a.prototype.isActive=function(){return!1};a.prototype.getStartPriority=function(){return b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").WWW_ZOOM].START};a.prototype.getActivePriority=function(){return b("SphericalViewportPriorityConfig")[b("SphericalViewportMovementEnum").WWW_ZOOM].ACTIVE};a.prototype.handleWheelEvent=function(a){this.$SphericalViewportWWWZoom2(a),a.preventDefault(),b("Event").kill(a)};e.exports=a}),null);
__d("SphericalViewportControlStore",["invariant","FluxMapStore","Rect","SphericalVideoComponentActions","SphericalVideoComponentConstants","SphericalVideoComponentDispatcher","SphericalViewportControl","SphericalViewportControlNew","Vector","clearTimeout","curry","gkx","immutable","setTimeout","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;c={fieldOfView:-1,initialPitch:-1,initialYaw:-1,isInChannelView:!1,isInTahoe:!1,pitch:-1,viewport:null,viewportGrabbed:!1,viewportHeight:0,viewportInactivityTimeout:0,viewportPanStart:!1,viewportWidth:0,yaw:-1};var j=5e3,k=b("gkx")("678911");h=babelHelpers.inherits(l,b("immutable").Record(c));h&&h.prototype;function l(){h.apply(this,arguments)}i=babelHelpers.inherits(a,b("FluxMapStore"));i&&i.prototype;a.prototype.getInitialState=function(){return b("immutable").Map({sphericalViewportControls:b("immutable").Map({}),sphericalViewportControlStates:b("immutable").Map({})})};a.prototype.reduce=function(a,c){__p&&__p();var d=c.id;switch(c.type){case b("SphericalVideoComponentConstants").ACTIONS.REGISTER_SPHERICAL_VIEWPORT_CONTROL:var e=c.sphericalViewportControl,f=c.viewport,h;k?(e instanceof b("SphericalViewportControlNew")||g(0,4469),h={"new":!0,control:e}):(e instanceof b("SphericalViewportControl")||g(0,4470),h={"new":!1,control:e});a=this.$SphericalViewportStore1(a,d,h,f);break;case b("SphericalVideoComponentConstants").ACTIONS.CHANGE_VIEWPORT:e=c.yaw;h=c.pitch;f=c.fieldOfView;a=this.$SphericalViewportStore2(a,d,e,h,f);break;case b("SphericalVideoComponentConstants").ACTIONS.TOGGLE_VIEWPORT_GRABBED:a=this.$SphericalViewportStore3(a,d);break;case b("SphericalVideoComponentConstants").ACTIONS.UPDATE_VIEWPORT_DIMENSIONS:e=c.width;h=c.height;a=this.$SphericalViewportStore4(a,d,e,h);break;case b("SphericalVideoComponentConstants").ACTIONS.TOGGLE_CHANNEL_VIEW:f=c.isInChannelView;a=this.$SphericalViewportStore5(a,d,f);break;case b("SphericalVideoComponentConstants").ACTIONS.TOGGLE_TAHOE:e=c.isInTahoe;a=this.$SphericalViewportStore6(a,d,e);break;case b("SphericalVideoComponentConstants").ACTIONS.SET_USER_IS_INACTIVE:a=this.$SphericalViewportStore7(a,d);break;case b("SphericalVideoComponentConstants").ACTIONS.SET_INITIAL_VIEWPORT:a=this.$SphericalViewportStore8(a,d,c.yaw,c.pitch);break;default:break}return a};a.prototype.getViewportControlWrapper=function(a){var b=this.get("sphericalViewportControls");if(b&&b.has(a))return b.get(a);else throw new Error("Video player controller with id "+a+" is not registered")};a.prototype.getOrientation=function(a){a=this.$SphericalViewportStore9(this.getState(),a);var b=a.yaw;a=a.pitch;return{yaw:b,pitch:a}};a.prototype.getUserIsActive=function(a){a=this.$SphericalViewportStore9(this.getState(),a);return a.viewportInactivityTimeout!==0};a.prototype.getFieldOfView=function(a){return this.$SphericalViewportStore9(this.getState(),a).fieldOfView};a.prototype.getViewportGrabbed=function(a){return this.$SphericalViewportStore9(this.getState(),a).viewportGrabbed};a.prototype.getInitialYaw=function(a){return this.$SphericalViewportStore9(this.getState(),a).initialYaw};a.prototype.getInitialPitch=function(a){return this.$SphericalViewportStore9(this.getState(),a).initialPitch};a.prototype.getIsInChannelView=function(a){return this.$SphericalViewportStore9(this.getState(),a).isInChannelView};a.prototype.getIsInTahoe=function(a){return this.$SphericalViewportStore9(this.getState(),a).isInTahoe};a.prototype.getViewportDimensions=function(a){return{width:this.$SphericalViewportStore9(this.getState(),a).viewportWidth,height:this.$SphericalViewportStore9(this.getState(),a).viewportHeight}};a.prototype.getViewportPositionVector=function(a){a=this.$SphericalViewportStore9(this.getState(),a);return new(b("Rect"))(a.viewport).getPositionVector()};a.prototype.getViewportCenterVector=function(a){var c=this.getViewportPositionVector(a);a=this.getViewportDimensions(a);var d=a.width;a=a.height;d=new(b("Vector"))(d/2,a/2);return c.add(d)};a.prototype.onViewportGrabbed=function(a){b("SphericalVideoComponentActions").toggleViewportGrabbed(a)};a.prototype.onViewportPanStart=function(a,b){return};a.prototype.onViewportPanEnd=function(a){b("SphericalVideoComponentActions").toggleViewportGrabbed(a)};a.prototype.onViewportChange=function(a,c,d,e){b("SphericalVideoComponentActions").changeViewport(a,c,d,e)};a.prototype.$SphericalViewportStore1=function(a,c,d,e){__p&&__p();var f=a.get("sphericalViewportControls");if(f.has(c))return a;f=f.set(c,d);a=a.set("sphericalViewportControls",f);f=a.get("sphericalViewportControlStates");var g=d.control;d=new l({yaw:g.getOrientation().x,pitch:g.getOrientation().y,fieldOfView:d["new"]?d.control.getOrientation().vFOV:d.control.getVerticalFieldOfView(),viewport:e});f=f.set(c,d);a=a.set("sphericalViewportControlStates",f);g.addListener("viewportChange",b("throttle")(b("curry")(this.onViewportChange,c),16));g.addListener("updateViewportBegin",b("curry")(this.onViewportGrabbed,c));g.addListener("updateViewportEnd",b("curry")(this.onViewportPanEnd,c));return a};a.prototype.$SphericalViewportStore2=function(a,c,d,e,f){__p&&__p();var g=[["yaw",d],["pitch",e],["fieldOfView",f]];for(var h=0;h<g.length;h++){var i=g[h],j=i[0];i=i[1];a=this.$SphericalViewportStore10(a,c,j,i)}j=this.getViewportControlWrapper(c);j["new"]?j.control.setOrientation({x:d,y:e,vFOV:f}):(j.control.setSphericalOrientation(d,e),j.control.setFieldOfView(f));i=this.$SphericalViewportStore9(a,c).get("viewportInactivityTimeout");b("clearTimeout")(i);a=this.$SphericalViewportStore10(a,c,"viewportInactivityTimeout",this.$SphericalViewportStore11(c));return a};a.prototype.$SphericalViewportStore11=function(a){return b("setTimeout")(function(){return b("SphericalVideoComponentActions").setUserIsInactive(a)},j)};a.prototype.$SphericalViewportStore7=function(a,b){a=this.$SphericalViewportStore10(a,b,"viewportInactivityTimeout",0);return a};a.prototype.$SphericalViewportStore8=function(a,b,c,d){a=this.$SphericalViewportStore10(a,b,"initialYaw",c);a=this.$SphericalViewportStore10(a,b,"initialPitch",d);return a};a.prototype.$SphericalViewportStore4=function(a,b,c,d){a=this.$SphericalViewportStore10(a,b,"viewportWidth",c);a=this.$SphericalViewportStore10(a,b,"viewportHeight",d);return a};a.prototype.$SphericalViewportStore3=function(a,b){var c=this.$SphericalViewportStore9(a,b).viewportGrabbed;return this.$SphericalViewportStore10(a,b,"viewportGrabbed",!c)};a.prototype.$SphericalViewportStore5=function(a,b,c){return this.$SphericalViewportStore10(a,b,"isInChannelView",c)};a.prototype.$SphericalViewportStore6=function(a,b,c){return this.$SphericalViewportStore10(a,b,"isInTahoe",c)};a.prototype.$SphericalViewportStore10=function(a,b,c,d){var e=this.$SphericalViewportStore9(a,b),f=a.get("sphericalViewportControlStates");e=e.set(c,d);f=f.set(b,e);return a.set("sphericalViewportControlStates",f)};a.prototype.$SphericalViewportStore9=function(a,b){a=a.get("sphericalViewportControlStates").get(b);a||this.$SphericalViewportStore12(b);return a};a.prototype.$SphericalViewportStore12=function(a){throw new Error("Viewport control with id "+a+" does not exist")};function a(){i.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("SphericalVideoComponentDispatcher"))}),null);
__d("VideoPlayerControllerStore",["FluxMapStore","SphericalVideoComponentActions","SphericalVideoComponentConstants","SphericalVideoComponentDispatcher","VideoPlayerReason","VideoPlayerReasonTransitionHelper","VideoPlayerStates","curry","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;g=babelHelpers.inherits(i,b("immutable").Record({currentTime:-1,currentVideoPlayerState:b("VideoPlayerStates").UNKNOWN,durationSeconds:-1,videoId:""}));g&&g.prototype;function i(){g.apply(this,arguments)}c=babelHelpers.inherits(a,b("FluxMapStore"));h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.onVideoPlayerControllerStateChange=function(a){var c=a.getVideoPlayerID(),d=this.$VideoPlayerControllerStore6(this.getState(),c);d=d.videoPlayerState;a=a.getState();d!==a&&b("SphericalVideoComponentActions").updateVideoPlayerState(c,a)}.bind(this),c}a.prototype.getInitialState=function(){return b("immutable").Map({videoPlayerControllers:b("immutable").Map({}),videoPlayerControllerStates:b("immutable").Map({})})};a.prototype.reduce=function(a,c){__p&&__p();var d=c.id;switch(c.type){case b("SphericalVideoComponentConstants").ACTIONS.REGISTER_VIDEO_PLAYER_CONTROLLER:var e=c.controller;a=this.$VideoPlayerControllerStore1(a,e,d);break;case b("SphericalVideoComponentConstants").ACTIONS.UPDATE_VIDEO_PLAYER_STATE:a=this.$VideoPlayerControllerStore2(a,d,c.state);break;case b("SphericalVideoComponentConstants").ACTIONS.TOGGLE_PLAY:a=this.$VideoPlayerControllerStore3(a,d,c.nextIsPlaying);break;case b("SphericalVideoComponentConstants").ACTIONS.SET_CURRENT_PLAY_TIME:a=this.$VideoPlayerControllerStore4(a,d,c.time);break;case b("SphericalVideoComponentConstants").ACTIONS.SET_VIDEO_DURATION:a=this.$VideoPlayerControllerStore5(a,d,c.durationSeconds);break;default:break}return a};a.prototype.getVideoPlayerController=function(a){var b=this.get("videoPlayerControllers");if(b&&b.has(a))return b.get(a);else throw new Error("Video player controller with id "+a+" is not registered")};a.prototype.getIsVideoPlayable=function(a){a=this.$VideoPlayerControllerStore6(this.getState(),a).currentVideoPlayerState;return a!==b("VideoPlayerStates").FALLBACK&&a!==b("VideoPlayerStates").DESTROYED&&a!==b("VideoPlayerStates").UNKNOWN};a.prototype.getIsPlaying=function(a){var c=this.getVideoPlayerController(a).isBuffering();a=this.$VideoPlayerControllerStore6(this.getState(),a).currentVideoPlayerState;return a===b("VideoPlayerStates").PLAYING&&!c};a.prototype.getCurrentTime=function(a){return this.$VideoPlayerControllerStore6(this.getState(),a).currentTime};a.prototype.getVideoID=function(a){return this.$VideoPlayerControllerStore6(this.getState(),a).videoId};a.prototype.$VideoPlayerControllerStore1=function(a,c,d){__p&&__p();var e=a.get("videoPlayerControllers");if(e.has(d))return a;e=e.set(d,c);a=a.set("videoPlayerControllers",e);e=a.get("videoPlayerControllerStates");var f=new i({isPlaying:c.isState(b("VideoPlayerStates").PLAYING),currentTime:c.getCurrentTimePosition(),videoId:c.getVideoID()});e=e.set(d,f);a=a.set("videoPlayerControllerStates",e);c.addListener("stateChange",b("curry")(this.onVideoPlayerControllerStateChange,c));c.addListener("updateStatus",b("curry")(this.onTimeUpdate,c));c.addListener("updateMetadata",b("curry")(this.onUpdateMetaData,c));c.addListener("VideoChannelController/pendingElementsShown",b("curry")(this.onToggleChannelView,c,!0));c.addListener("VideoChannelController/exitChannel",b("curry")(this.onToggleChannelView,c,!1));c.addListener("seekRequested",b("curry")(this.onSeekStart,c));c.addListener("TahoeController/enterTahoe",b("curry")(this.onToggleTahoe,c,!0));c.addListener("TahoeController/exitTahoe",b("curry")(this.onToggleTahoe,c,!1));return a};a.prototype.onTimeUpdate=function(a,c){b("SphericalVideoComponentActions").setCurrentVideoTime(a.getVideoPlayerID(),c.position)};a.prototype.onSeekStart=function(a){b("SphericalVideoComponentActions").seekStart(a.getVideoPlayerID())};a.prototype.onUpdateMetaData=function(a){b("SphericalVideoComponentActions").setVideoDuration(a.getVideoPlayerID(),a.getPlaybackDuration())};a.prototype.onToggleChannelView=function(a,c){b("SphericalVideoComponentActions").toggleChannelView(a.getVideoPlayerID(),c)};a.prototype.onToggleTahoe=function(a,c){b("SphericalVideoComponentActions").toggleTahoe(a.getVideoPlayerID(),c)};a.prototype.$VideoPlayerControllerStore3=function(a,c,d){var e=this.getVideoPlayerController(c);c=this.$VideoPlayerControllerStore6(this.getState(),c);c=c.currentVideoPlayerState;(c===b("VideoPlayerStates").PLAYING&&!d||c===b("VideoPlayerStates").PAUSED&&d)&&(d?e.play(new(b("VideoPlayerReasonTransitionHelper"))(b("VideoPlayerReason").USER)):e.pause());return a};a.prototype.$VideoPlayerControllerStore4=function(a,b,c){return this.$VideoPlayerControllerStore7(a,b,"currentTime",c)};a.prototype.$VideoPlayerControllerStore2=function(a,b,c){return this.$VideoPlayerControllerStore7(a,b,"currentVideoPlayerState",c)};a.prototype.$VideoPlayerControllerStore5=function(a,b,c){return this.$VideoPlayerControllerStore7(a,b,"durationSeconds",c)};a.prototype.$VideoPlayerControllerStore6=function(a,b){a=a.get("videoPlayerControllerStates").get(b);a||this.$VideoPlayerControllerStore8(b);return a};a.prototype.$VideoPlayerControllerStore7=function(a,b,c,d){var e=a.get("videoPlayerControllerStates"),f=this.$VideoPlayerControllerStore6(a,b);f=f.set(c,d);e=e.set(b,f);return a.set("videoPlayerControllerStates",e)};a.prototype.$VideoPlayerControllerStore8=function(a){throw new Error("Video player controller with id "+a+" does not exist")};a.__moduleID=e.id;e.exports=new a(b("SphericalVideoComponentDispatcher"))}),null);
__d("SphericalVideoHalfEquirectConfig",["SphericalMediaConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("SphericalMediaConstants").HALF_EQUIRECT_PARTIAL_LIMIT,h=b("SphericalMediaConstants").RB_FRICTION,i=b("SphericalMediaConstants").RB_MAX_SPRING_DEGREE,j=b("SphericalMediaConstants").RB_MAX_STRETCH_X_DEGREE,k=b("SphericalMediaConstants").RB_MAX_STRETCH_Y_DEGREE,l=b("SphericalMediaConstants").RB_SPRING_FACTOR;a={getHalfEquirectangularPartialLimits:function(){return{partialLeftDegrees:g,partialRightDegrees:g,partialTopDegrees:g,partialBottomDegrees:g}},getHalfEquirectangularControllerConfig:function(){return{enableRubberBanding:!0,springFactor:l,maxSpringDegrees:i,maxStretchXDegrees:j,maxStretchYDegrees:k,rubberBandConstant:h}}};e.exports=a}),null);
__d("SphericalMediaUtils",[],(function(a,b,c,d,e,f){"use strict";a={getDPR:function(){return Math.max(window.devicePixelRatio||1,1)}};e.exports=a}),null);
__d("SphericalMediaHeadingIndicator.react",["cx","EventListener","React","SphericalMediaConstants","SphericalMediaUtils","SphericalPhotoProjectionUtils","SubscriptionsHandler","calculateHFOVFromVFOV","degToRad","easeInOutInterpolate","requestAnimationFrame","uniqueID"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("SphericalMediaConstants").HI_SIZE_NORMAL,j=b("SphericalMediaConstants").HI_SIZE_FULL,k=b("SphericalMediaConstants").HI_ALPHA_BG,l=b("SphericalMediaConstants").HI_ALPHA_ELEMENT,m=b("SphericalMediaConstants").HI_ALPHA_DURATION,n=b("SphericalMediaConstants").HI_FADE_OUT_DELAY,o=b("SphericalMediaConstants").HI_BLINK_ARC_RAD,p=b("SphericalMediaConstants").HI_BLINK_DURATION,q=b("SphericalMediaUtils").getDPR,r=function(a){return a!==void 0&&a!==null},s=function(a,b,c,d){a.beginPath(),a.arc(b.x,b.y,c*q(),0,2*Math.PI,!1),a.fillStyle=d,a.lineWidth=0,a.fill()},t=function(a,b,c,d,e,f,g){var h=q();a.beginPath();a.arc(b.x,b.y,c*h,d,e,!1);a.lineWidth=f*h;a.strokeStyle=g;a.stroke()};c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){__p&&__p();h.constructor.call(this,a);this.$13=function(){var a=this.__getDrawData();if(!r(a.poiYaw)){this.$11=!1;this.draw(a);return}var c=(Date.now()-this.__blinkStartTime)%p<p/2;this.$11!==c&&(this.$11=c,this.draw(a));b("requestAnimationFrame")(this.$13)}.bind(this);this.$15=function(){if(this.$6===k.end)return;this.$25(k.start,k.end,l.start,l.end)}.bind(this);this.$16=function(){if(this.$6===k.start)return;this.$25(k.end,k.start,l.end,l.start)}.bind(this);this.$2=b("uniqueID")();this.$5=0;this.$6=k.start;this.$7=l.start;this.$8=null;this.$9=!1;this.$10=!1;this.$11=!1;if(!this.constructor.__subClassMethods)throw new Error('Must implement "static __subClassMethods"');for(var c in this.constructor.__subClassMethods)if(typeof this[c]!=="function")throw new Error('Must implement "'+c+'"');b("requestAnimationFrame")(this.$13)}a.prototype.UNSAFE_componentWillReceiveProps=function(a){var b=a.isActive&&a.isPanning!==this.props.isPanning;b&&this.$14(a.isPanning)};a.prototype.shouldComponentUpdate=function(a){a=a.aspectRatio!==this.props.aspectRatio||a.isActive!==this.props.isActive||a.isGuideAuto!==this.props.isGuideAuto||a.useLargeHeadingIndicator!==this.props.useLargeHeadingIndicator;return a};a.prototype.$14=function(a,b){b===void 0&&(b=!0),this.$5+=a?1:-1,a?(this.$8!==null&&clearTimeout(this.$8),this.$15()):this.$5===0&&(this.$8=setTimeout(function(){this.$8=null,this.$16()}.bind(this),b?n:0))};a.prototype.$17=function(){var a=this.$18(),b=q();return{width:a.width*b,height:a.height*b}};a.prototype.$18=function(){return this.props.useLargeHeadingIndicator?j:i};a.prototype.$19=function(){var a=this.$17();return{x:a.width/2,y:a.height/2}};a.prototype.draw=function(a){__p&&__p();if(!this.$1)return;var b=this.$1,c=this.$17();(b.width!==c.width||b.height!==c.height)&&(b.width=c.width,b.height=c.height);b=b.getContext("2d");if(!b)return;b.save();b.clearRect(0,0,c.width,c.height);this.$20(b,a);this.$21(b,a);this.$22(b,a);b.restore()};a.prototype.$20=function(a,c){__p&&__p();var d=this.$18(),e=this.$19(),f=c.fov*this.props.aspectRatio;f=b("degToRad")(f)/2;s(a,e,d.background_radius,this.$23());if(this.props.isGuideAuto){var g=d.inner_radius+d.inner_stroke/2-d.center_radius;t(a,e,d.center_radius+g/2,0,2*Math.PI,g,this.$24())}else{s(a,e,d.center_radius,this.$24());g=this.props.partialLimits;if(g&&g.partialLeftDegrees&&g.partialRightDegrees){var h=g.partialLeftDegrees;g=g.partialRightDegrees;t(a,e,d.inner_radius,0,2*Math.PI,d.inner_stroke,this.getPartialPanoElementColor());c=270-c.initialYaw;h=b("degToRad")(h*-1+c+f);g=b("degToRad")(g+c-f);t(a,e,d.inner_radius,h||0,g||0,d.inner_stroke,this.$24())}else t(a,e,d.inner_radius,0,2*Math.PI,d.inner_stroke,this.$24())}};a.prototype.$22=function(a,c){__p&&__p();var d=this.$18(),e=this.$19();if(this.props.isGuideAuto&&this.$11){var f=b("degToRad")((c.poiYaw||0)-c.initialYaw)-Math.PI/2;t(a,e,d.rim_radius,f-o/2,f+o/2,d.rim_stroke,this.$24())}f=q();var g=d.triangle[0]*f,h=d.triangle[1]*f;d=d.triangle[2]*f;a.translate(e.x,e.y);if(c.pointerYaw){f=c.pointerYaw-c.initialYaw;a.rotate(b("degToRad")(f||0))}a.beginPath();a.moveTo(0,g-e.y);a.lineTo(-h,d-e.y);a.lineTo(h,d-e.y);a.fillStyle=this.$24();a.fill()};a.prototype.$21=function(a,c){__p&&__p();var d=this.$18(),e=this.$19(),f=this.props,g=f.partialLimits,h=f.aspectRatio;f=f.showNewPhotoRenderer;var i=c.yaw-c.initialYaw,j=b("calculateHFOVFromVFOV")(c.fov,this.props.aspectRatio);j=b("degToRad")(j)/2;if(f&&g){f=b("SphericalPhotoProjectionUtils").getRelativeHfov(c.fov,h,g);j=f/2}c=b("degToRad")(i)-Math.PI/2;h=this.props.isGuideAuto;if(h){g=q();a.save();a.beginPath();a.lineWidth=d.arc_stroke*g;a.arc(e.x,e.y,(d.arc_radius+d.arc_stroke/2)*g,c-j,c+j,!1);a.arc(e.x,e.y,(d.arc_radius-d.arc_stroke/2)*g,c+j,c-j,!0);a.clip();f=this.$17();a.clearRect(0,0,f.width,f.height);a.restore()}t(a,e,d.arc_radius,c-j,c+j,d.arc_stroke,h?this.$23():this.$24())};a.prototype.getPartialPanoElementColor=function(){return"rgba(255, 255, 255, "+this.$7*.4+")"};a.prototype.$24=function(){return"rgba(255, 255, 255, "+this.$7+")"};a.prototype.$23=function(){return"rgba(0, 0, 0, "+this.$6+")"};a.prototype.$25=function(a,c,d,e){__p&&__p();this.$10=this.$9;this.$9=!0;var f=Date.now(),g=function(a){__p&&__p();var d=Date.now();if(this.$10){this.$10=!1;return}if(d-f>m){this.$9=!1;this.$6=c;this.$7=e;return}b("requestAnimationFrame")(function(){g(a)});d=b("easeInOutInterpolate")((d-f)/m);var h=a.deltaAlphaBG*d+a.startAlphaBG;d=a.deltaAlphaElement*d+a.startAlphaElement;this.$6=h;this.$7=d;this.draw(this.__getDrawData())}.bind(this),h=c-a,i=e-d;b("requestAnimationFrame")(function(){g({startAlphaBG:a,deltaAlphaBG:h,startAlphaElement:d,deltaAlphaElement:i})})};a.prototype.componentDidMount=function(){this.props.isActive&&this.draw(this.__getDrawData()),this.props.useNativeListeners&&(this.$12=new(b("SubscriptionsHandler"))(),this.$12.addSubscriptions(b("EventListener").listen(this.$4,"click",function(a){return this.__onClick(a)}.bind(this)),b("EventListener").listen(this.$4,"mouseover",function(){return this.$14(!0)}.bind(this)),b("EventListener").listen(this.$4,"mouseout",function(){return this.$14(!1,!1)}.bind(this))))};a.prototype.componentDidUpdate=function(){this.props.isActive&&this.draw(this.__getDrawData()),b("requestAnimationFrame")(this.$13)};a.prototype.componentWillUnmount=function(){this.$1=null,this.props.useNativeListeners&&this.$12.release()};a.prototype.render=function(){var a=this.$18(),c=this.props.isActive,d={};this.props.useNativeListeners||(d.onClick=function(a){return this.__onClick(a)}.bind(this),d.onMouseOver=function(){return this.$14(!0)}.bind(this),d.onMouseOut=function(){return this.$14(!1,!1)}.bind(this));return b("React").createElement("button",babelHelpers["extends"]({},d,{ref:function(a){return this.$4=a}.bind(this),className:"_17az sphericalHeadingIndicator"+(c?"":" hidden_elem"),style:{width:a.width,height:a.height}}),b("React").createElement("div",{className:"_17a-",ref:function(a){return this.$3=a}.bind(this)},b("React").createElement("canvas",{className:"_5nxw _17ay",ref:function(a){return this.$1=a}.bind(this)})))};e.exports=a}),null);
__d("SphericalVideoHeadingIndicator.react",["cx","fbt","BasicFBNux","React","SphericalMediaHeadingIndicator.react","SphericalPhotoPartialLimits","SphericalVideoExperiments","SphericalVideoHalfEquirectConfig","SphericalViewportControlStore","SubscriptionsHandler","VideoPlayerLoggerSource","VideoPlayerStates","XUIAmbientNUX.react","gkx"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j,k=b("SphericalPhotoPartialLimits").makePartialLimits,l=4320,m=h._("B\u1ea1n ch\u1ec9 \u0111ang xem nh\u1eefng c\u1ea3nh c\u00f3 s\u1ed1 l\u01b0\u1ee3t xem nhi\u1ec1u nh\u1ea5t cho video 360 n\u00e0y. B\u1ea1n c\u00f3 th\u1ec3 vu\u1ed1t ho\u1eb7c k\u00e9o video \u0111\u1ec3 xem th\u1ee7 c\u00f4ng."),n=b("gkx")("678911"),o=function(a){return a!==void 0&&a!==null};c=babelHelpers.inherits(p,b("SphericalMediaHeadingIndicator.react"));i=c&&c.prototype;function p(a){"use strict";i.constructor.call(this,a),o(this.__getDrawData().poiYaw)&&(this.__blinkStartTime=Date.now())}p.prototype.__onClick=function(a){"use strict";this.props.onClick(a)};p.prototype.__getDrawData=function(){"use strict";return{fov:this.props.fov,initialYaw:this.props.initialYaw,pointerYaw:this.props.pointerYaw,poiYaw:this.props.poiYaw,yaw:this.props.yaw}};p.prototype.$SphericalHeadingIndicatorImpl1=function(a){"use strict";return{fov:a.fov,initialYaw:a.initialYaw,pointerYaw:a.pointerYaw,poiYaw:a.poiYaw,yaw:a.yaw}};p.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";i.UNSAFE_componentWillReceiveProps.call(this,a);!o(this.props.poiYaw)&&o(a.poiYaw)&&(this.__blinkStartTime=Date.now());var b=a.isActive===this.props.isActive&&(a.initialYaw!==this.props.initialYaw||a.aspectRatio!==this.props.aspectRatio||a.fov!==this.props.fov||a.yaw!==this.props.yaw||a.pointerYaw!==this.props.pointerYaw||a.poiYaw!==this.props.poiYaw);b&&this.draw(this.$SphericalHeadingIndicatorImpl1(a))};p.prototype.shouldComponentUpdate=function(a){"use strict";a=i.shouldComponentUpdate.call(this,a)||a.poiYaw!==this.props.poiYaw;return a};p.__subClassMethods={__onClick:!0,__getDrawData:!0};d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(a){"use strict";j.constructor.call(this,a),this.$6=!1,this.$1=a.controller,this.$5=a.isComposer,this.$5||(this.$3=l,this.$4=m),this.$2=new(b("SubscriptionsHandler"))()}a.prototype.componentDidMount=function(){"use strict";this.$1.getOption("SphericalVideoPlayer","isReady")?this.$7():this.$2.addSubscriptions(this.$1.once("SphericalVideoPlayer/ready",function(){return this.$7()}.bind(this)))};a.prototype.componentWillUnmount=function(){"use strict";this.$2.release()};a.prototype.$7=function(){"use strict";__p&&__p();var a=this.$1.getVideoPlayerID();this.$2.addSubscriptions(this.$1.addListener("PhotoSnowlift/enterSnowlift",function(){return this.$8(!0)}.bind(this)),this.$1.addListener("PhotoSnowlift/exitSnowlift",function(){return this.$8(!1)}.bind(this)),this.$1.addListener("toggleFullscreen",function(){return this.$9()}.bind(this)),this.$1.addListener("beginPlayback",function(){return this.$10(!0)}.bind(this)),this.$1.addListener("finishPlayback",function(){return this.$10(!1)}.bind(this)),this.$1.addListener("VideoChannelController/enterChannel",function(){return this.$11(!0)}.bind(this)),this.$1.addListener("VideoChannelController/exitChannel",function(){return this.$11(!1)}.bind(this)),this.$1.addListener("TahoeController/enterTahoe",function(){return this.$12(!0)}.bind(this)),this.$1.addListener("TahoeController/exitTahoe",function(){return this.$12(!1)}.bind(this)),b("SphericalViewportControlStore").addListener(function(){var c=b("SphericalViewportControlStore"),d=c.getOrientation(a),e=d.pitch;d=d.yaw;this.setState({isActive:c.getViewportGrabbed(a),pitch:e,yaw:d,fov:c.getFieldOfView(a)})}.bind(this)),this.$1.addListener("SphericalVideoRecenterControl/animationStart",function(){return this.$13(!0)}.bind(this)),this.$1.addListener("SphericalVideoRecenterControl/animationEnd",function(){return this.$13(!1)}.bind(this)),this.$1.addListener("VideoControls/visibilityUpdate",function(a){a=a.areControlsVisible;return this.$13(a)}.bind(this)),this.$1.addListener("viewportChange",function(a,b){return this.forceUpdate()}.bind(this)),this.$1.addListener("VideoWithSphericalGuide/viewportChange",function(a){return this.setState({pointerYaw:a})}.bind(this)),this.$1.addListener("VideoWithSphericalGuide/intervalUpdate",function(a){return this.$14(a)}.bind(this)),this.$1.addListener("VideoWithSphericalGuide/toggle",function(a){return this.setState({isGuideAuto:a})}.bind(this)),this.$1.addListener("VideoWithSphericalGuide/stateToggle",function(a){a||this.setState({isGuideAuto:!1,poiYaw:void 0,pointerYaw:0})}.bind(this)));this.setState({isVisible:this.$1.isState(b("VideoPlayerStates").PLAYING),isActive:!1,inChannel:this.$1.getIsInChannel(),inSnowlift:this.$1.getOption("PhotoSnowlift","isInSnowlift"),inTahoe:this.$1.getSource()===b("VideoPlayerLoggerSource").TAHOE,inFullscreen:this.$1.isFullscreen(),isGuideAuto:this.$1.getOption("VideoWithSphericalGuide","auto"),showGuideNux:b("SphericalVideoExperiments").showGuideNux,pitch:b("SphericalViewportControlStore").getOrientation(a).pitch,yaw:b("SphericalViewportControlStore").getOrientation(a).yaw,fov:b("SphericalViewportControlStore").getFieldOfView(a)});n&&this.$1.getOption("VideoWithSphericalGuide","auto")&&this.$14(this.$1.getOption("VideoWithSphericalGuide","intervalData"));this.$6=!0};a.prototype.$10=function(a){"use strict";this.setState({isVisible:a})};a.prototype.$9=function(){"use strict";this.setState({inFullscreen:this.$1.isFullscreen()})};a.prototype.$11=function(a){"use strict";this.setState({inChannel:a})};a.prototype.$8=function(a){"use strict";this.setState({inSnowlift:a})};a.prototype.$12=function(a){"use strict";this.setState({inTahoe:a})};a.prototype.$13=function(a){"use strict";this.setState({isActive:a})};a.prototype.$15=function(){"use strict";this.setState({showGuideNux:!1}),b("BasicFBNux").onDismiss(l)};a.prototype.$14=function(a){"use strict";var b,c;n?(c=a.deltaX===0&&a.deltaY===0,b=c?void 0:a.baseX+a.deltaX):(c=a.deltaPitch===0&&a.deltaYaw===0,b=c?void 0:a.baseYaw+a.deltaYaw);this.setState({poiYaw:b,isActive:!c})};a.prototype.render=function(){"use strict";__p&&__p();if(!this.$6)return null;var a=this.$1.getOption("SphericalVideoPlayer","getDimensions"),c=a.width;a=a.height;var d=!this.state.inChannel&&!this.state.inSnowlift&&!this.state.inFullscreen&&!this.state.inTahoe,e=this.$1.getOption("VideoWithSphericalGuide","enabled"),f;this.$5||(f=this.state.showGuideNux&&e);e={};var g=this.$1.getOption("SphericalVideoPlayer","getIsSingleFisheye");if(g){g=this.$1.getOption("SphericalVideoPlayer","getOriginalFOV");g!==null&&g!==0&&(e.partialLimits=k({partialLeftDegrees:g/2,partialRightDegrees:g/2,partialTopDegrees:0,partialBottomDegrees:0}))}g=this.$1.getOption("SphericalVideoPlayer","getIsHalfEquirectangular");g&&(e.partialLimits=k(b("SphericalVideoHalfEquirectConfig").getHalfEquirectangularPartialLimits()));return b("React").createElement("div",{className:"_3ldo"+(d?" _42a0":"")+(this.state.inTahoe?" _4l1h":"")+(this.state.inFullscreen?" _70uh":"")},b("React").createElement(p,babelHelpers["extends"]({ref:"compass",aspectRatio:c/a,initialYaw:this.props.initialYaw,isActive:this.state.isVisible,fov:this.state.fov,pitch:this.state.pitch,yaw:this.state.yaw,onClick:this.props.onClick,useLargeHeadingIndicator:this.state.inFullscreen,isPanning:this.state.isActive,isGuideAuto:this.state.isGuideAuto,pointerYaw:this.state.pointerYaw,poiYaw:this.state.poiYaw},e)),b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.compass}.bind(this),shown:f,position:"left",onCloseButtonClick:function(){return this.$15()}.bind(this)},this.$4))};e.exports=a}),null);
__d("SpatialAudioFallbackReasons",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHANNEL:"channel",SCROLL:"scroll"})}),null);
__d("SphericalMediaPerformanceEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SNAPSHOT:"snapshot",AUDIO_FALLBACK:"audio_fallback",SPATIAL_REACTIONS_CLUSTERS_COMPUTATION:"spatial_reactions_clusters_computation",SPATIAL_REACTIONS_CACHE_REBUILD:"spatial_reactions_cache_rebuild",SPHERICAL_RENDERER_SETUP:"spherical_renderer_setup"})}),null);
__d("SphericalMediaProductNames",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SPHERICAL_VIDEO:"spherical_video",SPATIAL_AUDIO:"spatial_audio",SPATIAL_REACTIONS:"spatial_reactions"})}),null);
__d("SphericalVideoPerformanceTracker",["MovingAverage","SpatialAudioFallbackReasons","SphericalMediaPerformanceEvents","SphericalMediaPerformanceTypedLogger","SphericalMediaProductNames","Visibility","performance"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MovingAverage").MovingAverage;a=60;c=1e3;var h=10*c,i=15,j=c/a;function k(){"use strict";__p&&__p();k.$1=!1;this.$10=new g(500,j);this.$11=new(b("SphericalMediaPerformanceTypedLogger"))();this.$12=!1;this.$7=-1;this.$8=-1;this.$5=!1;this.$6=!1;var a=function(){this.$4=!1,this.$16()}.bind(this),c=function(){this.$4=!0}.bind(this);b("Visibility").isHidden()?a():c();b("Visibility").addListener(b("Visibility").HIDDEN,a);b("Visibility").addListener(b("Visibility").VISIBLE,c)}k.get=function(){"use strict";k.$2||(k.$2=new k());return k.$2};k.prototype.addFrameAtTime=function(a){"use strict";__p&&__p();if(!this.$4)return;if(a!==this.$9){k.$1=!0;this.$9=a;if(!this.$3)this.$3=a;else{var b=a-this.$3;this.$3=a;this.$10.add(b);this.$12||(this.$17(),this.$12=!0)}}};k.prototype.setProjection=function(a){"use strict";this.$15=a;return this};k.prototype.trackSpatialAudioMetrics=function(){"use strict";this.$5=!0,this.$14=0};k.prototype.isTrackingSpatialAudioMetrics=function(){"use strict";return this.$5};k.prototype.addAudioStutter=function(){"use strict";this.isTrackingSpatialAudioMetrics()||this.trackSpatialAudioMetrics(),this.$14++};k.prototype.enterSpatialAudioFallback=function(){"use strict";this.isTrackingSpatialAudioMetrics()||this.trackSpatialAudioMetrics(),this.$7=b("performance").now()};k.prototype.exitSpatialAudioFallback=function(){"use strict";this.isTrackingSpatialAudioMetrics()||this.trackSpatialAudioMetrics();if(this.$7>0){var a=Math.trunc(b("performance").now()-this.$7);this.$7=-1;this.$11.setProductName(b("SphericalMediaProductNames").SPATIAL_AUDIO).setEvent(b("SphericalMediaPerformanceEvents").AUDIO_FALLBACK).setFallbackDuration(a).setFallbackReason(b("SpatialAudioFallbackReasons").CHANNEL).log();this.$11.clear()}};k.prototype.trackSphericalRendererMetrics=function(){"use strict";this.$6=!0};k.prototype.isTrackingSphericalRendererMetrics=function(){"use strict";return this.$6};k.prototype.isOne360VideoActive=function(){"use strict";return k.$1};k.prototype.enterSphericalRendererSetup=function(){"use strict";this.isTrackingSphericalRendererMetrics()||this.trackSphericalRendererMetrics(),this.$8=b("performance").now()};k.prototype.exitSphericalRendererSetup=function(){"use strict";this.isTrackingSphericalRendererMetrics()||this.trackSphericalRendererMetrics();if(this.$8>0){var a=Math.trunc(b("performance").now()-this.$8);this.$8=-1;this.$11.setProductName(b("SphericalMediaProductNames").SPHERICAL_VIDEO).setEvent(b("SphericalMediaPerformanceEvents").SPHERICAL_RENDERER_SETUP).setProjection(this.$15).setSphericalRendererSetupDuration(a).log();this.$11.clear()}};k.prototype.log=function(){"use strict";__p&&__p();if(!this.isOne360VideoActive())return;else{var a=Math.trunc(this.$18()*Math.pow(10,i));this.$11.setProductName(b("SphericalMediaProductNames").SPHERICAL_VIDEO).setEvent(b("SphericalMediaPerformanceEvents").SNAPSHOT).setNormalizedFrameTime(a);this.$15&&this.$11.setProjection(this.$15);this.$5&&(this.$11.setProductName(b("SphericalMediaProductNames").SPATIAL_AUDIO).setNumSpatialAudioStutters(this.$14),this.$14=0);this.$11.log();this.$11.clear()}this.$16()};k.prototype.destroy=function(){"use strict";clearInterval(this.$13),k.$2=null};k.prototype.$18=function(){"use strict";return this.$10.getAvg()/j};k.prototype.$16=function(){"use strict";this.$3=null,k.$1=!1};k.prototype.$17=function(){"use strict";this.$13=setInterval(this.log.bind(this),h)};e.exports=k}),null);
__d("SphericalShader",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DEFAULT:"default",CUBE_MAP:"cube_map",CDS:"cds",CDS_FALLBACK:"cds_fallback",HALF_EQUIRECTANGULAR:"half_equirectangular"})}),null);
__d("CDSFallback.fs",[],(function(a,b,c,d,e,f){e.exports="\n  varying highp vec2 vTextureCoord;\n  varying highp vec3 vPos;\n  varying lowp float vRecompute;\n\n  uniform highp vec2 uOffset;\n  uniform sampler2D uSampler;\n\n  highp vec2 EquirectPart( highp vec3 p )\n  {\n    highp float xz = sqrt( p.x * p.x + p.z * p.z );\n    highp float lat = -atan( p.y, xz );\n    highp float t = lat / 1.57079633 / 1.01 + 0.5;\n    highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n    highp vec2 st = vec2(s, t);\n    return st;\n  }\n\n  highp vec2 FacePart( highp vec3 p )\n  {\n      highp vec2 t = p.xz / p.y;\n      highp float s = sign(p.y);\n      return vec2(0.9 + t.x * s * 0.099009901,\n          0.5 - s * 0.25 - t.y * 0.247524752);\n  }\n\n  void main()\n  {\n    if (vRecompute > 0.0) {\n      highp vec3 v = normalize( vPos );\n      highp float d = length( v.xz );\n      highp vec2 t = normalize(v.xz / d + uOffset) * d;\n      v = vec3(t.x, v.y, t.y);\n      highp vec2 o;\n      if ( abs(v.y) < 0.707106781 ) {\n        o = EquirectPart( v );\n      } else {\n        o = FacePart( v );\n      }\n      gl_FragColor = texture2D( uSampler, o );\n    } else {\n      gl_FragColor = texture2D( uSampler, vTextureCoord );\n    }\n  }\n"}),null);
__d("CDSFallback.vs",[],(function(a,b,c,d,e,f){e.exports="\n  attribute vec3 aVertexPosition;\n\n  // It's actually inverse MV matrix\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n  uniform highp vec2 uOffset;\n\n  varying highp vec2 vTextureCoord;\n  varying highp vec3 vPos;\n  varying lowp float vRecompute;\n\n  highp vec2 EquirectPart( highp vec3 p )\n  {\n    highp float xz = sqrt( p.x * p.x + p.z * p.z );\n    highp float lat = -atan( p.y, xz );\n    highp float t = lat / 1.57079633 / 1.01 + 0.5;\n    highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n    highp vec2 st = vec2(s, t);\n    return st;\n  }\n  highp vec2 FacePart( highp vec3 p )\n  {\n      highp vec2 t = p.xz / p.y;\n      highp float s = sign(p.y);\n      return vec2(0.9 + t.x * s * 0.099009901,\n          0.5 - s * 0.25 - t.y * 0.247524752);\n  }\n\n  const float eps = 0.03;\n\n  void main(void) {\n    gl_Position = uPMatrix * vec4(aVertexPosition, 1.0);\n    vPos = (uMVMatrix * vec4(aVertexPosition, 1.0)).xyz;\n    highp vec3 v = normalize( vPos );\n    highp float d = length( v.xz );\n    highp vec2 t = normalize(v.xz / d + uOffset) * d;\n    v = vec3(t.x, v.y, t.y);\n    vRecompute = 0.0;\n    if ( abs(v.y) < 0.707106781 ) {\n      vTextureCoord = EquirectPart( v );\n      vRecompute += float( vTextureCoord.x < eps * 0.5 ||\n          vTextureCoord.x > 0.8 - eps * 0.5 );\n    } else {\n      vTextureCoord = FacePart( v );\n      vRecompute += float( abs(v.y) > 1.0 - eps );\n    }\n    vRecompute += float( abs(v.y) < 0.707106781 + eps &&\n        abs(v.y) > 0.707106781 - eps );\n  }\n"}),null);
__d("CDSRenderer.fs",[],(function(a,b,c,d,e,f){e.exports="\n  varying highp vec2 vTextureCoord;\n  varying highp vec3 vPos;\n  varying lowp float vRecompute;\n  varying highp vec2 vOffset;\n\n  uniform sampler2D uSampler;\n\n  highp vec2 EquirectPart( highp vec3 p )\n  {\n    highp float xz = sqrt( p.x * p.x + p.z * p.z );\n    highp float lat = -atan( p.y, xz );\n    highp float t = lat / 1.57079633 / 1.01 + 0.5;\n    highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n    highp vec2 st = vec2(s, t);\n    return st;\n  }\n\n  highp vec2 FacePart( highp vec3 p )\n  {\n      highp vec2 t = p.xz / p.y;\n      highp float s = sign(p.y);\n      return vec2(0.9 + t.x * s * 0.099009901,\n          0.5 - s * 0.25 - t.y * 0.247524752);\n  }\n\n  void main()\n  {\n    if (vRecompute > 0.0) {\n      highp vec3 v = normalize( vPos );\n      highp float d = length( v.xz );\n      highp vec2 t = normalize(v.xz / d + vOffset) * d;\n      v = vec3(t.x, v.y, t.y);\n      highp vec2 o;\n      if ( abs(v.y) < 0.707106781 ) {\n        o = EquirectPart( v );\n      } else {\n        o = FacePart( v );\n      }\n      gl_FragColor = texture2D( uSampler, o );\n    } else {\n      gl_FragColor = texture2D( uSampler, vTextureCoord );\n    }\n  }\n"}),null);
__d("CDSRenderer.vs",[],(function(a,b,c,d,e,f){e.exports="\n  attribute vec3 aVertexPosition;\n\n  uniform sampler2D uSampler;\n  // It's actually inverse MV matrix\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n\n  varying highp vec2 vTextureCoord;\n  varying highp vec3 vPos;\n  varying lowp float vRecompute;\n  varying highp vec2 vOffset;\n\n  highp vec2 EquirectPart( highp vec3 p )\n  {\n    highp float xz = sqrt( p.x * p.x + p.z * p.z );\n    highp float lat = -atan( p.y, xz );\n    highp float t = lat / 1.57079633 / 1.01 + 0.5;\n    highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n    highp vec2 st = vec2(s, t);\n    return st;\n  }\n\n  highp vec2 FacePart( highp vec3 p )\n  {\n      highp vec2 t = p.xz / p.y;\n      highp float s = sign(p.y);\n      return vec2(0.9 + t.x * s * 0.099009901,\n          0.5 - s * 0.25 - t.y * 0.247524752);\n  }\n\n  highp vec4 extractFromSample(highp vec4 c)\n  {\n    highp float minC = min(0.5, min(c.r, min(c.g, c.b)));\n    highp float diffC = max(0.5, max(c.r, max(c.g, c.b))) - minC + 0.001;\n    return step(0.5, (c - minC) / diffC);\n  }\n\n  highp vec2 parseOffset()\n  {\n    highp float calculated_offsetX, calculated_offsetZ;\n    highp float offset_v, offset_e, offset_sig; // temp variables\n    highp vec4 texCoordsX[7], texCoordsZ[7]; // constants\n\n    texCoordsX[0] = extractFromSample(texture2D(uSampler, vec2(0.396, 1.0)));\n    texCoordsX[1] = extractFromSample(texture2D(uSampler, vec2(0.404, 1.0)));\n    texCoordsX[2] = extractFromSample(texture2D(uSampler, vec2(0.412, 1.0)));\n    texCoordsX[3] = extractFromSample(texture2D(uSampler, vec2(0.420, 1.0)));\n    texCoordsX[4] = extractFromSample(texture2D(uSampler, vec2(0.428, 1.0)));\n    texCoordsX[5] = extractFromSample(texture2D(uSampler, vec2(0.436, 1.0)));\n    texCoordsX[6] = extractFromSample(texture2D(uSampler, vec2(0.444, 1.0)));\n\n    offset_v = texCoordsX[0].r * 0.0009765625\n      + dot(texCoordsX[1].bgr, vec3(0.001953125, 0.00390625, 0.0078125))\n      + dot(texCoordsX[2].bgr, vec3(0.015625, 0.03125, 0.0625))\n      + dot(texCoordsX[3].bgr, vec3(0.125, 0.25, 0.5))\n      + 1.0;\n\n    offset_e = dot(texCoordsX[4].bgr, vec3(1.0, 2.0, 4.0))\n      + dot(texCoordsX[5].bgr, vec3(8.0, 16.0, 32.0))\n      + dot(texCoordsX[6].bg, vec2(64.0, 128.0))\n      - 127.0;\n\n    offset_sig = -2.0 * texCoordsX[6].r + 1.0;\n    calculated_offsetX = offset_sig * offset_v * pow(2.0, offset_e);\n\n\n    texCoordsZ[0] = extractFromSample(texture2D(uSampler, vec2(0.572, 1.0)));\n    texCoordsZ[1] = extractFromSample(texture2D(uSampler, vec2(0.580, 1.0)));\n    texCoordsZ[2] = extractFromSample(texture2D(uSampler, vec2(0.588, 1.0)));\n    texCoordsZ[3] = extractFromSample(texture2D(uSampler, vec2(0.596, 1.0)));\n    texCoordsZ[4] = extractFromSample(texture2D(uSampler, vec2(0.604, 1.0)));\n    texCoordsZ[5] = extractFromSample(texture2D(uSampler, vec2(0.612, 1.0)));\n    texCoordsZ[6] = extractFromSample(texture2D(uSampler, vec2(0.620, 1.0)));\n\n    offset_v = dot(texCoordsZ[0].bgr, vec3(0.0009765625, 0.001953125, 0.00390625))\n      + dot(texCoordsZ[1].bgr, vec3(0.0078125, 0.015625, 0.03125))\n      + dot(texCoordsZ[2].bgr, vec3(0.0625, 0.125, 0.25))\n      + texCoordsZ[3].b * 0.5\n      + 1.0;\n\n    offset_e = dot(texCoordsZ[3].gr, vec2(1.0, 2.0))\n      + dot(texCoordsZ[4].bgr, vec3(4.0, 8.0, 16.0))\n      + dot(texCoordsZ[5].bgr, vec3(32.0, 64.0, 128.0))\n      - 127.0;\n\n    offset_sig = 2.0 * texCoordsZ[6].b - 1.0;\n    calculated_offsetZ = offset_sig * offset_v * pow(2.0, offset_e);\n\n    return vec2(calculated_offsetX, calculated_offsetZ);\n  }\n\n  const float eps = 0.03;\n\n  void main(void) {\n    gl_Position = uPMatrix * vec4(aVertexPosition, 1.0);\n    vPos = (uMVMatrix * vec4(aVertexPosition, 1.0)).xyz;\n    highp vec3 v = normalize( vPos );\n    vOffset = parseOffset();\n    highp float d = length( v.xz );\n    highp vec2 t = normalize(v.xz / d + vOffset) * d;\n    v.xz = t.xy;\n    vRecompute = 0.0;\n    highp float abs_vy = abs(v.y);\n    if ( abs_vy < 0.707106781 ) {\n      vTextureCoord = EquirectPart( v );\n      vRecompute += float( vTextureCoord.x < eps * 0.5 ||\n          vTextureCoord.x > 0.8 - eps * 0.5 );\n    } else {\n      vTextureCoord = FacePart( v );\n      vRecompute += float( abs_vy > 1.0 - eps );\n    }\n    vRecompute += float( abs_vy < 0.707106781 + eps &&\n        abs_vy > 0.707106781 - eps );\n  }\n"}),null);
__d("DefaultRenderer.fs",[],(function(a,b,c,d,e,f){e.exports="\n  varying highp vec2 vTextureCoord;\n\n  uniform sampler2D uSampler;\n\n  void main(void) {\n    gl_FragColor = texture2D(\n      uSampler,\n      vec2(vTextureCoord.s, vTextureCoord.t)\n    );\n  }\n"}),null);
__d("DefaultRenderer.vs",[],(function(a,b,c,d,e,f){e.exports="\n  attribute vec3 aVertexPosition;\n  attribute vec2 aTextureCoord;\n\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n\n  varying highp vec2 vTextureCoord;\n\n  void main(void) {\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n  }\n"}),null);
__d("HalfEquirect.fs",[],(function(a,b,c,d,e,f){e.exports="\n  // If changed, copy this constant to the vertex shader\n  #define FEATHER_RATIO 0.0278  // 10 / 360 degrees\n\n  uniform highp mat4 uSTMatrix;\n  uniform mediump vec2 uBoundaries;\n  uniform sampler2D uSampler;\n\n  varying highp vec2 vTextureCoord;\n  varying mediump vec4 vLeftBoundaryColor;\n  varying mediump vec4 vRightBoundaryColor;\n\n  mediump float leftBoundary;\n  mediump float rightBoundary;\n  mediump float processedX;\n\n  mediump vec4 getTextureColor() {\n    return texture2D(uSampler, (uSTMatrix * vec4(vTextureCoord, 0, 1)).xy);\n  }\n\n  mediump float getWrappedValue(mediump float value) {\n    return value + (value < leftBoundary ? 1.0 : 0.0);\n  }\n\n  mediump vec4 interpolate() {\n    mediump float interp = (processedX - rightBoundary) / (1.0 + leftBoundary - rightBoundary);\n    return mix(vRightBoundaryColor, vLeftBoundaryColor, interp);\n  }\n\n  mediump vec4 getFeatheredPixel() {\n    bool useLeftBoundary = processedX <= leftBoundary + FEATHER_RATIO;\n    mediump vec4 currColor = getTextureColor();\n    mediump vec4 boundaryColor = useLeftBoundary ? vLeftBoundaryColor : vRightBoundaryColor;\n    mediump float interp =\n      (useLeftBoundary ? (processedX - leftBoundary) : (rightBoundary - processedX))\n      / FEATHER_RATIO;\n    return mix(boundaryColor, currColor, interp);\n  }\n\n  void main(void) {\n    leftBoundary = uBoundaries.x;\n    rightBoundary = getWrappedValue(uBoundaries.y);\n\n    processedX = getWrappedValue(vTextureCoord.x);\n    bool mainImageBetweenFeatheredBounds =\n      (processedX > leftBoundary + FEATHER_RATIO)\n      && (processedX < rightBoundary - FEATHER_RATIO);\n\n    if (mainImageBetweenFeatheredBounds) {\n      gl_FragColor = getTextureColor();\n    } else if (processedX < leftBoundary || processedX > rightBoundary) {\n      gl_FragColor = interpolate();\n    } else {\n      gl_FragColor = getFeatheredPixel();\n    }\n  }\n"}),null);
__d("HalfEquirect.vs",[],(function(a,b,c,d,e,f){e.exports="\n  #define HALF_WINDOW_SIZE 20\n  #define WINDOW_SIZE 2*HALF_WINDOW_SIZE\n  #define TRIANGLE_WIDTH 0.04  // 1 / 30 triangles\n  #define INV_HEIGHT 0.005\n  #define BLUR_LENGTH float(HALF_WINDOW_SIZE)*INV_HEIGHT\n\n  // If changed, copy this definition to the fragment shader\n  #define FEATHER_RATIO 0.0278  // 10 / 360 degrees\n\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n  uniform mat4 uSTMatrix;\n  uniform mediump vec2 uBoundaries;\n  uniform sampler2D uSampler;\n\n  attribute vec3 aVertexPosition;\n  attribute vec2 aTextureCoord;\n\n  varying highp vec2 vTextureCoord;\n  varying mediump vec4 vLeftBoundaryColor;\n  varying mediump vec4 vRightBoundaryColor;\n\n  mediump float leftBoundary;\n  mediump float rightBoundary;\n\n  mediump float getUnWrappedValue(mediump float value) {\n    return value - (value > 1.0 ? 1.0 : 0.0);\n  }\n\n  mediump vec4 getVerticalBlurredBoundaryPixel(mediump float y, bool isLeft) {\n    mediump vec4 result = vec4(0.0);\n    mediump float boundaryFactor = FEATHER_RATIO * 0.5;\n    mediump float coordJEnd = clamp(y + BLUR_LENGTH, 0.0, 1.0);\n    mediump float coordJ = clamp(y - BLUR_LENGTH, 0.0, 1.0);\n    int numSamples = 0;\n\n    for (int j = 0; j <= WINDOW_SIZE; j++) {\n      if (coordJ > coordJEnd) {\n        break;\n      }\n      mediump float coordI = isLeft ? leftBoundary : rightBoundary;\n\n      // get boundary pixel color\n      result += texture2D(uSampler, (uSTMatrix * vec4(getUnWrappedValue(coordI), coordJ, 0, 1)).xy);\n\n      // get one more horizontal sample to average out any noise\n      coordI += boundaryFactor * (isLeft ? 1.0 : -1.0);\n      result += texture2D(uSampler, (uSTMatrix * vec4(getUnWrappedValue(coordI), coordJ, 0, 1)).xy);\n\n      numSamples += 2;\n      coordJ += INV_HEIGHT;\n    }\n\n    result.rgb /= float(numSamples);\n    result.a = 1.0;\n    return result;\n  }\n\n  mediump float getWrappedValue(mediump float value) {\n    return value + (value < leftBoundary ? 1.0 : 0.0);\n  }\n\n  void maybeSetBoundaryColors() {\n    mediump float processedX = getWrappedValue(vTextureCoord.x);\n    bool mainImageBetweenFeatheredBounds =\n      processedX > (leftBoundary + FEATHER_RATIO + TRIANGLE_WIDTH)\n      && processedX < (rightBoundary - FEATHER_RATIO - TRIANGLE_WIDTH);\n    if (mainImageBetweenFeatheredBounds) {\n      return;\n    }\n    vLeftBoundaryColor = getVerticalBlurredBoundaryPixel(vTextureCoord.y, true);\n    vRightBoundaryColor = getVerticalBlurredBoundaryPixel(vTextureCoord.y, false);\n  }\n\n  void main(void) {\n    leftBoundary = uBoundaries.x;\n    rightBoundary = getWrappedValue(uBoundaries.y);\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    maybeSetBoundaryColors();\n  }\n"}),null);
__d("TextureCubeMap.fs",[],(function(a,b,c,d,e,f){e.exports="\n  varying highp vec3 vVertexDirectionVector;\n  uniform samplerCube uSampler;\n\n  void main(void) {\n    gl_FragColor = textureCube(uSampler, vVertexDirectionVector);\n  }\n"}),null);
__d("TextureCubeMap.vs",[],(function(a,b,c,d,e,f){e.exports="\n  attribute vec3 aVertexPosition;\n\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n\n  varying highp vec3 vVertexDirectionVector;\n\n  void main(void) {\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n    vVertexDirectionVector = aVertexPosition;\n  }\n"}),null);
__d("SphericalShaderUtils",["CDSFallback.fs","CDSFallback.vs","CDSRenderer.fs","CDSRenderer.vs","DefaultRenderer.fs","DefaultRenderer.vs","HalfEquirect.fs","HalfEquirect.vs","SphericalShader","TextureCubeMap.fs","TextureCubeMap.vs"],(function(a,b,c,d,e,f){__p&&__p();a={getVertexShader:function(a){switch(a){case b("SphericalShader").CUBE_MAP:return b("TextureCubeMap.vs");case b("SphericalShader").CDS:return b("CDSRenderer.vs");case b("SphericalShader").CDS_FALLBACK:return b("CDSFallback.vs");case b("SphericalShader").HALF_EQUIRECTANGULAR:return b("HalfEquirect.vs");default:return b("DefaultRenderer.vs")}},getFragmentShader:function(a){switch(a){case b("SphericalShader").CUBE_MAP:return b("TextureCubeMap.fs");case b("SphericalShader").CDS:return b("CDSRenderer.fs");case b("SphericalShader").CDS_FALLBACK:return b("CDSFallback.fs");case b("SphericalShader").HALF_EQUIRECTANGULAR:return b("HalfEquirect.fs");default:return b("DefaultRenderer.fs")}}};e.exports=a}),null);
__d("SphericalRenderer",["DOM","EventEmitter","EventListener","SphericalShader","SphericalShaderUtils","VideoProjection","VideoStereoFormat","gl-matrix"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("gl-matrix").glMatrix,i=b("gl-matrix").mat4,j=Math.max(window.devicePixelRatio||1,1),k=.25,l=.75;function m(){"use strict"}d=babelHelpers.inherits(c,b("EventEmitter"));g=d&&d.prototype;function c(a,c,d){"use strict";g.constructor.call(this),this.$SphericalRenderer2=d,this.$SphericalRenderer23=d.fieldOfView,this.$SphericalRenderer18=!0,this.$SphericalRenderer17=a,this.$SphericalRenderer1=c,this.$SphericalRenderer11=i.create(),this.$SphericalRenderer12=i.create(),this.$SphericalRenderer13=i.create(),this.$SphericalRenderer14=i.create(),this.$SphericalRenderer3=!1,this.$SphericalRenderer20=[],this.$SphericalRenderer22=null,this.$SphericalRenderer21=null,this.$SphericalRenderer19=d.projectionType===b("VideoProjection").UNPADDED_CUBESTRIP,this.$SphericalRenderer9=d.projectionType===b("VideoProjection").ROTATED_CUBEMAP,this.$SphericalRenderer7=d.projectionType===b("VideoProjection").CDS_BARREL,this.$SphericalRenderer8=!1,this.$SphericalRenderer10=d.projectionType===b("VideoProjection").HALF_EQUIRECTANGULAR,this.$SphericalRenderer25=new m(),this.$SphericalRenderer25.ready=!1,this.$SphericalRenderer26=!1,this.$SphericalRenderer4=this.$SphericalRenderer27.bind(this),this.$SphericalRenderer5=this.$SphericalRenderer28.bind(this),this.$SphericalRenderer1.addEventListener("webglcontextlost",this.$SphericalRenderer4),this.$SphericalRenderer1.addEventListener("webglcontextrestored",this.$SphericalRenderer5),this.$SphericalRenderer29()}c.prototype.destroy=function(){"use strict";this.removeAllListeners(),this.$SphericalRenderer1.removeEventListener("webglcontextlost",this.$SphericalRenderer4),this.$SphericalRenderer1.removeEventListener("webglcontextrestored",this.$SphericalRenderer5)};c.prototype.reconfigure=function(a,c,d){d===void 0&&(d=!1),d&&(this.$SphericalRenderer20=[],this.$SphericalRenderer22=null,this.$SphericalRenderer21=null),this.$SphericalRenderer23=c.fieldOfView,this.$SphericalRenderer17=a,this.$SphericalRenderer2=c,this.$SphericalRenderer19=c.projectionType===b("VideoProjection").UNPADDED_CUBESTRIP,this.$SphericalRenderer9=c.projectionType===b("VideoProjection").ROTATED_CUBEMAP,this.$SphericalRenderer7=c.projectionType===b("VideoProjection").CDS_BARREL,this.$SphericalRenderer10=c.projectionType===b("VideoProjection").HALF_EQUIRECTANGULAR,this.$SphericalRenderer25.framebuffer=null,this.$SphericalRenderer26=!1,this.$SphericalRenderer29()};c.prototype.hasRenderingContext=function(){"use strict";return!this.$SphericalRenderer3};c.prototype.$SphericalRenderer27=function(a){"use strict";a.preventDefault(),this.emit("renderingContextLost"),this.$SphericalRenderer3=!0};c.prototype.$SphericalRenderer28=function(a){"use strict";this.$SphericalRenderer3=!1,this.$SphericalRenderer29(),this.emit("renderingContextRestore")};c.prototype.setAutoUpdateTexture=function(a){"use strict";this.$SphericalRenderer18=a};c.prototype.updateFieldOfView=function(a){"use strict";this.$SphericalRenderer23!==a&&(this.$SphericalRenderer23=a,this.$SphericalRenderer30())};c.prototype.updateViewportDimensions=function(a,b){"use strict";this.$SphericalRenderer1.width=a*j,this.$SphericalRenderer1.height=b*j,this.$SphericalRenderer30()};c.prototype.$SphericalRenderer30=function(){"use strict";i.perspective(this.$SphericalRenderer11,h.toRadian(this.$SphericalRenderer23),this.$SphericalRenderer1.width/this.$SphericalRenderer1.height,.1,100),this.$SphericalRenderer6.viewport(0,0,this.$SphericalRenderer6.drawingBufferWidth,this.$SphericalRenderer6.drawingBufferHeight)};c.prototype.$SphericalRenderer31=function(){"use strict";this.$SphericalRenderer14=i.create(),this.$SphericalRenderer10&&(this.$SphericalRenderer14[0]=1/this.$SphericalRenderer24.x/(l-k),this.$SphericalRenderer14[5]=1/this.$SphericalRenderer24.y,this.$SphericalRenderer14[12]=-(this.$SphericalRenderer14[0]*k),this.$SphericalRenderer24={x:1,y:1})};c.prototype.$SphericalRenderer29=function(){"use strict";__p&&__p();this.$SphericalRenderer32();if(this.$SphericalRenderer7){var a=this.$SphericalRenderer6.getParameter(this.$SphericalRenderer6.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.$SphericalRenderer8=a==0}this.updateViewportDimensions(this.$SphericalRenderer1.clientWidth,this.$SphericalRenderer1.clientHeight);this.$SphericalRenderer24={x:this.$SphericalRenderer2.stereoFormat===b("VideoStereoFormat").LEFT_RIGHT?2:1,y:this.$SphericalRenderer2.stereoFormat===b("VideoStereoFormat").TOP_BOTTOM?2:1};this.$SphericalRenderer31();this.$SphericalRenderer33();this.$SphericalRenderer34();this.$SphericalRenderer6.clearColor(0,0,0,1);this.$SphericalRenderer17.setAttribute("crossorigin","anonymous")};c.prototype.getScreenshotDataURL=function(a,b,c,d){"use strict";if(!this.$SphericalRenderer6||this.$SphericalRenderer3)return"";this.render(a,b);return this.$SphericalRenderer1.toDataURL(c,d)};c.prototype.$SphericalRenderer32=function(){"use strict";__p&&__p();if(this.$SphericalRenderer6&&!this.$SphericalRenderer3)return;if(!(a.WebGLRenderingContext||a.WebGL2RenderingContext))throw new Error("WebGLRenderingContext not available.");var c=["webgl2","webgl","experimental-webgl"],d=null,e=null,f=b("EventListener").listen(this.$SphericalRenderer1,"webglcontextcreationerror",function(a){return e=a.statusMessage});for(var g=0;g<c.length;g++){try{d=this.$SphericalRenderer1.getContext(c[g])}catch(a){}if(d)break}f.remove();if(!d){e||(e="Unknown error.");throw new Error("Failed to acquire 3D rendering context: "+e)}this.$SphericalRenderer6=d;this.$SphericalRenderer3=!1};c.prototype.$SphericalRenderer33=function(){"use strict";var a=this.$SphericalRenderer7?this.$SphericalRenderer8?b("SphericalShader").CDS_FALLBACK:b("SphericalShader").CDS:this.$SphericalRenderer19?b("SphericalShader").CUBE_MAP:this.$SphericalRenderer10?b("SphericalShader").HALF_EQUIRECTANGULAR:b("SphericalShader").DEFAULT,c=this.$SphericalRenderer35(a);a=this.$SphericalRenderer36(a);this.$SphericalRenderer16=this.$SphericalRenderer6.createProgram();this.$SphericalRenderer6.attachShader(this.$SphericalRenderer16,c);this.$SphericalRenderer6.attachShader(this.$SphericalRenderer16,a);this.$SphericalRenderer6.linkProgram(this.$SphericalRenderer16)};c.prototype.$SphericalRenderer37=function(){"use strict";__p&&__p();if(!this.$SphericalRenderer6.getProgramParameter(this.$SphericalRenderer16,this.$SphericalRenderer6.LINK_STATUS)){var a="",b=this.$SphericalRenderer6.getAttachedShaders(this.$SphericalRenderer16);for(var c=0;c<b.length;c++)if(!this.$SphericalRenderer6.getShaderParameter(b[c],this.$SphericalRenderer6.COMPILE_STATUS)){a="Shader error: "+this.$SphericalRenderer6.getShaderInfoLog(b[c]);break}a===""&&(a="Program link error: "+this.$SphericalRenderer6.getProgramInfoLog(this.$SphericalRenderer16));throw new Error(a)}this.$SphericalRenderer6.useProgram(this.$SphericalRenderer16);this.$SphericalRenderer16.vertexPositionAttribute=this.$SphericalRenderer6.getAttribLocation(this.$SphericalRenderer16,"aVertexPosition");this.$SphericalRenderer6.enableVertexAttribArray(this.$SphericalRenderer16.vertexPositionAttribute);this.$SphericalRenderer16.pMatrixUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer16,"uPMatrix");this.$SphericalRenderer16.mvMatrixUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer16,"uMVMatrix");this.$SphericalRenderer16.stMatrixUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer16,"uSTMatrix");this.$SphericalRenderer16.samplerUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer16,"uSampler");!this.$SphericalRenderer19&&!this.$SphericalRenderer7&&(this.$SphericalRenderer16.textureCoordAttribute=this.$SphericalRenderer6.getAttribLocation(this.$SphericalRenderer16,"aTextureCoord"),this.$SphericalRenderer6.enableVertexAttribArray(this.$SphericalRenderer16.textureCoordAttribute));this.$SphericalRenderer8&&(this.$SphericalRenderer16.offsetUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer16,"uOffset"));this.$SphericalRenderer10&&(this.$SphericalRenderer16.boundariesUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer16,"uBoundaries"));this.$SphericalRenderer26=!0};c.prototype.$SphericalRenderer34=function(){"use strict";this.$SphericalRenderer15=this.$SphericalRenderer6.createTexture();this.$SphericalRenderer15.image=this.$SphericalRenderer17;var a=this.$SphericalRenderer19?this.$SphericalRenderer6.TEXTURE_CUBE_MAP:this.$SphericalRenderer6.TEXTURE_2D;this.$SphericalRenderer6.bindTexture(a,this.$SphericalRenderer15);this.$SphericalRenderer6.texParameteri(a,this.$SphericalRenderer6.TEXTURE_MAG_FILTER,this.$SphericalRenderer6.LINEAR);this.$SphericalRenderer6.texParameteri(a,this.$SphericalRenderer6.TEXTURE_MIN_FILTER,this.$SphericalRenderer6.LINEAR);this.$SphericalRenderer6.texParameteri(a,this.$SphericalRenderer6.TEXTURE_WRAP_S,this.$SphericalRenderer6.CLAMP_TO_EDGE);this.$SphericalRenderer6.texParameteri(a,this.$SphericalRenderer6.TEXTURE_WRAP_T,this.$SphericalRenderer6.CLAMP_TO_EDGE)};c.prototype.$SphericalRenderer38=function(a,b,c,d,e,f){__p&&__p();b===void 0&&(b=30);c===void 0&&(c=30);d===void 0&&(d=Math.PI);e===void 0&&(e=Math.PI*2);f===void 0&&(f=0);var g=2,h=[],i=[],j,k;for(j=0;j<=b;j++){var l=(j/b-.5)*d,m=Math.sin(l);l=Math.cos(l);for(k=0;k<=c;k++){var n=(k/c-.5)*e+f,o=Math.sin(n);n=Math.cos(n);n=n*l;var p=m;o=o*l;var q=k/c/this.$SphericalRenderer24.x,r=j/b/this.$SphericalRenderer24.y;i.push(q);i.push(r);h.push(g*n);h.push(g*p);h.push(g*o)}}q=[];for(j=0;j<b;j++)for(k=0;k<c;k++){r=j*(c+1)+k;n=r+c+1;q.push(r);q.push(n);q.push(r+1);q.push(n);q.push(n+1);q.push(r+1)}this.$SphericalRenderer20[a]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20[a]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(i),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer20[a].itemSize=2;this.$SphericalRenderer20[a].numItems=i.length/2;this.$SphericalRenderer22=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer22);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(h),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer22&&(this.$SphericalRenderer22.itemSize=3,this.$SphericalRenderer22.numItems=h.length/3);this.$SphericalRenderer21=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer21);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(q),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer21&&(this.$SphericalRenderer21.itemSize=1,this.$SphericalRenderer21.numItems=q.length)};c.prototype.$SphericalRenderer39=function(a,b){"use strict";__p&&__p();var c=40,d=60,e=2,f=[],g=[],h=[],i=[],j,k;for(j=0;j<=c;j++){var l=j/c-.5,m=l*.5*Math.PI,n=Math.sin(m);m=Math.cos(m);var o=(l/a+.5)/this.$SphericalRenderer24.y;for(k=0;k<=d;k++){var p=k/d-.5,q=p*2*Math.PI,r=Math.sin(q);q=Math.cos(q);var s=q*m*e,t=n*e,u=r*m*e;p=(p/a*.8+.4)/this.$SphericalRenderer24.x;g.push(p);g.push(o);f.push(s);f.push(t);f.push(u);if(j==0||j==c){p=Math.sign(1-j);r=(r*.1/a+.9)/this.$SphericalRenderer24.x;q=(q*.25*p/a+.5+l*.5)/this.$SphericalRenderer24.y;i.push(r);i.push(q);h.push(s);h.push(t);h.push(u)}}}p=f.length/3;g.push.apply(g,i);f.push.apply(f,h);r=f.length/3;q=Math.sin(Math.PI*.25)*e;g.push(.9/this.$SphericalRenderer24.x);g.push(.25/this.$SphericalRenderer24.y);f.push(0);f.push(-q);f.push(0);g.push(.9/this.$SphericalRenderer24.x);g.push(.75/this.$SphericalRenderer24.y);f.push(0);f.push(q);f.push(0);s=[];for(j=0;j<c;j++)for(k=0;k<d;k++){t=j*(d+1)+k;u=t+d+1;s.push(t);s.push(u);s.push(t+1);s.push(u);s.push(u+1);s.push(t+1)}for(var m=0;m<2;m++)for(k=0;k<d;k++)s.push(k+p+m*(d+1)),s.push(k+p+m*(d+1)+1),s.push(r+m);this.$SphericalRenderer20[b]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20[b]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(g),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer20[b].itemSize=2;this.$SphericalRenderer20[b].numItems=g.length/2;this.$SphericalRenderer22=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer22);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(f),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer22&&(this.$SphericalRenderer22.itemSize=3,this.$SphericalRenderer22.numItems=f.length/3);this.$SphericalRenderer21=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer21);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer21&&(this.$SphericalRenderer21.itemSize=1,this.$SphericalRenderer21.numItems=s.length)};c.prototype.$SphericalRenderer40=function(a,b,c){"use strict";__p&&__p();this.$SphericalRenderer9?a=[1,3,7,5,6,7,3,2,0,2,3,1,4,5,7,6,4,6,2,0,0,1,5,4]:a=[5,1,3,7,0,4,6,2,6,7,3,2,0,1,5,4,4,5,7,6,1,0,2,3];var d=[];for(var e=0;e<a.length;e++){var f=a[e]>>2&1,g=a[e]>>1&1,h=a[e]>>0&1;d.push(f*2-1);d.push(g*2-1);d.push(h*2-1)}this.$SphericalRenderer22=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer22);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(d),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer22&&(this.$SphericalRenderer22.itemSize=3,this.$SphericalRenderer22.numItems=d.length/3);if(!this.$SphericalRenderer19){var i;f=[];if(this.$SphericalRenderer9){g=this.$SphericalRenderer15.image.videoWidth/2;b=g/(Math.floor(g/32)*32);h=(1-1/b)/2;e=3;d=2;g=1/d;i=1/e}else h=(1-1/b)/2,e=2,d=3,g=1/d,i=1/e;for(var b=0;b<e;++b)for(var j=0;j<d;++j){var k=e-1-b,l=j;f.push((l+h)*g);f.push((k+h)*i);f.push((l+1-h)*g);f.push((k+h)*i);f.push((l+1-h)*g);f.push((k+1-h)*i);f.push((l+h)*g);f.push((k+1-h)*i)}this.$SphericalRenderer20[c]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20[c]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(f),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer20[c].itemSize=2;this.$SphericalRenderer20[c].numItems=f.length/2}l=[];for(var k=0;k<a.length;k+=4)l.push(k),l.push(k+2),l.push(k+1),l.push(k),l.push(k+3),l.push(k+2);this.$SphericalRenderer21=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer21);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(l),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer21&&(this.$SphericalRenderer21.itemSize=1,this.$SphericalRenderer21.numItems=l.length)};c.prototype.$SphericalRenderer35=function(a){"use strict";var c=this.$SphericalRenderer6.createShader(this.$SphericalRenderer6.VERTEX_SHADER);a=b("SphericalShaderUtils").getVertexShader(a);this.$SphericalRenderer6.shaderSource(c,a);this.$SphericalRenderer6.compileShader(c);return c};c.prototype.$SphericalRenderer36=function(a){"use strict";var c=this.$SphericalRenderer6.createShader(this.$SphericalRenderer6.FRAGMENT_SHADER);a=b("SphericalShaderUtils").getFragmentShader(a);this.$SphericalRenderer6.shaderSource(c,a);this.$SphericalRenderer6.compileShader(c);return c};c.prototype.$SphericalRenderer41=function(){"use strict";this.$SphericalRenderer25.framebuffer=this.$SphericalRenderer6.createFramebuffer(),this.$SphericalRenderer6.bindFramebuffer(this.$SphericalRenderer6.FRAMEBUFFER,this.$SphericalRenderer25.framebuffer),this.$SphericalRenderer6.framebufferTexture2D(this.$SphericalRenderer6.FRAMEBUFFER,this.$SphericalRenderer6.COLOR_ATTACHMENT0,this.$SphericalRenderer6.TEXTURE_2D,this.$SphericalRenderer15,0),this.$SphericalRenderer6.bindFramebuffer(this.$SphericalRenderer6.FRAMEBUFFER,null)};c.prototype.$SphericalRenderer42=function(){"use strict";this.$SphericalRenderer6.bindFramebuffer(this.$SphericalRenderer6.FRAMEBUFFER,this.$SphericalRenderer25.framebuffer),this.$SphericalRenderer6.readPixels(0,this.$SphericalRenderer15.image.videoHeight-1,this.$SphericalRenderer15.image.videoWidth,1,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.UNSIGNED_BYTE,this.$SphericalRenderer25.pixels),this.$SphericalRenderer6.bindFramebuffer(this.$SphericalRenderer6.FRAMEBUFFER,null)};c.prototype.$SphericalRenderer43=function(){"use strict";__p&&__p();this.$SphericalRenderer25.bitmask.fill(0);var a=[0,0,0],b=this.$SphericalRenderer15.image.videoWidth/125,c=Math.round(b),d;for(d=0;d<33;++d){var e=Math.floor((45+d)*b)*4,f=128,g=127;for(var h=0;h<3;++h){a[h]=0;for(var i=0;i<c;++i)a[h]+=this.$SphericalRenderer25.pixels[e+i*4+(2-h)];a[h]/=c;f=Math.max(f,a[h]);g=Math.min(g,a[h])}for(h=0;h<3;++h){i=(a[h]-g)/(f-g);this.$SphericalRenderer25.bitmask[d*3+h]=i>.5?1:0}}for(d=0;d<12;++d){e=0;for(var i=0;i<8;++i)e+=this.$SphericalRenderer25.bitmask[1+d*8+i]*Math.pow(2,i);this.$SphericalRenderer25.dataView.setUint8(d,e)}this.$SphericalRenderer25.offsetX=this.$SphericalRenderer25.dataView.getFloat32(0,!0);this.$SphericalRenderer25.offsetZ=-this.$SphericalRenderer25.dataView.getFloat32(8,!0)};c.prototype.$SphericalRenderer44=function(){"use strict";try{this.$SphericalRenderer25.ready||(this.$SphericalRenderer25.pixels=new Uint8Array(3840*4),this.$SphericalRenderer25.bitmask=new Uint8Array(33*3),this.$SphericalRenderer25.dataView=new DataView(new ArrayBuffer(12)),this.$SphericalRenderer25.ready=!0),this.$SphericalRenderer25.framebuffer||this.$SphericalRenderer41(),this.$SphericalRenderer42(),this.$SphericalRenderer43()}catch(a){this.emit("renderingError",a)}};c.prototype.$SphericalRenderer45=function(){"use strict";__p&&__p();if(this.$SphericalRenderer19)this.$SphericalRenderer46();else{this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_2D,this.$SphericalRenderer15);this.$SphericalRenderer6.pixelStorei(this.$SphericalRenderer6.UNPACK_FLIP_Y_WEBGL,!this.$SphericalRenderer7);try{this.$SphericalRenderer6.texImage2D(this.$SphericalRenderer6.TEXTURE_2D,0,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.UNSIGNED_BYTE,this.$SphericalRenderer15.image)}catch(a){this.emit("renderingError",a)}this.$SphericalRenderer8&&this.$SphericalRenderer44()}};c.prototype.renderWithRotationMatrix=function(a){"use strict";if(this.$SphericalRenderer3)return;this.$SphericalRenderer18&&this.$SphericalRenderer45();this.$SphericalRenderer12=a;this.$SphericalRenderer7&&i.rotateY(this.$SphericalRenderer12,this.$SphericalRenderer12,h.toRadian(-90));this.$SphericalRenderer47()};c.prototype.render=function(a,b){"use strict";if(this.$SphericalRenderer3)return;this.$SphericalRenderer18&&this.$SphericalRenderer45();this.$SphericalRenderer9?(i.identity(this.$SphericalRenderer12),i.rotateX(this.$SphericalRenderer12,this.$SphericalRenderer12,h.toRadian(-b)),i.rotateY(this.$SphericalRenderer12,this.$SphericalRenderer12,h.toRadian(a-135)),i.rotateZ(this.$SphericalRenderer12,this.$SphericalRenderer12,h.toRadian(45))):(this.$SphericalRenderer7&&(a-=90),i.identity(this.$SphericalRenderer12),i.rotateX(this.$SphericalRenderer12,this.$SphericalRenderer12,-h.toRadian(b)),i.rotateY(this.$SphericalRenderer12,this.$SphericalRenderer12,h.toRadian(a)));this.$SphericalRenderer47()};c.prototype.$SphericalRenderer47=function(){"use strict";__p&&__p();if(this.$SphericalRenderer19)this.$SphericalRenderer22===null&&this.$SphericalRenderer40(this.$SphericalRenderer2.projectionType,this.$SphericalRenderer2.expansionCoef||0,0);else{this.$SphericalRenderer26||(this.$SphericalRenderer37(),this.$SphericalRenderer6.activeTexture(this.$SphericalRenderer6.TEXTURE0));var a=this.$SphericalRenderer15.image.videoWidth;this.$SphericalRenderer2.projectionType===b("VideoProjection").CUBEMAP||this.$SphericalRenderer2.projectionType===b("VideoProjection").ROTATED_CUBEMAP?a in this.$SphericalRenderer20||this.$SphericalRenderer40(this.$SphericalRenderer2.projectionType,this.$SphericalRenderer2.expansionCoef||0,a):this.$SphericalRenderer2.projectionType===b("VideoProjection").BARREL?a in this.$SphericalRenderer20||this.$SphericalRenderer39(this.$SphericalRenderer2.expansionCoef||1.01,a):this.$SphericalRenderer7?a in this.$SphericalRenderer20||this.$SphericalRenderer38(a,40,40,Math.PI/180*111,Math.PI/180*142,-Math.PI/2):a in this.$SphericalRenderer20||this.$SphericalRenderer38(a);this.$SphericalRenderer7||(this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20[a]),this.$SphericalRenderer6.vertexAttribPointer(this.$SphericalRenderer16.textureCoordAttribute,this.$SphericalRenderer20[a].itemSize,this.$SphericalRenderer6.FLOAT,!1,0,0))}this.$SphericalRenderer6.uniform1i(this.$SphericalRenderer16.samplerUniform,0);this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer22);this.$SphericalRenderer22&&this.$SphericalRenderer6.vertexAttribPointer(this.$SphericalRenderer16.vertexPositionAttribute,this.$SphericalRenderer22.itemSize,this.$SphericalRenderer6.FLOAT,!1,0,0);this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer21);this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer16.pMatrixUniform,!1,this.$SphericalRenderer11);this.$SphericalRenderer10&&this.$SphericalRenderer6.uniform2f(this.$SphericalRenderer16.boundariesUniform,k,l);this.$SphericalRenderer7?(i.invert(this.$SphericalRenderer13,this.$SphericalRenderer12),this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer16.mvMatrixUniform,!1,this.$SphericalRenderer13),this.$SphericalRenderer8&&this.$SphericalRenderer6.uniform2f(this.$SphericalRenderer16.offsetUniform,this.$SphericalRenderer25.offsetX,this.$SphericalRenderer25.offsetZ)):this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer16.mvMatrixUniform,!1,this.$SphericalRenderer12);this.$SphericalRenderer10&&this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer16.stMatrixUniform,!1,this.$SphericalRenderer14);this.$SphericalRenderer21&&this.$SphericalRenderer6.drawElements(this.$SphericalRenderer6.TRIANGLES,this.$SphericalRenderer21.numItems,this.$SphericalRenderer6.UNSIGNED_SHORT,0)};c.prototype.$SphericalRenderer48=function(){"use strict";var a=this.$SphericalRenderer6.getParameter(this.$SphericalRenderer6.MAX_CUBE_MAP_TEXTURE_SIZE),b=this.$SphericalRenderer15.image.width;return Math.min(a,b)};c.prototype.$SphericalRenderer46=function(){"use strict";__p&&__p();var a=this.$SphericalRenderer48(),c=this.$SphericalRenderer15.image.width,d=b("DOM").create("canvas",{width:a,height:a});d=d.getContext("2d");this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_CUBE_MAP,this.$SphericalRenderer15);this.$SphericalRenderer6.pixelStorei(this.$SphericalRenderer6.UNPACK_FLIP_Y_WEBGL,!1);for(var e=0;e<6;e++){d.drawImage(this.$SphericalRenderer15.image,0,e*c,c,c,0,0,a,a);var f=new Uint8Array(d.getImageData(0,0,a,a).data);this.$SphericalRenderer6.texImage2D(this.$SphericalRenderer6.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,this.$SphericalRenderer6.RGBA,a,a,0,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.UNSIGNED_BYTE,f)}};e.exports=c}),null);
__d("SphericalVideoPlayer",["cx","invariant","Arbiter","Banzai","CSS","DOM","DOMDimensions","Event","FullScreen","QE2Logger","SphericalMediaCanvasPool","SphericalParallaxUtils","SphericalRenderer","SphericalVideoComponentActions","SphericalVideoComponentDispatcher","SphericalVideoExperiments","SphericalVideoHalfEquirectConfig","SphericalVideoPerformanceTracker","SphericalVideoPlayerEvents","SphericalViewportControl","SphericalViewportControlNew","SphericalViewportMediaToMovementConfig","SubscriptionsHandler","VideoPlayerFallbackEvents","VideoPlayerLoggerEvent","VideoPlayerLoggerSource","VideoPlayerReason","VideoPlayerReasonTransitionHelper","VideoPlayerStates","VideoProjection","forwardEvent","getElementRect","getFullScreenElement","getViewportDimensions","gkx","onViewportChanged","requestAnimationFrame","uniqueID","SphericalViewportControlStore","VideoPlayerControllerStore"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("SphericalParallaxUtils").calculateYawOffset,j=b("SphericalViewportMediaToMovementConfig").SphericalViewportMediaEnum,k="SphericalVideoPlayer";d=2;var l=1e3,m="www_videos_spherical_parallax";f=.8;g=16;var n=15,o=f/g/n,p=50,q=.1,r=b("gkx")("678911");b("SphericalMediaCanvasPool").setLimit(d,k);function c(a,c){__p&&__p();this.$48=function(){var a=!!this.$1.getOption("VideoWithSphericalGuide","auto");if(this.$1.getSource()!==b("VideoPlayerLoggerSource").INLINE||a)return;a=this.$55();if(a===null)return;typeof a==="number"||h(0,1207);this.$26=a;this.$29&&(this.$24=this.$12.getOrientation().x-this.$26,this.$25=this.$26,this.$29=!1)}.bind(this),this.$50=function(){this.$1.isState(b("VideoPlayerStates").PAUSED)||this.$1.pause(b("VideoPlayerReason").SPHERICAL_SWITCH_CANVAS),this.$57(),this.$46()}.bind(this),this.$54=function(a){__p&&__p();if(!this.$14)return;var c=this.$14,d=this.$30?a-this.$30:0;d=this.$56(d);d&&this.$36(this.$24+this.$25,null);if(this.$2.readyState>=this.$2.HAVE_CURRENT_DATA&&(this.$44()||this.$7||d)){b("SphericalVideoPerformanceTracker").get().setProjection(this.$10.projectionType).addFrameAtTime(a);this.$7=!1;if(r){d=this.$13.getOrientation();c.render(d.x+90,d.y)}else{d=this.$12.getOrientation();c.render(d.x+90,d.y)}this.$16&&(this.$16.remove(),this.$16=null)}this.$30=a;b("requestAnimationFrame")(this.$54)}.bind(this),this.$33=function(a,b){if(r){var c=this.$13.getOrientation();c.x+=a;c.y+=b;this.$13.setOrientation(c)}else this.$12.setRelativeSphericalOrientation(a,b)}.bind(this),this.$36=function(a,b){if(r){var c=this.$13.getOrientation();c.x=typeof a==="number"?a:c.x;c.y=typeof b==="number"?b:c.y;this.$13.setOrientation(c)}else this.$12.setSphericalOrientation(a,b)}.bind(this),this.$37=function(a){__p&&__p();if(this.$14){this.$14.updateFieldOfView(a);if(r){var b=this.$13.getOrientation();b.vFOV=a;this.$13.setOrientation(b)}else this.$12.setFieldOfView(a);this.$20=a;this.$32()}}.bind(this),this.$38=function(a){this.$14&&(this.$10.projectionType=a,this.$14.reconfigure(this.$2,this.$10,!0),this.$32())}.bind(this),this.$39=function(a){this.$14&&(this.$10.stereoFormat=a,this.$14.reconfigure(this.$2,this.$10,!0),this.$32())}.bind(this),this.$40=function(a){this.$12&&(this.$10.partialLimits=a,this.$12.reconfigure(this.$10),this.$32())}.bind(this),this.$41=function(a){a===void 0&&(a={}),this.$12&&(this.$12.reconfigureControlConfig(a),this.$32())}.bind(this),this.$34=function(a,c){if(b("FullScreen").isFullScreen()&&(a<this.$5.width||c<this.$5.height))return;this.$14?(this.$5.width=a,this.$5.height=c,this.$53(this.$14,a,c),this.$11.useViewportDimension&&(this.$6=b("DOMDimensions").getElementDimensions(this.$4)),this.$32()):this.$5={width:a,height:c}}.bind(this),this.$52=function(a,b,c){__p&&__p();if(!this.$14)return;a=a>=0?(a+180)%360-180:(a-180)%360+180;this.$59(a,b);this.$19.yaw=a;this.$19.pitch=b;this.$20=c;this.$14&&this.$14.updateFieldOfView(c);this.$58(a);this.$32()}.bind(this),this.$10=a,this.$11=Object.assign({viewportClassName:"_2a6s",canvasClassName:"_38vt",placeholderImgClassName:"_44h9",videoID:"",playerID:void 0,eagerPreload:void 0,preventScrollDefaultAction:void 0,useViewportDimension:void 0,useContainerDimensions:void 0},c),this.$22=0,this.$28=!0,this.$29=!1}c.prototype.enable=function(c){__p&&__p();if(this.$1)return;this.$1=c;if(typeof a.WebGLRenderingContext!=="function"&&typeof a.WebGL2RenderingContext!=="function"){this.$31({error:"SPHERICAL_SETUP_FAILED",message:"WebGLRenderingContext not available."});return}if(!b("gkx")("678912")){this.$31({error:"SPHERICAL_RENDER_ERROR",message:"Unsupported browser version"});return}var d=c.getVideoNode();d instanceof HTMLVideoElement||h(0,1208);this.$2=d;this.$7=!1;this.$18=!0;this.$8=new(b("SubscriptionsHandler"))();this.$8.addSubscriptions(b("Event").listen(this.$2,"loadeddata",function(){return this.$32()}.bind(this)),b("Event").listen(this.$2,"seeked",function(){return this.$32()}.bind(this)),b("Event").listen(this.$2,"ended",function(){return this.$33(0,0)}.bind(this)),b("Event").listen(window,"resize",function(){b("FullScreen").isFullScreen()&&this.$1.getContainerNode()===b("getFullScreenElement")()&&this.$34(window.innerWidth,window.innerHeight)}.bind(this)),c.addListener("stateChange",function(){(c.isState(b("VideoPlayerStates").DESTROYED)||c.isState(b("VideoPlayerStates").FALLBACK)&&(c.isLiveVideo()||!c.isFallbackRecoverable()))&&this.$35()}.bind(this)),c.addListener(b("VideoPlayerFallbackEvents").RECOVER,function(){this.$35(),b("CSS").removeClass(this.$2,"_3axk"),this.$1.play(new(b("VideoPlayerReasonTransitionHelper"))(b("VideoPlayerReason").SPHERICAL_FALLBACK))}.bind(this)),c.addListener(b("SphericalVideoPlayerEvents").SET_ABSOLUTE_SPHERICAL_ORIENTATION,this.$36),c.addListener(b("SphericalVideoPlayerEvents").SET_RELATIVE_SPHERICAL_ORIENTATION,this.$33),c.addListener(b("SphericalVideoPlayerEvents").SET_FIELD_OF_VIEW,this.$37),c.addListener(b("SphericalVideoPlayerEvents").SET_VIDEO_PROJECTION,this.$38),c.addListener(b("SphericalVideoPlayerEvents").SET_STEREO_MODE,this.$39),c.addListener(b("SphericalVideoPlayerEvents").SET_PARTIAL_LIMITS,this.$40),c.addListener(b("SphericalVideoPlayerEvents").SET_VIEWPORT_CONTROL_CONFIG,this.$41),c.addListener("dimensionsChange",this.$34),c.once("changeVolume",function(){return this.$18=!1}.bind(this)),c.once("muteVideo",function(){return this.$18=!1}.bind(this)),c.once("unmuteVideo",function(){return this.$18=!1}.bind(this)),c.addListener("toggleFullscreen",function(){return this.$4.focus()}.bind(this)),c.addListener("TahoeController/enterTahoe",function(){this.$4.focus(),r?this.$13.setInTahoe(!0):(this.$12.setEnableZoom(!0),this.$23=!0,this.$1.emit("SphericalVideoPlayer/zoomEnabled"))}.bind(this)),c.addListener("TahoeController/exitTahoe",function(){this.$4.focus(),r?this.$13.setInTahoe(!1):(this.$12.setEnableZoom(!1),this.$23=!1,this.$1.emit("SphericalVideoPlayer/zoomDisabled"))}.bind(this)));if(this.$11.useContainerDimensions){var e=c.getContainerNode();this.$5=b("DOMDimensions").getElementDimensions(e)}else this.$5=b("DOMDimensions").getElementDimensions(d),(this.$5.width===0||this.$5.height===0)&&(this.$5={width:d.width,height:d.height});this.$15=this.$1.getVideoPlayerID()||b("uniqueID")();this.$19={yaw:this.$10.initialHeading,pitch:this.$10.initialPitch};this.$20=this.$10.fieldOfView;this.$23=!1;e=c.getVideoProjection();e&&(this.$10.projectionType=e);b("CSS").addClass(d,"_3axk");this.$42();c.registerOption("SphericalVideoPlayer","getDimensions",function(){return this.$11.useViewportDimension?this.$6:this.$5}.bind(this));c.registerOption("SphericalVideoPlayer","isReady",function(){return!!this.$14}.bind(this));c.registerOption("SphericalVideoPlayer","getScreenshotDataURL",function(){return this.$43()}.bind(this));c.registerOption("SphericalVideoPlayer","getIsSingleFisheye",function(){return this.$10.isSingleFisheye&&this.$10.originalFOV!==null}.bind(this));c.registerOption("SphericalVideoPlayer","getOriginalFOV",function(){return this.$10.originalFOV}.bind(this));c.registerOption("SphericalVideoPlayer","getEnableZoom",function(){return this.$23}.bind(this));c.registerOption("SphericalVideoPlayer","getIsHalfEquirectangular",function(){return this.$10.projectionType===b("VideoProjection").HALF_EQUIRECTANGULAR}.bind(this));this.$44()||this.$11.eagerPreload?this.$45():this.$46()};c.prototype.disable=function(){this.$35()};c.prototype.$45=function(){__p&&__p();if(this.$1.getOption("SphericalVideoPlayer","isUnavailable"))return;this.$17&&(this.$17.remove(),this.$17=null);try{b("SphericalVideoPerformanceTracker").get().setProjection(this.$10.projectionType).enterSphericalRendererSetup(),this.$47(),b("SphericalVideoPerformanceTracker").get().exitSphericalRendererSetup()}catch(a){this.$31({error:"SPHERICAL_SETUP_FAILED",message:a.message});return}this.$1.setStillFrameEnabled(!1);this.$32();this.$1.emit("SphericalVideoPlayer/ready");b("QE2Logger").logExposureForUser(m);if(b("SphericalVideoExperiments").enableWWWParallax&&!r){var a=this.$12.getOrientation().x;this.$28?this.$24=a:this.$29=!0;this.$27=b("onViewportChanged")(this.$48)}this.$28=!1};c.prototype.$46=function(){this.$17=this.$1.addListener("stateChange",function(){this.$44()&&this.$45()}.bind(this))};c.prototype.$49=function(){if(!this.$14)return;var a=this.$43();a=b("DOM").create("img",{width:this.$5.width,height:this.$5.height,src:a,className:this.$11.placeholderImgClassName});b("DOM").insertAfter(this.$2,a);this.$16&&this.$16.remove();this.$16=a;this.$50()};c.prototype.$43=function(a,b){if(!this.$14)return"";var c=this.$14,d=r?this.$13.getOrientation():this.$12.getOrientation(),e=d.x;d=d.y;return c.getScreenshotDataURL(e+90,d,a,b)};c.prototype.$42=function(){__p&&__p();var a=b("DOM").create("div",{className:this.$11.viewportClassName,tabIndex:0}),c={};if(this.$10.isSingleFisheye&&this.$10.originalFOV){var d=this.$10.originalFOV/2;this.$10.partialLimits={partialLeftDegrees:d,partialRightDegrees:d,partialTopDegrees:d,partialBottomDegrees:d};c=this.$51()}this.$10.projectionType===b("VideoProjection").HALF_EQUIRECTANGULAR&&(this.$10.partialLimits=b("SphericalVideoHalfEquirectConfig").getHalfEquirectangularPartialLimits(),c=b("SphericalVideoHalfEquirectConfig").getHalfEquirectangularControllerConfig());b("SphericalVideoComponentDispatcher").explicitlyRegisterStores([b("SphericalViewportControlStore"),b("VideoPlayerControllerStore")]);if(r){this.$13=new(b("SphericalViewportControlNew"))(a,j.WWW_VIDEO,this.$10,{vpc:this.$1});b("SphericalVideoComponentActions").registerSphericalViewportControl(this.$1.getVideoPlayerID(),this.$13,this.$4);this.$8.addSubscriptions(this.$13.addListener("viewportChange",this.$52),this.$13.addListener("DOM/click",function(a){if(a.button!==0)return;this.$1.clickVideo();a.preventDefault()}.bind(this)));d=["DOM/click","wheelScroll","viewportChange"];this.$8.addSubscriptions.apply(this.$8,d.map(function(a){return b("forwardEvent")(this.$13,this.$1,a)}.bind(this)));b("FullScreen").subscribe("changed",function(){this.$13.setFullscreen(b("FullScreen").isFullScreen())}.bind(this))}else{var e=new(b("SphericalViewportControl"))(a,this.$10,c);this.$8.addSubscriptions(e.addListener("DOM/click",function(a){if(a.button!==0)return;this.$1.clickVideo();a.preventDefault()}.bind(this)),e.addListener("mouseMove",function(a){this.$1.mouseMove(a),a.preventDefault()}.bind(this)),e.addListener("mouseUp",function(a){this.$1.mouseUp(a),a.preventDefault()}.bind(this)),e.addListener("mouseLeave",function(a){this.$1.mouseLeave(a),a.preventDefault()}.bind(this)),e.addListener("updateViewportBegin",function(){this.$1.isMuted()&&this.$18&&(this.$18=!1,this.$1.unmute()),this.$1.logEvent(b("VideoPlayerLoggerEvent").VIEWPORT_ROTATED)}.bind(this)));this.$8.addSubscriptions(e.addListener("viewportChange",this.$52));d=["DOM/click","updateViewportBegin","updateViewportMove","updateViewportEnd","wheelScroll","viewportChange"];this.$8.addSubscriptions.apply(this.$8,d.map(function(a){return b("forwardEvent")(e,this.$1,a)}.bind(this)));this.$12=e;b("Arbiter").subscribe("VideoChannelView/opened",function(){this.$21=!0,this.$12.disableKeyboard()}.bind(this));b("Arbiter").subscribe("VideoChannelView/closed",function(){this.$21=!1,this.$12.enableKeyboard()}.bind(this));b("FullScreen").subscribe("changed",function(){b("FullScreen").isFullScreen()?this.$12.enableKeyboard():this.$21&&this.$12.disableKeyboard()}.bind(this));this.$11.preventScrollDefaultAction&&this.$12.setPreventScrollDefaultAction(!0);b("SphericalVideoComponentActions").registerSphericalViewportControl(this.$1.getVideoPlayerID(),this.$12,this.$4)}this.$1.registerOption("SphericalVideoPlayer","getCurrentViewport",function(){return this.$19}.bind(this));this.$1.registerOption("SphericalVideoPlayer","getFieldOfView",function(){return this.$20}.bind(this));this.$4=a;b("DOM").insertAfter(this.$2,a);this.$11.useViewportDimension&&(this.$6=b("DOMDimensions").getElementDimensions(a))};c.prototype.$47=function(){__p&&__p();var a={canvasAttrs:{width:this.$5.width,height:this.$5.height,className:this.$11.canvasClassName,tabIndex:0},beforeCanvasLost:function(){return this.$49()}.bind(this)};a=b("SphericalMediaCanvasPool").get(this.$15,a,k);var c=new(b("SphericalRenderer"))(this.$2,a,this.$10);this.$9=new(b("SubscriptionsHandler"))();this.$9.addSubscriptions(c.addListener("renderingError",function(a){return this.$31({error:"SPHERICAL_RENDER_ERROR",message:a.message})}.bind(this)),c.addListener("renderingContextLost",this.$50));this.$3=a;this.$14=c;b("DOM").insertAfter(this.$2,a);this.$53(c,this.$5.width,this.$5.height);b("requestAnimationFrame")(this.$54);b("CSS").show(a)};c.prototype.$55=function(){__p&&__p();var a=this.$1.getRootNode();if(!a)return null;a=b("getElementRect")(a);a=a.top+a.bottom/2;var c=b("getViewportDimensions").withoutScrollbars().height;a=a/c*100;c=this.$12.getHorizontalFieldOfView();a=i(a,null,null,c);c=a.yaw;a=a.success;return a?c:null};c.prototype.$56=function(a){__p&&__p();if(typeof this.$26!=="number")return!1;typeof this.$25!=="number"&&(this.$25=0);var b=Math.abs(this.$25-this.$26);if(b<q)return!1;b=b*o;a=Math.max(a,p);this.$25<this.$26?this.$25+=Math.min(this.$26-this.$25,b*a):this.$25-=Math.min(this.$25-this.$26,b*a);return!0};c.prototype.$31=function(a){this.$1.logError(a),this.$1.emit(b("VideoPlayerLoggerEvent").ERROR,a),this.$35()};c.prototype.$44=function(){return this.$1.isState(b("VideoPlayerStates").PLAYING)};c.prototype.$58=function(a){if(!this.$25)return;this.$24=a-this.$25};c.prototype.$53=function(a,c,d){a.updateViewportDimensions(c,d),b("SphericalVideoComponentActions").updateViewportDimensions(this.$1.getVideoPlayerID(),c,d)};c.prototype.$32=function(){this.$7=!0};c.prototype.$59=function(a,c){var d=Date.now();if(d-this.$22>=l){this.$22=d;var e=!!this.$1.getOption("VideoWithSphericalGuide","auto");b("Banzai").post("spherical_video_viewport",{video_fbid:this.$1.getVideoID(),yaw_degrees:a,pitch_degrees:c,roll_degrees:0,field_of_view_y:this.$10.fieldOfView,aspect_ratio:this.$5.height/this.$5.width,video_player_position:this.$2.currentTime,video_player_position_ms:this.$2.currentTime*1e3,guide_enabled:e,timestamp:d})}};c.prototype.$57=function(){this.$14&&(this.$14.destroy(),this.$14=null,this.$27&&this.$27.remove(),this.$27=null,this.$9.release(),this.$3.remove())};c.prototype.$35=function(){this.$1.hasOption("SphericalVideoPlayer","isUnavailable")||this.$1.registerOption("SphericalVideoPlayer","isUnavailable",function(){return!0}),this.$8&&this.$8.release(),this.$57(),this.$12&&this.$12.destroy(),this.$13&&this.$13.destroy(),this.$4&&this.$4.remove(),b("SphericalVideoPerformanceTracker").get().destroy()};c.prototype.$51=function(){return{disableAutoClientSizeUpdate:!1,enableGyro:!1,enableRubberBanding:!1,maxSpringDegrees:0,maxStretchXDegrees:0,maxStretchYDegrees:0,minVFOV:3,rubberBandConstant:0,slipFactor:0,springFactor:0,enableZoomWithShiftKey:!1,enablePanningWithRightMouse:!1}};e.exports=c}),null);
__d("SphericalVideoRecenterControl",["SubscriptionsHandler","easeInOutInterpolate","requestAnimationFrame"],(function(a,b,c,d,e,f){__p&&__p();var g=1e3;function a(a,b,c){"use strict";this.$2=a,this.$1=!1,this.$7=this.$10.bind(this),this.$6={yaw:b,pitch:c},this.$5={yaw:b,pitch:c},a.getOption("SphericalVideoPlayer","isReady")?this.$11():a.once("SphericalVideoPlayer/ready",function(){return this.$11()}.bind(this))}a.prototype.$11=function(){"use strict";this.$9=new(b("SubscriptionsHandler"))(),this.$9.addSubscriptions(this.$2.addListener("updateViewportBegin",function(){return this.$12()}.bind(this)),this.$2.addListener("SphericalHeadingIndicator/click",function(){return this.$13()}.bind(this)),this.$2.addListener("VideoWithSphericalGuide/intervalUpdate",function(a){return this.updateTargetViewport(a.baseYaw+a.deltaYaw,a.basePitch+a.deltaPitch)}.bind(this)),this.$2.addListener("VideoWithSphericalGuide/stateToggle",function(a){a||(this.$6.yaw=this.$5.yaw,this.$6.pitch=this.$5.pitch)}.bind(this)),this.$2.addListener("SphericalVideoViewportTagComment/click",function(a){return this.$13(a)}.bind(this)))};a.prototype.updateTargetViewport=function(a,b){"use strict";this.$6.yaw=a,this.$6.pitch=b};a.prototype.$13=function(a){"use strict";__p&&__p();if(this.$1||this.$2.getOption("VideoWithSphericalGuide","enabled")&&this.$2.isState("playing"))return;this.$1=!0;this.$3=Date.now();var c=this.$2.getOption("SphericalVideoPlayer","getCurrentViewport");a=a||this.$6;var d=a.yaw-c.yaw;Math.abs(d)>180&&(d=d>0?d-360:d+360);this.$8={basePitch:c.pitch,deltaPitch:a.pitch-c.pitch,baseYaw:c.yaw,deltaYaw:d};this.$2.emit("SphericalVideoRecenterControl/animationStart");b("requestAnimationFrame")(this.$7)};a.prototype.$12=function(){"use strict";this.$1=!1};a.prototype.$10=function(){"use strict";__p&&__p();if(!this.$1){this.$2.emit("SphericalVideoRecenterControl/animationEnd");return}var a=Date.now();if(a-this.$3>g){this.$14(this.$8,1);this.$1=!1;this.$2.emit("SphericalVideoRecenterControl/animationEnd");return}b("requestAnimationFrame")(this.$7);this.$14(this.$8,b("easeInOutInterpolate")((a-this.$3)/g))};a.prototype.$14=function(a,b){"use strict";var c=a.deltaPitch*b+a.basePitch;b=a.deltaYaw*b+a.baseYaw;this.$2.setSphericalOrientation(b,c)};a.prototype.destroy=function(){"use strict";this.$9.release()};e.exports=a}),null);
__d("VideoSphericalHeadingIndicator",["cx","CSS","React","ReactDOM","SphericalVideoHeadingIndicator.react","VideoPlayerFallbackEvents","VideoPlayerLoggerEvent","destroyOnUnload"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,c,d,e,f,g){__p&&__p();g===void 0&&(g=!1);this.$7=function(a){a.preventDefault(),this.$1.emit("SphericalHeadingIndicator/click"),this.$1.logEvent(b("VideoPlayerLoggerEvent").HEADING_RESET)}.bind(this);this.$1=a;this.$2=c;this.$3=d;this.$4=g;var h=a.addListener(b("VideoPlayerFallbackEvents").ENTER,function(){h.remove(),b("ReactDOM").unmountComponentAtNode(c)});if(a.isState("ready")||a.isState("playing"))this.$5();else var i=a.addListener("stateChange",function(){(this.$1.isState("ready")||this.$1.isState("playing"))&&(i.remove(),this.$5())}.bind(this));b("destroyOnUnload")(function(){return b("ReactDOM").unmountComponentAtNode(c)})}a.prototype.$5=function(){this.$1.addListener("toggleFullscreen",this.$6.bind(this)),b("ReactDOM").render(b("React").createElement(b("SphericalVideoHeadingIndicator.react"),{initialYaw:this.$3,onClick:this.$7,controller:this.$1,isComposer:this.$4}),this.$2)};a.prototype.$6=function(){this.$1.isFullscreen()?b("CSS").addClass(this.$2,"_4ubd"):b("CSS").removeClass(this.$2,"_4ubd")};e.exports=a}),null);
__d("LanguageDialectSetTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LANGUAGE_DETECTION:"language_detection",MT_SOURCE:"source",MT_TARGET:"target",MLC:"mlc",MT_SOURCE_DARK_TRAFFIC:"source_dark",MT_TARGET_DARK_TRAFFIC:"target_dark"})}),null);